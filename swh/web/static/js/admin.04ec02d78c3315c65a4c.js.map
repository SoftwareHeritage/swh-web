{"version":3,"sources":["webpack://swh.admin/webpack/universalModuleDefinition","webpack://swh.admin/webpack/bootstrap","webpack://swh.admin/./swh/web/assets/src/utils/functions.js","webpack://swh.admin/./swh/web/assets/src/bundles/admin/deposit.js","webpack://swh.admin/./swh/web/assets/src/bundles/admin/origin-save.js","webpack://swh.admin/./swh/web/assets/src/utils/constants.js","webpack://swh.admin/./swh/web/assets/src/bundles/admin/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","handleFetchError","response","ok","handleFetchErrors","responses","length","staticAsset","asset","__STATIC__","csrfPost","url","headers","body","Cookies","fetch","credentials","method","isGitRepoUrl","domain","RegExp","test","removeUrlFragment","history","replaceState","document","title","location","pathname","search","selectText","startNode","endNode","selection","getSelection","removeAllRanges","range","createRange","setStart","nodeName","setEnd","childNodes","textContent","addRange","htmlAlert","type","message","closable","closeButton","extraClasses","genSwhLink","data","startsWith","Urls","browse_swh_id","initDepositAdmin","depositsTable","$","ready","fn","dataTable","ext","errMode","on","e","settings","techNote","text","DataTable","serverSide","ajax","admin_deposit_list","columns","render","row","originPatternIdx","indexOf","originUrl","slice","Date","toLocaleString","JSON","stringify","orderable","visible","scrollX","scrollY","scrollCollapse","order","draw","preventDefault","column","this","attr","removeClass","addClass","authorizedOriginTable","unauthorizedOriginTable","pendingSaveRequestsTable","acceptedSaveRequestsTable","rejectedSaveRequestsTable","enableRowSelection","tableSel","hasClass","closest","find","prop","initOriginSaveAdmin","admin_origin_save_authorized_urls_list","info","swh","webapp","addJumpToPagePopoverToDataTable","admin_origin_save_unauthorized_urls_list","columnsData","searchable","sanitizedURL","display","processing","language","swhSpinnerSrc","origin_save_requests_list","searchDelay","responsive","details","push","visit_date","browseOriginUrl","browse_origin","origin_url","save_task_status","id","click","reload","target","parents","event","stopPropagation","popover","addAuthorizedOriginUrl","val","addOriginUrl","admin_origin_save_add_authorized_url","then","add","html","removeAuthorizedOriginUrl","removeOriginUrl","admin_origin_save_remove_authorized_url","remove","addUnauthorizedOriginUrl","admin_origin_save_add_unauthorized_url","removeUnauthorizedOriginUrl","admin_origin_save_remove_unauthorized_url","acceptOriginSaveRequest","selectedRow","showModalConfirm","rowData","acceptSaveRequestUrl","admin_origin_save_request_accept","rejectOriginSaveRequest","rejectSaveRequestUrl","admin_origin_save_request_reject","removeOriginSaveRequest","requestTable","requestId","removeSaveRequestUrl","admin_origin_save_request_remove","removePendingOriginSaveRequest","removeAcceptedOriginSaveRequest","removeRejectedOriginSaveRequest","displaySaveRequestInfo","saveRequestId","saveRequestTaskInfoUrl","admin_origin_save_task_info","filterXSS","json","saveRequestTaskInfo","content","isEmptyObject","saveRequestInfo","arguments","backend_id","scheduled","ended","duration","worker","BREAKPOINT_SM","BREAKPOINT_MD"],"mappings":"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","file":"js/admin.04ec02d78c3315c65a4c.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"admin\"] = factory();\n\telse\n\t\troot[\"swh\"] = root[\"swh\"] || {}, root[\"swh\"][\"admin\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 188);\n","/**\n * Copyright (C) 2018-2019  The Software Heritage developers\n * See the AUTHORS file at the top-level directory of this distribution\n * License: GNU Affero General Public License version 3, or any later version\n * See top-level LICENSE file for more information\n */\n\n// utility functions\n\nexport function handleFetchError(response) {\n  if (!response.ok) {\n    throw response;\n  }\n  return response;\n}\n\nexport function handleFetchErrors(responses) {\n  for (let i = 0; i < responses.length; ++i) {\n    if (!responses[i].ok) {\n      throw responses[i];\n    }\n  }\n  return responses;\n}\n\nexport function staticAsset(asset) {\n  return `${__STATIC__}${asset}`;\n}\n\nexport function csrfPost(url, headers = {}, body = null) {\n  headers['X-CSRFToken'] = Cookies.get('csrftoken');\n  return fetch(url, {\n    credentials: 'include',\n    headers: headers,\n    method: 'POST',\n    body: body\n  });\n}\n\nexport function isGitRepoUrl(url, domain) {\n  let endOfPattern = '\\\\/[\\\\w\\\\.-]+\\\\/?(?!=.git)(?:\\\\.git(?:\\\\/?|\\\\#[\\\\w\\\\.\\\\-_]+)?)?$';\n  let pattern = `(?:git|https?|git@)(?:\\\\:\\\\/\\\\/)?${domain}[/|:][A-Za-z0-9-]+?` + endOfPattern;\n  let re = new RegExp(pattern);\n  return re.test(url);\n};\n\nexport function removeUrlFragment() {\n  history.replaceState('', document.title, window.location.pathname + window.location.search);\n}\n\nexport function selectText(startNode, endNode) {\n  let selection = window.getSelection();\n  selection.removeAllRanges();\n  let range = document.createRange();\n  range.setStart(startNode, 0);\n  if (endNode.nodeName !== '#text') {\n    range.setEnd(endNode, endNode.childNodes.length);\n  } else {\n    range.setEnd(endNode, endNode.textContent.length);\n  }\n  selection.addRange(range);\n}\n\nexport function htmlAlert(type, message, closable = false) {\n  let closeButton = '';\n  let extraClasses = '';\n  if (closable) {\n    closeButton =\n      `<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>`;\n    extraClasses = 'alert-dismissible';\n  }\n  return `<div class=\"alert alert-${type} ${extraClasses}\" role=\"alert\">${message}${closeButton}</div>`;\n}\n","/**\n * Copyright (C) 2018-2019  The Software Heritage developers\n * See the AUTHORS file at the top-level directory of this distribution\n * License: GNU Affero General Public License version 3, or any later version\n * See top-level LICENSE file for more information\n */\n\nfunction genSwhLink(data, type) {\n  if (type === 'display') {\n    if (data && data.startsWith('swh')) {\n      let browseUrl = Urls.browse_swh_id(data);\n      return `<a href=\"${browseUrl}\">${data}</a>`;\n    }\n  }\n  return data;\n}\n\nexport function initDepositAdmin() {\n  let depositsTable;\n  $(document).ready(() => {\n    $.fn.dataTable.ext.errMode = 'none';\n    depositsTable = $('#swh-admin-deposit-list')\n      .on('error.dt', (e, settings, techNote, message) => {\n        $('#swh-admin-deposit-list-error').text(message);\n      })\n      .DataTable({\n        serverSide: true,\n        ajax: Urls.admin_deposit_list(),\n        columns: [\n          {\n            data: 'id',\n            name: 'id'\n          },\n          {\n            data: 'swh_id_context',\n            name: 'swh_id_context',\n            render: (data, type, row) => {\n              if (data && type === 'display') {\n                let originPattern = ';origin=';\n                let originPatternIdx = data.indexOf(originPattern);\n                if (originPatternIdx !== -1) {\n                  let originUrl = data.slice(originPatternIdx + originPattern.length);\n                  return `<a href=\"${originUrl}\">${originUrl}</a>`;\n                }\n              }\n              return data;\n            }\n          },\n          {\n            data: 'reception_date',\n            name: 'reception_date',\n            render: (data, type, row) => {\n              if (type === 'display') {\n                let date = new Date(data);\n                return date.toLocaleString();\n              }\n              return data;\n            }\n          },\n          {\n            data: 'status',\n            name: 'status'\n          },\n          {\n            data: 'status_detail',\n            name: 'status_detail',\n            render: (data, type, row) => {\n              if (type === 'display' && data) {\n                let text = data;\n                if (typeof data === 'object') {\n                  text = JSON.stringify(data, null, 4);\n                }\n                return `<div style=\"width: 200px; white-space: pre; overflow-x: auto;\">${text}</div>`;\n              }\n              return data;\n            },\n            orderable: false,\n            visible: false\n          },\n          {\n            data: 'swh_anchor_id',\n            name: 'swh_anchor_id',\n            render: (data, type, row) => {\n              return genSwhLink(data, type);\n            },\n            orderable: false\n          },\n          {\n            data: 'swh_anchor_id_context',\n            name: 'swh_anchor_id_context',\n            render: (data, type, row) => {\n              return genSwhLink(data, type);\n            },\n            orderable: false,\n            visible: false\n          },\n          {\n            data: 'swh_id',\n            name: 'swh_id',\n            render: (data, type, row) => {\n              return genSwhLink(data, type);\n            },\n            orderable: false,\n            visible: false\n          },\n          {\n            data: 'swh_id_context',\n            name: 'swh_id_context',\n            render: (data, type, row) => {\n              return genSwhLink(data, type);\n            },\n            orderable: false,\n            visible: false\n          }\n        ],\n        scrollX: true,\n        scrollY: '50vh',\n        scrollCollapse: true,\n        order: [[0, 'desc']]\n      });\n    depositsTable.draw();\n  });\n\n  $('a.toggle-col').on('click', function(e) {\n    e.preventDefault();\n    var column = depositsTable.column($(this).attr('data-column'));\n    column.visible(!column.visible());\n    if (column.visible()) {\n      $(this).removeClass('col-hidden');\n    } else {\n      $(this).addClass('col-hidden');\n    }\n  });\n\n}\n","/**\n * Copyright (C) 2018-2019  The Software Heritage developers\n * See the AUTHORS file at the top-level directory of this distribution\n * License: GNU Affero General Public License version 3, or any later version\n * See top-level LICENSE file for more information\n */\n\nimport {handleFetchError, csrfPost, htmlAlert} from 'utils/functions';\nimport {swhSpinnerSrc} from 'utils/constants';\n\nlet authorizedOriginTable;\nlet unauthorizedOriginTable;\nlet pendingSaveRequestsTable;\nlet acceptedSaveRequestsTable;\nlet rejectedSaveRequestsTable;\n\nfunction enableRowSelection(tableSel) {\n  $(`${tableSel} tbody`).on('click', 'tr', function() {\n    if ($(this).hasClass('selected')) {\n      $(this).removeClass('selected');\n      $(tableSel).closest('.tab-pane').find('.swh-action-need-selection').prop('disabled', true);\n    } else {\n      $(`${tableSel} tr.selected`).removeClass('selected');\n      $(this).addClass('selected');\n      $(tableSel).closest('.tab-pane').find('.swh-action-need-selection').prop('disabled', false);\n    }\n  });\n}\n\nexport function initOriginSaveAdmin() {\n  $(document).ready(() => {\n\n    $.fn.dataTable.ext.errMode = 'throw';\n\n    authorizedOriginTable = $('#swh-authorized-origin-urls').DataTable({\n      serverSide: true,\n      ajax: Urls.admin_origin_save_authorized_urls_list(),\n      columns: [{data: 'url', name: 'url'}],\n      scrollY: '50vh',\n      scrollCollapse: true,\n      info: false\n    });\n    enableRowSelection('#swh-authorized-origin-urls');\n    swh.webapp.addJumpToPagePopoverToDataTable(authorizedOriginTable);\n\n    unauthorizedOriginTable = $('#swh-unauthorized-origin-urls').DataTable({\n      serverSide: true,\n      ajax: Urls.admin_origin_save_unauthorized_urls_list(),\n      columns: [{data: 'url', name: 'url'}],\n      scrollY: '50vh',\n      scrollCollapse: true,\n      info: false\n    });\n    enableRowSelection('#swh-unauthorized-origin-urls');\n    swh.webapp.addJumpToPagePopoverToDataTable(unauthorizedOriginTable);\n\n    let columnsData = [\n      {\n        data: 'id',\n        name: 'id',\n        visible: false,\n        searchable: false\n      },\n      {\n        data: 'save_request_date',\n        name: 'request_date',\n        render: (data, type, row) => {\n          if (type === 'display') {\n            let date = new Date(data);\n            return date.toLocaleString();\n          }\n          return data;\n        }\n      },\n      {\n        data: 'visit_type',\n        name: 'visit_type'\n      },\n      {\n        data: 'origin_url',\n        name: 'origin_url',\n        render: (data, type, row) => {\n          if (type === 'display') {\n            const sanitizedURL = $.fn.dataTable.render.text().display(data);\n            return `<a href=\"${sanitizedURL}\">${sanitizedURL}</a>`;\n          }\n          return data;\n        }\n      }\n    ];\n\n    pendingSaveRequestsTable = $('#swh-origin-save-pending-requests').DataTable({\n      serverSide: true,\n      processing: true,\n      language: {\n        processing: `<img src=\"${swhSpinnerSrc}\"></img>`\n      },\n      ajax: Urls.origin_save_requests_list('pending'),\n      searchDelay: 1000,\n      columns: columnsData,\n      scrollY: '50vh',\n      scrollCollapse: true,\n      order: [[0, 'desc']],\n      responsive: {\n        details: {\n          type: 'none'\n        }\n      }\n    });\n    enableRowSelection('#swh-origin-save-pending-requests');\n    swh.webapp.addJumpToPagePopoverToDataTable(pendingSaveRequestsTable);\n\n    rejectedSaveRequestsTable = $('#swh-origin-save-rejected-requests').DataTable({\n      serverSide: true,\n      processing: true,\n      language: {\n        processing: `<img src=\"${swhSpinnerSrc}\"></img>`\n      },\n      ajax: Urls.origin_save_requests_list('rejected'),\n      searchDelay: 1000,\n      columns: columnsData,\n      scrollY: '50vh',\n      scrollCollapse: true,\n      order: [[0, 'desc']],\n      responsive: {\n        details: {\n          type: 'none'\n        }\n      }\n    });\n    enableRowSelection('#swh-origin-save-rejected-requests');\n    swh.webapp.addJumpToPagePopoverToDataTable(rejectedSaveRequestsTable);\n\n    columnsData.push({\n      data: 'save_task_status',\n      name: 'save_task_status',\n      render: (data, type, row) => {\n        if (data === 'succeed' && row.visit_date) {\n          let browseOriginUrl = Urls.browse_origin(row.origin_url);\n          browseOriginUrl += `visit/${row.visit_date}/`;\n          return `<a href=\"${browseOriginUrl}\">${data}</a>`;\n        }\n        return data;\n      }\n    });\n\n    columnsData.push({\n      name: 'info',\n      render: (data, type, row) => {\n        if (row.save_task_status === 'succeed' || row.save_task_status === 'failed') {\n          return '<i class=\"fa fa-info-circle swh-save-request-info\" aria-hidden=\"true\" style=\"cursor: pointer\"' +\n                  `onclick=\"swh.admin.displaySaveRequestInfo(event, ${row.id})\"></i>`;\n        } else {\n          return '';\n        }\n      }\n    });\n\n    acceptedSaveRequestsTable = $('#swh-origin-save-accepted-requests').DataTable({\n      serverSide: true,\n      processing: true,\n      language: {\n        processing: `<img src=\"${swhSpinnerSrc}\"></img>`\n      },\n      ajax: Urls.origin_save_requests_list('accepted'),\n      searchDelay: 1000,\n      columns: columnsData,\n      scrollY: '50vh',\n      scrollCollapse: true,\n      order: [[0, 'desc']],\n      responsive: {\n        details: {\n          type: 'none'\n        }\n      }\n    });\n    enableRowSelection('#swh-origin-save-accepted-requests');\n    swh.webapp.addJumpToPagePopoverToDataTable(acceptedSaveRequestsTable);\n\n    $('#swh-origin-save-requests-nav-item').on('shown.bs.tab', () => {\n      pendingSaveRequestsTable.draw();\n    });\n\n    $('#swh-origin-save-url-filters-nav-item').on('shown.bs.tab', () => {\n      authorizedOriginTable.draw();\n    });\n\n    $('#swh-authorized-origins-tab').on('shown.bs.tab', () => {\n      authorizedOriginTable.draw();\n    });\n\n    $('#swh-unauthorized-origins-tab').on('shown.bs.tab', () => {\n      unauthorizedOriginTable.draw();\n    });\n\n    $('#swh-save-requests-pending-tab').on('shown.bs.tab', () => {\n      pendingSaveRequestsTable.draw();\n    });\n\n    $('#swh-save-requests-accepted-tab').on('shown.bs.tab', () => {\n      acceptedSaveRequestsTable.draw();\n    });\n\n    $('#swh-save-requests-rejected-tab').on('shown.bs.tab', () => {\n      rejectedSaveRequestsTable.draw();\n    });\n\n    $('#swh-save-requests-pending-tab').click(() => {\n      pendingSaveRequestsTable.ajax.reload(null, false);\n    });\n\n    $('#swh-save-requests-accepted-tab').click(() => {\n      acceptedSaveRequestsTable.ajax.reload(null, false);\n    });\n\n    $('#swh-save-requests-rejected-tab').click(() => {\n      rejectedSaveRequestsTable.ajax.reload(null, false);\n    });\n\n    $('body').on('click', e => {\n      if ($(e.target).parents('.popover').length > 0) {\n        event.stopPropagation();\n      } else if ($(e.target).parents('.swh-save-request-info').length === 0) {\n        $('.swh-save-request-info').popover('dispose');\n      }\n    });\n\n  });\n}\n\nexport function addAuthorizedOriginUrl() {\n  let originUrl = $('#swh-authorized-url-prefix').val();\n  let addOriginUrl = Urls.admin_origin_save_add_authorized_url(originUrl);\n  csrfPost(addOriginUrl)\n    .then(handleFetchError)\n    .then(() => {\n      authorizedOriginTable.row.add({'url': originUrl}).draw();\n      $('.swh-add-authorized-origin-status').html(\n        htmlAlert('success', 'The origin url prefix has been successfully added in the authorized list.', true)\n      );\n    })\n    .catch(response => {\n      $('.swh-add-authorized-origin-status').html(\n        htmlAlert('warning', 'The provided origin url prefix is already registered in the authorized list.', true)\n      );\n    });\n}\n\nexport function removeAuthorizedOriginUrl() {\n  let originUrl = $('#swh-authorized-origin-urls tr.selected').text();\n  if (originUrl) {\n    let removeOriginUrl = Urls.admin_origin_save_remove_authorized_url(originUrl);\n    csrfPost(removeOriginUrl)\n      .then(handleFetchError)\n      .then(() => {\n        authorizedOriginTable.row('.selected').remove().draw();\n      })\n      .catch(() => {});\n  }\n}\n\nexport function addUnauthorizedOriginUrl() {\n  let originUrl = $('#swh-unauthorized-url-prefix').val();\n  let addOriginUrl = Urls.admin_origin_save_add_unauthorized_url(originUrl);\n  csrfPost(addOriginUrl)\n    .then(handleFetchError)\n    .then(() => {\n      unauthorizedOriginTable.row.add({'url': originUrl}).draw();\n      $('.swh-add-unauthorized-origin-status').html(\n        htmlAlert('success', 'The origin url prefix has been successfully added in the unauthorized list.', true)\n      );\n    })\n    .catch(() => {\n      $('.swh-add-unauthorized-origin-status').html(\n        htmlAlert('warning', 'The provided origin url prefix is already registered in the unauthorized list.', true)\n      );\n    });\n}\n\nexport function removeUnauthorizedOriginUrl() {\n  let originUrl = $('#swh-unauthorized-origin-urls tr.selected').text();\n  if (originUrl) {\n    let removeOriginUrl = Urls.admin_origin_save_remove_unauthorized_url(originUrl);\n    csrfPost(removeOriginUrl)\n      .then(handleFetchError)\n      .then(() => {\n        unauthorizedOriginTable.row('.selected').remove().draw();\n      })\n      .catch(() => {});\n  }\n}\n\nexport function acceptOriginSaveRequest() {\n  let selectedRow = pendingSaveRequestsTable.row('.selected');\n  if (selectedRow.length) {\n    let acceptOriginSaveRequestCallback = () => {\n      let rowData = selectedRow.data();\n      let acceptSaveRequestUrl = Urls.admin_origin_save_request_accept(rowData['visit_type'], rowData['origin_url']);\n      csrfPost(acceptSaveRequestUrl)\n        .then(() => {\n          pendingSaveRequestsTable.ajax.reload(null, false);\n        });\n    };\n\n    swh.webapp.showModalConfirm(\n      'Accept origin save request ?',\n      'Are you sure to accept this origin save request ?',\n      acceptOriginSaveRequestCallback);\n  }\n}\n\nexport function rejectOriginSaveRequest() {\n  let selectedRow = pendingSaveRequestsTable.row('.selected');\n  if (selectedRow.length) {\n    let rejectOriginSaveRequestCallback = () => {\n      let rowData = selectedRow.data();\n      let rejectSaveRequestUrl = Urls.admin_origin_save_request_reject(rowData['visit_type'], rowData['origin_url']);\n      csrfPost(rejectSaveRequestUrl)\n        .then(() => {\n          pendingSaveRequestsTable.ajax.reload(null, false);\n        });\n    };\n\n    swh.webapp.showModalConfirm(\n      'Reject origin save request ?',\n      'Are you sure to reject this origin save request ?',\n      rejectOriginSaveRequestCallback);\n  }\n}\n\nfunction removeOriginSaveRequest(requestTable) {\n  let selectedRow = requestTable.row('.selected');\n  if (selectedRow.length) {\n    let requestId = selectedRow.data()['id'];\n    let removeOriginSaveRequestCallback = () => {\n      let removeSaveRequestUrl = Urls.admin_origin_save_request_remove(requestId);\n      csrfPost(removeSaveRequestUrl)\n        .then(() => {\n          requestTable.ajax.reload(null, false);\n        });\n    };\n\n    swh.webapp.showModalConfirm(\n      'Remove origin save request ?',\n      'Are you sure to remove this origin save request ?',\n      removeOriginSaveRequestCallback);\n  }\n}\n\nexport function removePendingOriginSaveRequest() {\n  removeOriginSaveRequest(pendingSaveRequestsTable);\n}\n\nexport function removeAcceptedOriginSaveRequest() {\n  removeOriginSaveRequest(acceptedSaveRequestsTable);\n}\n\nexport function removeRejectedOriginSaveRequest() {\n  removeOriginSaveRequest(rejectedSaveRequestsTable);\n}\n\nexport function displaySaveRequestInfo(event, saveRequestId) {\n  event.stopPropagation();\n  const saveRequestTaskInfoUrl = Urls.admin_origin_save_task_info(saveRequestId);\n  $('.swh-save-request-info').popover('dispose');\n  $(event.target).popover({\n    'title': 'Save request task information',\n    'content': `<div class=\"swh-popover\">\n                  <div class=\"text-center\">\n                    <img src=${swhSpinnerSrc}></img>\n                    <p>Fetching task information ...</p>\n                  </div>\n                </div>`,\n    'html': true,\n    'placement': 'left',\n    'sanitizeFn': swh.webapp.filterXSS\n  });\n  $(event.target).popover('show');\n  fetch(saveRequestTaskInfoUrl)\n    .then(response => response.json())\n    .then(saveRequestTaskInfo => {\n      let content;\n      if ($.isEmptyObject(saveRequestTaskInfo)) {\n        content = 'Not available';\n      } else {\n        let saveRequestInfo = [];\n        saveRequestInfo.push({\n          key: 'Task type',\n          value: saveRequestTaskInfo.type\n        });\n        if (saveRequestTaskInfo.hasOwnProperty('task_name')) {\n          saveRequestInfo.push({\n            key: 'Task name',\n            value: saveRequestTaskInfo.name\n          });\n        }\n        saveRequestInfo.push({\n          key: 'Task arguments',\n          value: JSON.stringify(saveRequestTaskInfo.arguments, null, 2)\n        });\n        saveRequestInfo.push({\n          key: 'Task id',\n          value: saveRequestTaskInfo.id\n        });\n        saveRequestInfo.push({\n          key: 'Task backend id',\n          value: saveRequestTaskInfo.backend_id\n        });\n        saveRequestInfo.push({\n          key: 'Task scheduling date',\n          value: new Date(saveRequestTaskInfo.scheduled).toLocaleString()\n        });\n        saveRequestInfo.push({\n          key: 'Task termination date',\n          value: new Date(saveRequestTaskInfo.ended).toLocaleString()\n        });\n        if (saveRequestTaskInfo.hasOwnProperty('duration')) {\n          saveRequestInfo.push({\n            key: 'Task duration',\n            value: saveRequestTaskInfo.duration + ' s'\n          });\n        }\n        if (saveRequestTaskInfo.hasOwnProperty('worker')) {\n          saveRequestInfo.push({\n            key: 'Task executor',\n            value: saveRequestTaskInfo.worker\n          });\n        }\n        if (saveRequestTaskInfo.hasOwnProperty('message')) {\n          saveRequestInfo.push({\n            key: 'Task log',\n            value: saveRequestTaskInfo.message\n          });\n        }\n        content = '<table class=\"table\"><tbody>';\n        for (let info of saveRequestInfo) {\n          content +=\n            `<tr>\n              <th class=\"swh-metadata-table-row swh-metadata-table-key\">${info.key}</th>\n              <td class=\"swh-metadata-table-row swh-metadata-table-value\">\n                <pre>${info.value}</pre>\n              </td>\n            </tr>`;\n        }\n        content += '</tbody></table>';\n      }\n      $('.swh-popover').html(content);\n      $(event.target).popover('update');\n    });\n}\n","/**\n * Copyright (C) 2019  The Software Heritage developers\n * See the AUTHORS file at the top-level directory of this distribution\n * License: GNU Affero General Public License version 3, or any later version\n * See top-level LICENSE file for more information\n */\n\nimport {staticAsset} from 'utils/functions';\n\n// Constants defining Bootstrap Breakpoints\nexport const BREAKPOINT_SM = 768;\nexport const BREAKPOINT_MD = 992;\nexport const BREAKPOINT_LG = 1200;\n\nexport const swhSpinnerSrc = staticAsset('img/swh-spinner.gif');\n","/**\n * Copyright (C) 2018  The Software Heritage developers\n * See the AUTHORS file at the top-level directory of this distribution\n * License: GNU Affero General Public License version 3, or any later version\n * See top-level LICENSE file for more information\n */\n\nexport * from './deposit';\nexport * from './origin-save';\n"],"sourceRoot":""}