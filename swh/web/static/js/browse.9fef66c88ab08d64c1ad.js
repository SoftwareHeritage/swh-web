!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.browse=e():(t.swh=t.swh||{},t.swh.browse=e())}(window,function(){return function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/static/",s(s.s=469)}({207:function(t,e,s){"use strict";s.r(e);s(468),s(466),s(464),s(462);function n(t,e){function s(){$(".swh-releases-switch").removeClass("active"),$(".swh-branches-switch").addClass("active"),$("#swh-tab-releases").removeClass("active"),$("#swh-tab-branches").addClass("active")}function n(){$(".swh-branches-switch").removeClass("active"),$(".swh-releases-switch").addClass("active"),$("#swh-tab-branches").removeClass("active"),$("#swh-tab-releases").addClass("active")}$(document).ready(function(){$(".dropdown-menu a.swh-branches-switch").click(function(t){s(),t.stopPropagation()}),$(".dropdown-menu a.swh-releases-switch").click(function(t){n(),t.stopPropagation()});var i=!1;$("#swh-branches-releases-dd").on("show.bs.dropdown",function(){if(!i){var t=$(".swh-branches-releases").width();$(".swh-branches-releases").width(t+25),i=!0}}),t&&(e?s():n())})}function i(t,e,s){var n=t[e];t[e]=t[s],t[s]=n}var r=s(35),o=void 0,a=15,u=10*a,c=0,l=null,d=!1;function f(){setTimeout(function(){$("#origin-search-results tbody tr").removeAttr("style")})}function h(t,e){var s=e%u;if(t.length>0){$("#swh-origin-search-results").show(),$("#swh-no-origins-found").hide(),$("#origin-search-results tbody tr").remove();for(var n=$("#origin-search-results tbody"),i=function(e){var s=t[e],i="<tr>";i+='<td style="width: 120px;">'+s.type+"</td>";var r=Urls.browse_origin(s.type,s.url);i+='<td style="white-space: nowrap;"><a href="'+r+'">'+r+"</a></td>",i+='<td id="visit-status-origin-'+s.id+'"><i title="Checking visit status" class="fa fa-refresh fa-spin"></i></td>',i+="</tr>",n.append(i);var o=Urls.browse_origin_latest_snapshot(s.id);fetch(o,{credentials:"same-origin"}).then(function(t){return t.json()}).then(function(t){var e=s.id;$("#visit-status-origin-"+e).children().remove(),t?$("#visit-status-origin-"+e).append('<i title="Origin has at least one full visit by Software Heritage" class="fa fa-check"></i>'):$("#visit-status-origin-"+e).append('<i title="Origin has not yet been visited by Software Heritage or does not have at least one full visit" class="fa fa-times"></i>')})},r=s;r<s+a&&r<t.length;++r)i(r);f()}else $("#swh-origin-search-results").hide(),$("#swh-no-origins-found").show();t.length-s<a||t.length<u&&s+a===t.length?$("#origins-next-results-button").addClass("disabled"):$("#origins-next-results-button").removeClass("disabled"),e>0?$("#origins-prev-results-button").removeClass("disabled"):$("#origins-prev-results-button").addClass("disabled"),d=!1,setTimeout(function(){window.scrollTo(0,0)})}function g(t,e,s,n){o=t;var a=[];!function t(e,s,n){if(1===(n=n||e.length))s(e);else for(var r=1;r<=n;r+=1)t(e,s,n-1),i(e,(n%2?1:r)-1,n-1)}(t.trim().replace(/\s+/g," ").split(" "),function(t){return a.push(t.join(".*"))});var u=a.join("|"),c=Urls.browse_origin_search(u)+"?limit="+e+"&offset="+s+"&regexp=true";$(".swh-loading").addClass("show"),fetch(c,{credentials:"same-origin"}).then(r.a).then(function(t){return t.json()}).then(function(e){l=e,"undefined"!=typeof Storage&&(sessionStorage.setItem("last-swh-origin-url-patterns",t),sessionStorage.setItem("last-swh-origin-search-results",JSON.stringify(e)),sessionStorage.setItem("last-swh-origin-search-offset",n)),$(".swh-loading").removeClass("show"),h(e,n)}).catch(function(){$(".swh-loading").removeClass("show"),d=!1})}function w(){$(document).ready(function(){if("undefined"!=typeof Storage){o=sessionStorage.getItem("last-swh-origin-url-patterns");var t=sessionStorage.getItem("last-swh-origin-search-results");c=sessionStorage.getItem("last-swh-origin-search-offset"),t&&($("#origins-url-patterns").val(o),c=parseInt(c),h(JSON.parse(t),c))}$("#search_origins").submit(function(t){var e=$("#origins-url-patterns").val();d=!0,g(e,u,c=0,c),t.preventDefault()}),$("#origins-next-results-button").click(function(t){$("#origins-next-results-button").hasClass("disabled")||d||(d=!0,c+=a,l&&c%u!=0?h(l,c):g(o,u,c,c),t.preventDefault())}),$("#origins-prev-results-button").click(function(t){$("#origins-prev-results-button").hasClass("disabled")||d||(d=!0,c-=a,!l||c>0&&(c+a)%u==0?g(o,u,c+a-u,c):h(l,c),t.preventDefault())}),$(document).on("shown.bs.tab",'a[data-toggle="tab"]',function(t){"Search"===t.currentTarget.text.trim()&&f()})})}function p(t){$(document).ready(function(){$(".dropdown-submenu a.dropdown-item").on("click",function(t){$(t.target).next("div").toggle(),"none"!==$(t.target).next("div").css("display")?$(t.target).focus():$(t.target).blur(),t.stopPropagation(),t.preventDefault()}),$(".browse-"+t+"-item").addClass("active"),$(".browse-"+t+"-link").addClass("active"),$(".browse-main-link").click(function(t){var e=sessionStorage.getItem("last-browse-page");e&&(t.preventDefault(),window.location=e)}),window.onunload=function(){"main"===t&&sessionStorage.setItem("last-browse-page",window.location)}})}s.d(e,"initSnapshotNavigation",function(){return n}),s.d(e,"initOriginSearch",function(){return w}),s.d(e,"initBrowse",function(){return p})},35:function(t,e,s){"use strict";function n(t){if(!t.ok)throw Error(t.statusText);return t}function i(t){for(var e=0;e<t.length;++e)if(!t[e].ok)throw Error(t[e].statusText);return t}function r(t){return"/static/"+t}s.d(e,"a",function(){return n}),s.d(e,"b",function(){return i}),s.d(e,"c",function(){return r})},462:function(t,e,s){},464:function(t,e,s){},466:function(t,e,s){},468:function(t,e,s){},469:function(t,e,s){t.exports=s(207)}})});
//# browse.9fef66c88ab08d64c1ad.js.map