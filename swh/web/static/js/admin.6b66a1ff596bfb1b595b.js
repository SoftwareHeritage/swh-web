!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.admin=t():(e.swh=e.swh||{},e.swh.admin=t())}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/static/",r(r.s=759)}({10:function(e,t,r){"use strict";function n(e){if(!e.ok)throw e;return e}function i(e){for(var t=0;t<e.length;++t)if(!e[t].ok)throw e[t];return e}function a(e){return"/static/"+e}function o(e,t,r){return void 0===t&&(t={}),void 0===r&&(r=null),t["X-CSRFToken"]=Cookies.get("csrftoken"),fetch(e,{credentials:"include",headers:t,method:"POST",body:r})}function s(e,t){return new RegExp("(?:git|https?|git@)(?:\\:\\/\\/)?"+t+"[/|:][A-Za-z0-9-]+?\\/[\\w\\.-]+\\/?(?!=.git)(?:\\.git(?:\\/?|\\#[\\w\\.\\-_]+)?)?$").test(e)}function u(){history.replaceState("",document.title,window.location.pathname+window.location.search)}function d(e,t){var r=window.getSelection();r.removeAllRanges();var n=document.createRange();n.setStart(e,0),"#text"!==t.nodeName?n.setEnd(t,t.childNodes.length):n.setEnd(t,t.textContent.length),r.addRange(n)}r.d(t,"b",function(){return n}),r.d(t,"c",function(){return i}),r.d(t,"g",function(){return a}),r.d(t,"a",function(){return o}),r.d(t,"d",function(){return s}),r.d(t,"e",function(){return u}),r.d(t,"f",function(){return d})},12:function(e,t){var r=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=r)},157:function(e,t,r){var n=r(12),i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},474:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(63),i=r.n(n);function a(){$(document).ready(function(){$.fn.dataTable.ext.errMode="none",$("#swh-admin-deposit-list").on("error.dt",function(e,t,r,n){$("#swh-admin-deposit-list-error").text(n)}).DataTable({serverSide:!0,ajax:Urls.admin_deposit_list(),columns:[{data:"id",name:"id"},{data:"external_id",name:"external_id",render:function(e,t,r){return"display"===t&&e&&e.startsWith("hal")?'<a href="https://hal.archives-ouvertes.fr/'+e+'">'+e+"</a>":e}},{data:"reception_date",name:"reception_date",render:function(e,t,r){return"display"===t?new Date(e).toLocaleString():e}},{data:"status",name:"status"},{data:"status_detail",name:"status_detail",render:function(e,t,r){if("display"===t&&e){var n=e;return"object"==typeof e&&(n=i()(e,null,4)),'<div style="width: 200px; white-space: pre; overflow-x: auto;">'+n+"</div>"}return e},orderable:!1},{data:"swh_id",name:"swh_id",render:function(e,t,r){if("display"===t&&(e&&e.startsWith("swh")))return'<a href="'+Urls.browse_swh_id(e)+'">'+e+"</a>";return e}}],scrollY:"50vh",scrollCollapse:!0,order:[[0,"desc"]]}).draw()})}},475:function(e,t,r){"use strict";r.d(t,"d",function(){return c}),r.d(t,"b",function(){return l}),r.d(t,"g",function(){return f}),r.d(t,"c",function(){return h}),r.d(t,"j",function(){return v}),r.d(t,"a",function(){return w}),r.d(t,"e",function(){return g}),r.d(t,"h",function(){return _}),r.d(t,"f",function(){return b}),r.d(t,"i",function(){return m});var n,i,a,o,s,u=r(10);function d(e){$(e+" tbody").on("click","tr",function(){$(this).hasClass("selected")?$(this).removeClass("selected"):($(e+" tr.selected").removeClass("selected"),$(this).addClass("selected"))})}function c(){$(document).ready(function(){$.fn.dataTable.ext.errMode="throw",n=$("#swh-authorized-origin-urls").DataTable({serverSide:!0,ajax:Urls.admin_origin_save_authorized_urls_list(),columns:[{data:"url",name:"url"}],scrollY:"50vh",scrollCollapse:!0,info:!1}),d("#swh-authorized-origin-urls"),i=$("#swh-unauthorized-origin-urls").DataTable({serverSide:!0,ajax:Urls.admin_origin_save_unauthorized_urls_list(),columns:[{data:"url",name:"url"}],scrollY:"50vh",scrollCollapse:!0,info:!1}),d("#swh-unauthorized-origin-urls");var e=[{data:"id",name:"id",visible:!1,searchable:!1},{data:"save_request_date",name:"request_date",render:function(e,t,r){return"display"===t?new Date(e).toLocaleString():e}},{data:"origin_type",name:"origin_type"},{data:"origin_url",name:"origin_url",render:function(e,t,r){return"display"===t?'<a href="'+e+'">'+e+"</a>":e}}];a=$("#swh-origin-save-pending-requests").DataTable({serverSide:!0,ajax:Urls.browse_origin_save_requests_list("pending"),searchDelay:1e3,columns:e,scrollY:"50vh",scrollCollapse:!0,order:[[0,"desc"]]}),d("#swh-origin-save-pending-requests"),s=$("#swh-origin-save-rejected-requests").DataTable({serverSide:!0,ajax:Urls.browse_origin_save_requests_list("rejected"),searchDelay:1e3,columns:e,scrollY:"50vh",scrollCollapse:!0,order:[[0,"desc"]]}),d("#swh-origin-save-rejected-requests"),e.push({data:"save_task_status",name:"save_task_status",render:function(e,t,r){return"succeed"===e?'<a href="'+Urls.browse_origin(r.origin_url)+'">'+e+"</a>":e}}),o=$("#swh-origin-save-accepted-requests").DataTable({serverSide:!0,ajax:Urls.browse_origin_save_requests_list("accepted"),searchDelay:1e3,columns:e,scrollY:"50vh",scrollCollapse:!0,order:[[0,"desc"]]}),d("#swh-origin-save-accepted-requests"),$("#swh-origin-save-requests-nav-item").on("shown.bs.tab",function(){a.draw()}),$("#swh-origin-save-url-filters-nav-item").on("shown.bs.tab",function(){n.draw()}),$("#swh-authorized-origins-tab").on("shown.bs.tab",function(){n.draw()}),$("#swh-unauthorized-origins-tab").on("shown.bs.tab",function(){i.draw()}),$("#swh-save-requests-pending-tab").on("shown.bs.tab",function(){a.draw()}),$("#swh-save-requests-accepted-tab").on("shown.bs.tab",function(){o.draw()}),$("#swh-save-requests-rejected-tab").on("shown.bs.tab",function(){s.draw()}),$("#swh-save-requests-pending-tab").click(function(){a.ajax.reload(null,!1)}),$("#swh-save-requests-accepted-tab").click(function(){o.ajax.reload(null,!1)}),$("#swh-save-requests-rejected-tab").click(function(){s.ajax.reload(null,!1)})})}function l(){var e=$("#swh-authorized-url-prefix").val(),t=Urls.admin_origin_save_add_authorized_url(e);Object(u.a)(t).then(u.b).then(function(){n.row.add({url:e}).draw()}).catch(function(e){swh.webapp.showModalMessage("Duplicated origin url prefix","The provided origin url prefix is already registered in the authorized list.")})}function f(){var e=$("#swh-authorized-origin-urls tr.selected").text();if(e){var t=Urls.admin_origin_save_remove_authorized_url(e);Object(u.a)(t).then(u.b).then(function(){n.row(".selected").remove().draw()}).catch(function(){})}}function h(){var e=$("#swh-unauthorized-url-prefix").val(),t=Urls.admin_origin_save_add_unauthorized_url(e);Object(u.a)(t).then(u.b).then(function(){i.row.add({url:e}).draw()}).catch(function(){swh.webapp.showModalMessage("Duplicated origin url prefix","The provided origin url prefix is already registered in the unauthorized list.")})}function v(){var e=$("#swh-unauthorized-origin-urls tr.selected").text();if(e){var t=Urls.admin_origin_save_remove_unauthorized_url(e);Object(u.a)(t).then(u.b).then(function(){i.row(".selected").remove().draw()}).catch(function(){})}}function w(){var e=a.row(".selected");if(e.length){swh.webapp.showModalConfirm("Accept origin save request ?","Are you sure to accept this origin save request ?",function(){var t=e.data(),r=Urls.admin_origin_save_request_accept(t.origin_type,t.origin_url);Object(u.a)(r).then(function(){a.ajax.reload(null,!1)})})}}function g(){var e=a.row(".selected");if(e.length){swh.webapp.showModalConfirm("Reject origin save request ?","Are you sure to reject this origin save request ?",function(){var t=e.data(),r=Urls.admin_origin_save_request_reject(t.origin_type,t.origin_url);Object(u.a)(r).then(function(){a.ajax.reload(null,!1)})})}}function p(e){var t=e.row(".selected");if(t.length){var r=t.data().id;swh.webapp.showModalConfirm("Remove origin save request ?","Are you sure to remove this origin save request ?",function(){var t=Urls.admin_origin_save_request_remove(r);Object(u.a)(t).then(function(){e.ajax.reload(null,!1)})})}}function _(){p(a)}function b(){p(o)}function m(){p(s)}},63:function(e,t,r){e.exports=r(157)},759:function(e,t,r){e.exports=r(760)},760:function(e,t,r){"use strict";r.r(t);var n=r(474);r.d(t,"initDepositAdmin",function(){return n.a});var i=r(475);r.d(t,"initOriginSaveAdmin",function(){return i.d}),r.d(t,"addAuthorizedOriginUrl",function(){return i.b}),r.d(t,"removeAuthorizedOriginUrl",function(){return i.g}),r.d(t,"addUnauthorizedOriginUrl",function(){return i.c}),r.d(t,"removeUnauthorizedOriginUrl",function(){return i.j}),r.d(t,"acceptOriginSaveRequest",function(){return i.a}),r.d(t,"rejectOriginSaveRequest",function(){return i.e}),r.d(t,"removePendingOriginSaveRequest",function(){return i.h}),r.d(t,"removeAcceptedOriginSaveRequest",function(){return i.f}),r.d(t,"removeRejectedOriginSaveRequest",function(){return i.i})}})});
//# sourceMappingURL=admin.6b66a1ff596bfb1b595b.js.map