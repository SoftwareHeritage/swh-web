!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.browse=e():(t.swh=t.swh||{},t.swh.browse=e())}(window,function(){return function(t){var e={};function n(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/static/",n(n.s=467)}({205:function(t,e,n){"use strict";n.r(e);n(466),n(464),n(462),n(460);function s(t){function e(){$(".swh-releases-switch").parent().removeClass("active"),$(".swh-branches-switch").parent().addClass("active"),$("#swh-tab-releases").removeClass("active"),$("#swh-tab-branches").addClass("active")}function n(){$(".swh-branches-switch").parent().removeClass("active"),$(".swh-releases-switch").parent().addClass("active"),$("#swh-tab-branches").removeClass("active"),$("#swh-tab-releases").addClass("active")}$(document).ready(function(){$(".dropdown-menu a.swh-branches-switch").click(function(t){e(),t.stopPropagation()}),$(".dropdown-menu a.swh-releases-switch").click(function(t){n(),t.stopPropagation()});var s=!1;$("#swh-branches-releases-dd").on("show.bs.dropdown",function(){if(!s){var t=$(".swh-branches-releases").width();$(".swh-branches-releases").width(t+25),s=!0}}),t&&(t.branch?e():n())})}function r(t,e,n){var s=t[e];t[e]=t[n],t[n]=s}var o=n(35),i=void 0,a=15,u=10*a,c=0,l=null,h=!1;function f(){setTimeout(function(){$("#origin-search-results tbody tr").removeAttr("style")})}function d(t,e){var n=e%u;if(t.length>0){$("#swh-origin-search-results").show(),$("#swh-no-origins-found").hide(),$("#origin-search-results tbody tr").remove();for(var s=$("#origin-search-results tbody"),r=function(e){var n=t[e],r="<tr>";r+='<td style="width: 100px;">'+n.type+"</td>";var o=Urls.browse_origin(n.type,n.url);r+='<td style="white-space: nowrap;"><a href="'+o+'">'+o+"</a></td>",r+='<td id="visit-status-origin-'+n.id+'"><i title="Checking visit status" class="fa fa-refresh fa-spin"></i></td>',r+="</tr>",s.append(r);var i=Urls.browse_origin_latest_snapshot(n.id);fetch(i).then(function(t){return t.json()}).then(function(t){var e=n.id;$("#visit-status-origin-"+e).children().remove(),t?$("#visit-status-origin-"+e).append('<i title="Origin has at least one full visit by Software Heritage" class="fa fa-check"></i>'):$("#visit-status-origin-"+e).append('<i title="Origin has not yet been visited by Software Heritage or does not have at least one full visit" class="fa fa-times"></i>')})},o=n;o<n+a&&o<t.length;++o)r(o);f()}else $("#swh-origin-search-results").hide(),$("#swh-no-origins-found").show();t.length-n<a||t.length<u&&n+a===t.length?$("#origins-next-results-button").addClass("disabled"):$("#origins-next-results-button").removeClass("disabled"),e>0?$("#origins-prev-results-button").removeClass("disabled"):$("#origins-prev-results-button").addClass("disabled"),h=!1,setTimeout(function(){window.scrollTo(0,0)})}function w(t,e,n,s){i=t;var a=[];!function t(e,n,s){if(1===(s=s||e.length))n(e);else for(var o=1;o<=s;o+=1)t(e,n,s-1),r(e,(s%2?1:o)-1,s-1)}(t.trim().replace(/\s+/g," ").split(" "),function(t){return a.push(t.join(".*"))});var u=a.join("|"),c=Urls.browse_origin_search(u)+"?limit="+e+"&offset="+n+"&regexp=true";$(".swh-loading").addClass("show"),fetch(c).then(o.a).then(function(t){return t.json()}).then(function(e){l=e,"undefined"!=typeof Storage&&(sessionStorage.setItem("last-swh-origin-url-patterns",t),sessionStorage.setItem("last-swh-origin-search-results",JSON.stringify(e)),sessionStorage.setItem("last-swh-origin-search-offset",s)),$(".swh-loading").removeClass("show"),d(e,s)}).catch(function(){$(".swh-loading").removeClass("show"),h=!1})}function g(){$(document).ready(function(){if("undefined"!=typeof Storage){i=sessionStorage.getItem("last-swh-origin-url-patterns");var t=sessionStorage.getItem("last-swh-origin-search-results");c=sessionStorage.getItem("last-swh-origin-search-offset"),t&&($("#origins-url-patterns").val(i),c=parseInt(c),d(JSON.parse(t),c))}$("#search_origins").submit(function(t){var e=$("#origins-url-patterns").val();h=!0,w(e,u,c=0,c),t.preventDefault()}),$("#origins-next-results-button").click(function(t){$("#origins-next-results-button").hasClass("disabled")||h||(h=!0,c+=a,l&&c%u!=0?d(l,c):w(i,u,c,c),t.preventDefault())}),$("#origins-prev-results-button").click(function(t){$("#origins-prev-results-button").hasClass("disabled")||h||(h=!0,c-=a,!l||c>0&&(c+a)%u==0?w(i,u,c+a-u,c):d(l,c),t.preventDefault())}),$(document).on("shown.bs.tab",'a[data-toggle="tab"]',function(t){"Search"===t.currentTarget.text.trim()&&f()})})}var p=["#browse","#search","#help","#vault"];function v(){history.replaceState("",document.title,window.location.pathname+window.location.search)}function b(t){$('.navbar-nav.swh-browse-nav a[href="'+t+'"]').tab("show"),window.scrollTo(0,0)}function m(){var t=window.location.hash;t&&-1===p.indexOf(t)||b(t||"#browse")}function y(){$(document).ready(function(){$(".dropdown-submenu a.dropdown-link").on("click",function(t){$(t.target).next("ul").toggle(),t.stopPropagation(),t.preventDefault()}),$(".navbar-nav.swh-browse-nav a").on("shown.bs.tab",function(t){if("#browse"!==t.target.hash.trim())window.location.hash=t.target.hash;else{var e=window.location.hash;-1!==p.indexOf(e)&&v()}m()}),$(window).on("hashchange",function(){m()}),m()})}n.d(e,"initSnapshotNavigation",function(){return s}),n.d(e,"initOriginSearch",function(){return g}),n.d(e,"browseTabsHash",function(){return p}),n.d(e,"removeHash",function(){return v}),n.d(e,"showTab",function(){return b}),n.d(e,"showRequestedTab",function(){return m}),n.d(e,"initMainNavigation",function(){return y})},35:function(t,e,n){"use strict";function s(t){if(!t.ok)throw Error(t.statusText);return t}function r(t){for(var e=0;e<t.length;++e)if(!t[e].ok)throw Error(t[e].statusText);return t}function o(t){return"/static/"+t}n.d(e,"a",function(){return s}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return o})},460:function(t,e,n){},462:function(t,e,n){},464:function(t,e,n){},466:function(t,e,n){},467:function(t,e,n){t.exports=n(205)}})});
//# browse.js.map