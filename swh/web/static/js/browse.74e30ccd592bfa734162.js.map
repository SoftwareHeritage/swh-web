{"version":3,"sources":["webpack://swh.[name]/webpack/universalModuleDefinition","webpack://swh.[name]/webpack/bootstrap","webpack://swh.[name]/./swh/web/assets/src/bundles/browse/snapshot-navigation.js","webpack://swh.[name]/./swh/web/assets/src/utils/heaps-permute.js","webpack://swh.[name]/./swh/web/assets/src/bundles/browse/origin-search.js","webpack://swh.[name]/./swh/web/assets/src/bundles/browse/browse-utils.js","webpack://swh.[name]/./swh/web/assets/src/bundles/browse/index.js","webpack://swh.[name]/./swh/web/assets/src/utils/functions.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","initSnapshotNavigation","snapshotContext","branch","setBranchesTabActive","$","removeClass","addClass","setReleasesTabActive","document","ready","click","e","stopPropagation","dropdownResized","on","dropdownWidth","width","swap","array","pos1","pos2","temp","originPatterns","perPage","origin_search_limit","origin_search_offset","currentData","inSearch","fixTableRowsStyle","setTimeout","removeAttr","clearOriginSearchResultsTable","remove","populateOriginSearchResultsTable","data","offset","localOffset","length","show","hide","table","_loop","elem","tableRow","type","browseUrl","Urls","browse_origin","url","id","append","latestSnapshotUrl","browse_origin_latest_snapshot","fetch","credentials","then","response","json","originId","children","scrollTo","searchOrigins","patterns","limit","searchOffset","patternsPermut","heapsPermute","output","trim","replace","split","push","join","regex","searchUrl","browse_origin_search","functions","Storage","sessionStorage","setItem","JSON","stringify","catch","initOriginSearch","getItem","val","parseInt","parse","submit","event","preventDefault","hasClass","currentTarget","text","initBrowse","page","target","next","toggle","css","focus","blur","position","left","top","detach","bcOffsetLeft","bcOffsetTop","popover","boundary","container","html","template","content","this","attr","title","parents","lastBrowsePage","location","onunload","__webpack_exports__","handleFetchError","ok","Error","statusText","handleFetchErrors","responses","staticAsset","asset"],"mappings":"CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,IACA,mBAAAG,eAAAC,IACAD,UAAAH,GACA,iBAAAC,QACAA,QAAA,OAAAD,KAEAD,EAAA,IAAAA,EAAA,QAAiCA,EAAA,WAAAC,KARjC,CASCK,OAAA,WACD,mBCTA,IAAAC,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAP,QAGA,IAAAC,EAAAI,EAAAE,IACAC,EAAAD,EACAE,GAAA,EACAT,YAUA,OANAU,EAAAH,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAQ,GAAA,EAGAR,EAAAD,QA2CA,OAtCAM,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAd,EAAAe,EAAAC,GACAV,EAAAW,EAAAjB,EAAAe,IACAG,OAAAC,eAAAnB,EAAAe,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAV,EAAAiB,EAAA,SAAAvB,GACAkB,OAAAC,eAAAnB,EAAA,cAAiDwB,OAAA,KAIjDlB,EAAAmB,EAAA,SAAAxB,GACA,IAAAe,EAAAf,KAAAyB,WACA,WAA2B,OAAAzB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAK,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAU,EAAAC,GAAsD,OAAAV,OAAAW,UAAAC,eAAAnB,KAAAgB,EAAAC,IAGtDtB,EAAAyB,EAAA,WAIAzB,IAAA0B,EAAA,2EC5DO,SAASC,EAAuBC,EAAiBC,GAEtD,SAASC,IACPC,EAAE,wBAAwBC,YAAY,UACtCD,EAAE,wBAAwBE,SAAS,UACnCF,EAAE,qBAAqBC,YAAY,UACnCD,EAAE,qBAAqBE,SAAS,UAGlC,SAASC,IACPH,EAAE,wBAAwBC,YAAY,UACtCD,EAAE,wBAAwBE,SAAS,UACnCF,EAAE,qBAAqBC,YAAY,UACnCD,EAAE,qBAAqBE,SAAS,UAGlCF,EAAEI,UAAUC,MAAM,WAChBL,EAAE,wCAAwCM,MAAM,SAAAC,GAC9CR,IACAQ,EAAEC,oBAGJR,EAAE,wCAAwCM,MAAM,SAAAC,GAC9CJ,IACAI,EAAEC,oBAGJ,IAAIC,GAAkB,EAItBT,EAAE,6BAA6BU,GAAG,mBAAoB,WACpD,IAAID,EAAJ,CACA,IAAIE,EAAgBX,EAAE,0BAA0BY,QAChDZ,EAAE,0BAA0BY,MAAMD,EAAgB,IAClDF,GAAkB,KAGhBZ,IACEC,EACFC,IAEAI,OCxCR,SAASU,EAAKC,EAAOC,EAAMC,GACzB,IAAIC,EAAOH,EAAMC,GACjBD,EAAMC,GAAQD,EAAME,GACpBF,EAAME,GAAQC,cCFZC,SACAC,EAAU,GACVC,EAAkB,GAAVD,EACRE,EAAS,EACTC,EAAc,KACdC,GAAW,EAEf,SAASC,IACPC,WAAW,WACTzB,EAAE,mCAAmC0B,WAAW,WAIpD,SAASC,IACP3B,EAAE,mCAAmC4B,SAGvC,SAASC,EAAiCC,EAAMC,GAC9C,IAAIC,EAAcD,EAASX,EAC3B,GAAIU,EAAKG,OAAS,EAAG,CACnBjC,EAAE,8BAA8BkC,OAChClC,EAAE,yBAAyBmC,OAC3BR,IAEA,IADA,IAAIS,EAAQpC,EAAE,gCAJKqC,EAAA,SAKVlE,GACP,IAAImE,EAAOR,EAAK3D,GACZoE,EAAW,OACfA,GAAY,6BAA+BD,EAAKE,KAAO,QACvD,IAAIC,EAAYC,KAAKC,cAAcL,EAAKE,KAAMF,EAAKM,KACnDL,GAAY,6CAA+CE,EAAY,KAAOA,EAAY,YAC1FF,GAAY,+BAAiCD,EAAKO,GAAK,6EACvDN,GAAY,QACZH,EAAMU,OAAOP,GAEb,IAAIQ,EAAoBL,KAAKM,8BAA8BV,EAAKO,IAChEI,MAAMF,GAAoBG,YAAa,gBACpCC,KAAK,SAAAC,GAAA,OAAYA,EAASC,SAC1BF,KAAK,SAAArB,GACJ,IAAIwB,EAAWhB,EAAKO,GACpB7C,EAAE,wBAA0BsD,GAAUC,WAAW3B,SAC7CE,EACF9B,EAAE,wBAA0BsD,GAAUR,OAAO,+FAE7C9C,EAAE,wBAA0BsD,GAAUR,OAAO,wIAnB5C3E,EAAI6D,EAAa7D,EAAI6D,EAAcb,GAAWhD,EAAI2D,EAAKG,SAAU9D,EAAGkE,EAApElE,GAuBTqD,SAEAxB,EAAE,8BAA8BmC,OAChCnC,EAAE,yBAAyBkC,OAEzBJ,EAAKG,OAASD,EAAcb,GAC3BW,EAAKG,OAASb,GAAUY,EAAcb,IAAaW,EAAKG,OAC3DjC,EAAE,gCAAgCE,SAAS,YAE3CF,EAAE,gCAAgCC,YAAY,YAE5C8B,EAAS,EACX/B,EAAE,gCAAgCC,YAAY,YAE9CD,EAAE,gCAAgCE,SAAS,YAE7CqB,GAAW,EACXE,WAAW,WACT1D,OAAOyF,SAAS,EAAG,KAIvB,SAASC,EAAcC,EAAUC,EAAOC,EAAc7B,GACpDb,EAAiBwC,EACjB,IACIG,MDnEC,SAASC,EAAahD,EAAOiD,EAAQ3E,GAE1C,GAAU,KADVA,EAAIA,GAAK0B,EAAMmB,QAEb8B,EAAOjD,QAEP,IAAK,IAAI3C,EAAI,EAAGA,GAAKiB,EAAGjB,GAAK,EAC3B2F,EAAahD,EAAOiD,EAAQ3E,EAAI,GAOhCyB,EAAKC,GALD1B,EAAI,EACF,EAEAjB,GAEU,EAAGiB,EAAI,GCuD3B0E,CAFoBJ,EAASM,OAAOC,QAAQ,OAAQ,KAAKC,MAAM,KAEnC,SAAAxE,GAAA,OAAKmE,EAAeM,KAAKzE,EAAE0E,KAAK,SAC5D,IAAIC,EAAQR,EAAeO,KAAK,KAC5BE,EAAY5B,KAAK6B,qBAAqBF,GAA1B,UAA6CV,EAA7C,WAA6DC,EAA7D,eAEhB5D,EAAE,gBAAgBE,SAAS,QAC3B+C,MAAMqB,GAAYpB,YAAa,gBAC5BC,KAAKqB,EAAA,GACLrB,KAAK,SAAAC,GAAA,OAAYA,EAASC,SAC1BF,KAAK,SAAArB,GACJR,EAAcQ,EACS,oBAAZ2C,UACTC,eAAeC,QAAQ,+BAAgCjB,GACvDgB,eAAeC,QAAQ,iCAAkCC,KAAKC,UAAU/C,IACxE4C,eAAeC,QAAQ,gCAAiC5C,IAE1D/B,EAAE,gBAAgBC,YAAY,QAC9B4B,EAAiCC,EAAMC,KAExC+C,MAAM,WACL9E,EAAE,gBAAgBC,YAAY,QAC9BsB,GAAW,IAIV,SAASwD,IACd/E,EAAEI,UAAUC,MAAM,WAChB,GAAuB,oBAAZoE,QAAyB,CAClCvD,EAAiBwD,eAAeM,QAAQ,gCACxC,IAAIlD,EAAO4C,eAAeM,QAAQ,kCAClC3D,EAASqD,eAAeM,QAAQ,iCAC5BlD,IACF9B,EAAE,yBAAyBiF,IAAI/D,GAC/BG,EAAS6D,SAAS7D,GAClBQ,EAAiC+C,KAAKO,MAAMrD,GAAOT,IAIvDrB,EAAE,mBAAmBoF,OAAO,SAAAC,GAC1B,IAAI3B,EAAW1D,EAAE,yBAAyBiF,MAC1C5D,EAAS,EACTE,GAAW,EACXI,IACA8B,EAAcC,EAAUtC,EAAOC,EAAQA,GACvCgE,EAAMC,mBAGRtF,EAAE,gCAAgCM,MAAM,SAAA+E,GAClCrF,EAAE,gCAAgCuF,SAAS,aAAehE,IAG9DA,GAAW,EACXF,GAAUF,EACLG,GAAeD,EAASD,GAAU,EAGrCS,EAAiCP,EAAaD,GAF9CoC,EAAcvC,EAAgBE,EAAOC,EAAQA,GAI/CgE,EAAMC,oBAGRtF,EAAE,gCAAgCM,MAAM,SAAA+E,GAClCrF,EAAE,gCAAgCuF,SAAS,aAAehE,IAG9DA,GAAW,EACXF,GAAUF,GACLG,GAAgBD,EAAS,IAAMA,EAASF,GAAWC,GAAU,EAChEqC,EAAcvC,EAAgBE,EAAQC,EAASF,EAAWC,EAAOC,GAEjEQ,EAAiCP,EAAaD,GAEhDgE,EAAMC,oBAGRtF,EAAEI,UAAUM,GAAG,eAAgB,uBAAwB,SAAAH,GACjB,WAAhCA,EAAEiF,cAAcC,KAAKzB,QACvBxC,QCxJD,SAASkE,EAAWC,GAEzB3F,EAAEI,UAAUC,MAAM,WAEhBL,EAAE,qCAAqCU,GAAG,QAAS,SAAAH,GACjDP,EAAEO,EAAEqF,QAAQC,KAAK,OAAOC,SACuB,SAA3C9F,EAAEO,EAAEqF,QAAQC,KAAK,OAAOE,IAAI,WAC9B/F,EAAEO,EAAEqF,QAAQI,QAEZhG,EAAEO,EAAEqF,QAAQK,OAEd1F,EAAEC,kBACFD,EAAE+E,mBAKJtF,EAAE,6BAA6BU,GAAG,oBAAqB,WACrDV,EAAE,QAAQ8C,OAAO9C,EAAE,6BAA6B+F,KAC9CG,SAAU,WACVC,KAAMnG,EAAE,6BAA6B+B,SAASoE,KAC9CC,IAAKpG,EAAE,6BAA6B+B,SAASqE,MAC5CC,UAEH,IAAIC,EAAetG,EAAE,6BAA6B+B,SAASoE,KACzDnG,EAAE,6BAA6BY,QAC7B2F,EAAcvG,EAAE,4BAA4B+B,SAASqE,IACzDpG,EAAE,4BAA4B+F,IAAI,WAAY,YAC9C/F,EAAE,4BAA4B+B,QAAQoE,KAAQG,EAAcF,IAAOG,MAGrEvG,EAAE,yBAAyBwG,SACzBC,SAAU,WACVC,UAAW,OACXC,MAAM,EACNC,8OAKAC,QAAS,WACP,IAAIA,EAAU7G,EAAE8G,MAAMC,KAAK,wBAC3B,OAAO/G,EAAE6G,GAAStD,SAAS,iBAAiBoD,QAE9CK,MAAO,WACL,IAAIA,EAAQhH,EAAE8G,MAAMC,KAAK,wBACzB,OAAO/G,EAAEgH,GAAOzD,SAAS,oBAAoBoD,QAE/C5E,OAAQ,SAGV/B,EAAE,mCAAmCU,GAAG,QAAS,SAAAH,GAC/CP,EAAE,yBAAyBwG,QAAQ,UAGrCxG,EAAE,yBAAyBU,GAAG,kBAAmB,WAC/CV,EAAE,kCAAkCmC,SAGtCnC,EAAE,yBAAyBU,GAAG,mBAAoB,WAChDV,EAAE,kCAAkCmC,OACpCnC,EAAE,yBAAyBwG,QAAQ,UAGrCxG,EAAE,QAAQU,GAAG,QAAS,SAAAH,GAChBP,EAAEO,EAAEqF,QAAQqB,QAAQ,iBAAiBhF,QACvC1B,EAAEC,oBAINR,aAAa2F,EAAb,SAA0BzF,SAAS,UACnCF,aAAa2F,EAAb,SAA0BzF,SAAS,UAEnCF,uBAAuBM,MAAM,SAAA+E,GAC3B,IAAI6B,EAAiBxC,eAAeM,QAAQ,oBACxCkC,IACF7B,EAAMC,iBACNvH,OAAOoJ,SAAWD,KAItBnJ,OAAOqJ,SAAW,WACH,SAATzB,GACFjB,eAAeC,QAAQ,mBAAoB5G,OAAOoJ,iHC1F1DlJ,EAAAQ,EAAA4I,EAAA,+BAAA3B,qCCSO,SAAS4B,EAAiBlE,GAC/B,IAAKA,EAASmE,GACZ,MAAMC,MAAMpE,EAASqE,YAEvB,OAAOrE,EAGF,SAASsE,EAAkBC,GAChC,IAAK,IAAIxJ,EAAI,EAAGA,EAAIwJ,EAAU1F,SAAU9D,EACtC,IAAKwJ,EAAUxJ,GAAGoJ,GAChB,MAAMC,MAAMG,EAAUxJ,GAAGsJ,YAG7B,OAAOE,EAGF,SAASC,EAAYC,GAC1B,MAAU,WAAaA,kEA1BzB5J,EAAAQ,EAAA4I,EAAA,sBAAAO","file":"js/browse.74e30ccd592bfa734162.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"browse\"] = factory();\n\telse\n\t\troot[\"swh\"] = root[\"swh\"] || {}, root[\"swh\"][\"browse\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 469);\n","/**\n * Copyright (C) 2018  The Software Heritage developers\n * See the AUTHORS file at the top-level directory of this distribution\n * License: GNU Affero General Public License version 3, or any later version\n * See top-level LICENSE file for more information\n */\n\nexport function initSnapshotNavigation(snapshotContext, branch) {\n\n  function setBranchesTabActive() {\n    $('.swh-releases-switch').removeClass('active');\n    $('.swh-branches-switch').addClass('active');\n    $('#swh-tab-releases').removeClass('active');\n    $('#swh-tab-branches').addClass('active');\n  }\n\n  function setReleasesTabActive() {\n    $('.swh-branches-switch').removeClass('active');\n    $('.swh-releases-switch').addClass('active');\n    $('#swh-tab-branches').removeClass('active');\n    $('#swh-tab-releases').addClass('active');\n  }\n\n  $(document).ready(() => {\n    $('.dropdown-menu a.swh-branches-switch').click(e => {\n      setBranchesTabActive();\n      e.stopPropagation();\n    });\n\n    $('.dropdown-menu a.swh-releases-switch').click(e => {\n      setReleasesTabActive();\n      e.stopPropagation();\n    });\n\n    let dropdownResized = false;\n\n    // hack to resize the branches/releases dropdown content,\n    // taking icons into account, in order to make the whole names readable\n    $('#swh-branches-releases-dd').on('show.bs.dropdown', () => {\n      if (dropdownResized) return;\n      let dropdownWidth = $('.swh-branches-releases').width();\n      $('.swh-branches-releases').width(dropdownWidth + 25);\n      dropdownResized = true;\n    });\n\n    if (snapshotContext) {\n      if (branch) {\n        setBranchesTabActive();\n      } else {\n        setReleasesTabActive();\n      }\n    }\n\n  });\n\n}\n","/**\n * Copyright (C) 2018  The Software Heritage developers\n * See the AUTHORS file at the top-level directory of this distribution\n * License: GNU Affero General Public License version 3, or any later version\n * See top-level LICENSE file for more information\n */\n\n// http://dsernst.com/2014/12/14/heaps-permutation-algorithm-in-javascript/\n\nfunction swap(array, pos1, pos2) {\n  let temp = array[pos1];\n  array[pos1] = array[pos2];\n  array[pos2] = temp;\n}\n\nexport function heapsPermute(array, output, n) {\n  n = n || array.length; // set n default to array.length\n  if (n === 1) {\n    output(array);\n  } else {\n    for (let i = 1; i <= n; i += 1) {\n      heapsPermute(array, output, n - 1);\n      let j;\n      if (n % 2) {\n        j = 1;\n      } else {\n        j = i;\n      }\n      swap(array, j - 1, n - 1); // -1 to account for javascript zero-indexing\n    }\n  }\n}\n","/**\n * Copyright (C) 2018  The Software Heritage developers\n * See the AUTHORS file at the top-level directory of this distribution\n * License: GNU Affero General Public License version 3, or any later version\n * See top-level LICENSE file for more information\n */\n\nimport {heapsPermute} from 'utils/heaps-permute';\nimport {handleFetchError} from 'utils/functions';\n\nlet originPatterns;\nlet perPage = 15;\nlet limit = perPage * 10;\nlet offset = 0;\nlet currentData = null;\nlet inSearch = false;\n\nfunction fixTableRowsStyle() {\n  setTimeout(() => {\n    $('#origin-search-results tbody tr').removeAttr('style');\n  });\n}\n\nfunction clearOriginSearchResultsTable() {\n  $('#origin-search-results tbody tr').remove();\n}\n\nfunction populateOriginSearchResultsTable(data, offset) {\n  let localOffset = offset % limit;\n  if (data.length > 0) {\n    $('#swh-origin-search-results').show();\n    $('#swh-no-origins-found').hide();\n    clearOriginSearchResultsTable();\n    let table = $('#origin-search-results tbody');\n    for (let i = localOffset; i < localOffset + perPage && i < data.length; ++i) {\n      let elem = data[i];\n      let tableRow = '<tr>';\n      tableRow += '<td style=\"width: 120px;\">' + elem.type + '</td>';\n      let browseUrl = Urls.browse_origin(elem.type, elem.url);\n      tableRow += '<td style=\"white-space: nowrap;\"><a href=\"' + browseUrl + '\">' + browseUrl + '</a></td>';\n      tableRow += '<td id=\"visit-status-origin-' + elem.id + '\"><i title=\"Checking visit status\" class=\"fa fa-refresh fa-spin\"></i></td>';\n      tableRow += '</tr>';\n      table.append(tableRow);\n      // get async latest visit snapshot and update visit status icon\n      let latestSnapshotUrl = Urls.browse_origin_latest_snapshot(elem.id);\n      fetch(latestSnapshotUrl, {credentials: 'same-origin'})\n        .then(response => response.json())\n        .then(data => {\n          let originId = elem.id;\n          $('#visit-status-origin-' + originId).children().remove();\n          if (data) {\n            $('#visit-status-origin-' + originId).append('<i title=\"Origin has at least one full visit by Software Heritage\" class=\"fa fa-check\"></i>');\n          } else {\n            $('#visit-status-origin-' + originId).append('<i title=\"Origin has not yet been visited by Software Heritage or does not have at least one full visit\" class=\"fa fa-times\"></i>');\n          }\n        });\n    }\n    fixTableRowsStyle();\n  } else {\n    $('#swh-origin-search-results').hide();\n    $('#swh-no-origins-found').show();\n  }\n  if (data.length - localOffset < perPage ||\n      (data.length < limit && (localOffset + perPage) === data.length)) {\n    $('#origins-next-results-button').addClass('disabled');\n  } else {\n    $('#origins-next-results-button').removeClass('disabled');\n  }\n  if (offset > 0) {\n    $('#origins-prev-results-button').removeClass('disabled');\n  } else {\n    $('#origins-prev-results-button').addClass('disabled');\n  }\n  inSearch = false;\n  setTimeout(() => {\n    window.scrollTo(0, 0);\n  });\n}\n\nfunction searchOrigins(patterns, limit, searchOffset, offset) {\n  originPatterns = patterns;\n  let patternsArray = patterns.trim().replace(/\\s+/g, ' ').split(' ');\n  let patternsPermut = [];\n  heapsPermute(patternsArray, p => patternsPermut.push(p.join('.*')));\n  let regex = patternsPermut.join('|');\n  let searchUrl = Urls.browse_origin_search(regex) + `?limit=${limit}&offset=${searchOffset}&regexp=true`;\n\n  $('.swh-loading').addClass('show');\n  fetch(searchUrl, {credentials: 'same-origin'})\n    .then(handleFetchError)\n    .then(response => response.json())\n    .then(data => {\n      currentData = data;\n      if (typeof Storage !== 'undefined') {\n        sessionStorage.setItem('last-swh-origin-url-patterns', patterns);\n        sessionStorage.setItem('last-swh-origin-search-results', JSON.stringify(data));\n        sessionStorage.setItem('last-swh-origin-search-offset', offset);\n      }\n      $('.swh-loading').removeClass('show');\n      populateOriginSearchResultsTable(data, offset);\n    })\n    .catch(() => {\n      $('.swh-loading').removeClass('show');\n      inSearch = false;\n    });\n}\n\nexport function initOriginSearch() {\n  $(document).ready(() => {\n    if (typeof Storage !== 'undefined') {\n      originPatterns = sessionStorage.getItem('last-swh-origin-url-patterns');\n      let data = sessionStorage.getItem('last-swh-origin-search-results');\n      offset = sessionStorage.getItem('last-swh-origin-search-offset');\n      if (data) {\n        $('#origins-url-patterns').val(originPatterns);\n        offset = parseInt(offset);\n        populateOriginSearchResultsTable(JSON.parse(data), offset);\n      }\n    }\n\n    $('#search_origins').submit(event => {\n      let patterns = $('#origins-url-patterns').val();\n      offset = 0;\n      inSearch = true;\n      clearOriginSearchResultsTable();\n      searchOrigins(patterns, limit, offset, offset);\n      event.preventDefault();\n    });\n\n    $('#origins-next-results-button').click(event => {\n      if ($('#origins-next-results-button').hasClass('disabled') || inSearch) {\n        return;\n      }\n      inSearch = true;\n      offset += perPage;\n      if (!currentData || offset % limit === 0) {\n        searchOrigins(originPatterns, limit, offset, offset);\n      } else {\n        populateOriginSearchResultsTable(currentData, offset);\n      }\n      event.preventDefault();\n    });\n\n    $('#origins-prev-results-button').click(event => {\n      if ($('#origins-prev-results-button').hasClass('disabled') || inSearch) {\n        return;\n      }\n      inSearch = true;\n      offset -= perPage;\n      if (!currentData || (offset > 0 && (offset + perPage) % limit === 0)) {\n        searchOrigins(originPatterns, limit, (offset + perPage) - limit, offset);\n      } else {\n        populateOriginSearchResultsTable(currentData, offset);\n      }\n      event.preventDefault();\n    });\n\n    $(document).on('shown.bs.tab', 'a[data-toggle=\"tab\"]', e => {\n      if (e.currentTarget.text.trim() === 'Search') {\n        fixTableRowsStyle();\n      }\n    });\n  });\n}\n","/**\n * Copyright (C) 2018  The Software Heritage developers\n * See the AUTHORS file at the top-level directory of this distribution\n * License: GNU Affero General Public License version 3, or any later version\n * See top-level LICENSE file for more information\n */\n\nexport function initBrowse(page) {\n\n  $(document).ready(() => {\n\n    $('.dropdown-submenu a.dropdown-item').on('click', e => {\n      $(e.target).next('div').toggle();\n      if ($(e.target).next('div').css('display') !== 'none') {\n        $(e.target).focus();\n      } else {\n        $(e.target).blur();\n      }\n      e.stopPropagation();\n      e.preventDefault();\n    });\n\n    // ensure branches/releases dropdowns are reparented to body to avoid\n    // overflow issues\n    $('#swh-branches-releases-dd').on('shown.bs.dropdown', function() {\n      $('body').append($('#swh-branches-releases-dd').css({\n        position: 'absolute',\n        left: $('#swh-branches-releases-dd').offset().left,\n        top: $('#swh-branches-releases-dd').offset().top\n      }).detach());\n      // ensure breadcrumbs stay at the same position\n      let bcOffsetLeft = $('#swh-branches-releases-dd').offset().left +\n        $('#swh-branches-releases-dd').width();\n      let bcOffsetTop = $('.swh-browse-bread-crumbs').offset().top;\n      $('.swh-browse-bread-crumbs').css('position', 'absolute');\n      $('.swh-browse-bread-crumbs').offset({'left': bcOffsetLeft, 'top': bcOffsetTop});\n    });\n\n    $('.swh-metadata-toggler').popover({\n      boundary: 'viewport',\n      container: 'body',\n      html: true,\n      template: `<div class=\"popover\" role=\"tooltip\">\n                   <div class=\"arrow\"></div>\n                   <h3 class=\"popover-header\"></h3>\n                   <div class=\"popover-body swh-metadata\"></div>\n                 </div>`,\n      content: function() {\n        var content = $(this).attr('data-popover-content');\n        return $(content).children('.popover-body').html();\n      },\n      title: function() {\n        var title = $(this).attr('data-popover-content');\n        return $(title).children('.popover-heading').html();\n      },\n      offset: '50vh'\n    });\n\n    $('.swh-vault-menu a.dropdown-item').on('click', e => {\n      $('.swh-metadata-toggler').popover('hide');\n    });\n\n    $('.swh-metadata-toggler').on('show.bs.popover', () => {\n      $('.swh-vault-menu .dropdown-menu').hide();\n    });\n\n    $('.swh-actions-dropdown').on('hide.bs.dropdown', () => {\n      $('.swh-vault-menu .dropdown-menu').hide();\n      $('.swh-metadata-toggler').popover('hide');\n    });\n\n    $('body').on('click', e => {\n      if ($(e.target).parents('.swh-metadata').length) {\n        e.stopPropagation();\n      }\n    });\n\n    $(`.browse-${page}-item`).addClass('active');\n    $(`.browse-${page}-link`).addClass('active');\n\n    $(`.browse-main-link`).click(event => {\n      let lastBrowsePage = sessionStorage.getItem('last-browse-page');\n      if (lastBrowsePage) {\n        event.preventDefault();\n        window.location = lastBrowsePage;\n      }\n    });\n\n    window.onunload = () => {\n      if (page === 'main') {\n        sessionStorage.setItem('last-browse-page', window.location);\n      }\n    };\n\n  });\n\n}\n","/**\n * Copyright (C) 2018  The Software Heritage developers\n * See the AUTHORS file at the top-level directory of this distribution\n * License: GNU Affero General Public License version 3, or any later version\n * See top-level LICENSE file for more information\n */\n\n// main bundle for the swh-web/browse application\n\nimport './browse.css';\nimport './breadcrumbs.css';\nimport './content.css';\nimport './snapshot-navigation.css';\n\nexport * from './snapshot-navigation';\nexport * from './origin-search';\nexport * from './browse-utils';\n","/**\n * Copyright (C) 2018  The Software Heritage developers\n * See the AUTHORS file at the top-level directory of this distribution\n * License: GNU Affero General Public License version 3, or any later version\n * See top-level LICENSE file for more information\n */\n\n// utility functions\n\nexport function handleFetchError(response) {\n  if (!response.ok) {\n    throw Error(response.statusText);\n  }\n  return response;\n}\n\nexport function handleFetchErrors(responses) {\n  for (let i = 0; i < responses.length; ++i) {\n    if (!responses[i].ok) {\n      throw Error(responses[i].statusText);\n    }\n  }\n  return responses;\n}\n\nexport function staticAsset(asset) {\n  return `${__STATIC__}${asset}`;\n}\n"],"sourceRoot":""}