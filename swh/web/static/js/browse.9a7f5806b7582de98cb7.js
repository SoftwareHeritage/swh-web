!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.browse=e():(t.swh=t.swh||{},t.swh.browse=e())}(window,function(){return function(t){var e={};function n(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/static/",n(n.s=474)}({169:function(t,e,n){"use strict";function s(t,e,n){var s=t[e];t[e]=t[n],t[n]=s}var o=n(35);n.d(e,"a",function(){return g});var r=void 0,i=15,a=10*i,u=0,c=null,l=!1;function d(){setTimeout(function(){$("#origin-search-results tbody tr").removeAttr("style")})}function h(){$("#origin-search-results tbody tr").remove()}function f(t,e){var n=e%a;if(t.length>0){$("#swh-origin-search-results").show(),$("#swh-no-origins-found").hide(),h();for(var s=$("#origin-search-results tbody"),o=function(e){var n=t[e],o="<tr>";o+='<td style="width: 120px;">'+n.type+"</td>";var r=Urls.browse_origin(n.type,n.url);o+='<td style="white-space: nowrap;"><a href="'+r+'">'+r+"</a></td>",o+='<td id="visit-status-origin-'+n.id+'"><i title="Checking visit status" class="fa fa-refresh fa-spin"></i></td>',o+="</tr>",s.append(o);var i=Urls.browse_origin_latest_snapshot(n.id);fetch(i,{credentials:"same-origin"}).then(function(t){return t.json()}).then(function(t){var e=n.id;$("#visit-status-origin-"+e).children().remove(),t?$("#visit-status-origin-"+e).append('<i title="Origin has at least one full visit by Software Heritage" class="fa fa-check"></i>'):$("#visit-status-origin-"+e).append('<i title="Origin has not yet been visited by Software Heritage or does not have at least one full visit" class="fa fa-times"></i>')})},r=n;r<n+i&&r<t.length;++r)o(r);d()}else $("#swh-origin-search-results").hide(),$("#swh-no-origins-found").show();t.length-n<i||t.length<a&&n+i===t.length?$("#origins-next-results-button").addClass("disabled"):$("#origins-next-results-button").removeClass("disabled"),e>0?$("#origins-prev-results-button").removeClass("disabled"):$("#origins-prev-results-button").addClass("disabled"),l=!1,setTimeout(function(){window.scrollTo(0,0)})}function p(t,e,n,i){r=t;var a=[];!function t(e,n,o){if(1===(o=o||e.length))n(e);else for(var r=1;r<=o;r+=1)t(e,n,o-1),s(e,(o%2?1:r)-1,o-1)}(t.trim().replace(/\s+/g," ").split(" "),function(t){return a.push(t.join(".*"))});var u=a.join("|"),d=Urls.browse_origin_search(u)+"?limit="+e+"&offset="+n+"&regexp=true";$(".swh-loading").addClass("show"),fetch(d,{credentials:"same-origin"}).then(o.a).then(function(t){return t.json()}).then(function(e){c=e,"undefined"!=typeof Storage&&(sessionStorage.setItem("last-swh-origin-url-patterns",t),sessionStorage.setItem("last-swh-origin-search-results",JSON.stringify(e)),sessionStorage.setItem("last-swh-origin-search-offset",i)),$(".swh-loading").removeClass("show"),f(e,i)}).catch(function(){$(".swh-loading").removeClass("show"),l=!1})}function g(){$(document).ready(function(){if("undefined"!=typeof Storage){r=sessionStorage.getItem("last-swh-origin-url-patterns");var t=sessionStorage.getItem("last-swh-origin-search-results");u=sessionStorage.getItem("last-swh-origin-search-offset"),t&&($("#origins-url-patterns").val(r),u=parseInt(u),f(JSON.parse(t),u))}$("#search_origins").submit(function(t){var e=$("#origins-url-patterns").val();u=0,l=!0,h(),p(e,a,u,u),t.preventDefault()}),$("#origins-next-results-button").click(function(t){$("#origins-next-results-button").hasClass("disabled")||l||(l=!0,u+=i,c&&u%a!=0?f(c,u):p(r,a,u,u),t.preventDefault())}),$("#origins-prev-results-button").click(function(t){$("#origins-prev-results-button").hasClass("disabled")||l||(l=!0,u-=i,!c||u>0&&(u+i)%a==0?p(r,a,u+i-a,u):f(c,u),t.preventDefault())}),$(document).on("shown.bs.tab",'a[data-toggle="tab"]',function(t){"Search"===t.currentTarget.text.trim()&&d()})})}},206:function(t,e){$(document).ready(function(){$(".dropdown-submenu a.dropdown-item").on("click",function(t){$(t.target).next("div").toggle(),"none"!==$(t.target).next("div").css("display")?$(t.target).focus():$(t.target).blur(),t.stopPropagation(),t.preventDefault()}),$(".swh-metadata-toggler").popover({boundary:"viewport",container:"body",html:!0,template:'<div class="popover" role="tooltip">\n                   <div class="arrow"></div>\n                   <h3 class="popover-header"></h3>\n                   <div class="popover-body swh-metadata"></div>\n                 </div>',content:function(){var t=$(this).attr("data-popover-content");return $(t).children(".popover-body").html()},title:function(){var t=$(this).attr("data-popover-content");return $(t).children(".popover-heading").html()},offset:"50vh"}),$(".swh-vault-menu a.dropdown-item").on("click",function(t){$(".swh-metadata-toggler").popover("hide")}),$(".swh-metadata-toggler").on("show.bs.popover",function(){$(".swh-vault-menu .dropdown-menu").hide()}),$(".swh-actions-dropdown").on("hide.bs.dropdown",function(){$(".swh-vault-menu .dropdown-menu").hide(),$(".swh-metadata-toggler").popover("hide")}),$("body").on("click",function(t){$(t.target).parents(".swh-metadata").length&&t.stopPropagation()})})},207:function(t,e,n){"use strict";function s(t,e){function n(){$(".swh-releases-switch").removeClass("active"),$(".swh-branches-switch").addClass("active"),$("#swh-tab-releases").removeClass("active"),$("#swh-tab-branches").addClass("active")}function s(){$(".swh-branches-switch").removeClass("active"),$(".swh-releases-switch").addClass("active"),$("#swh-tab-branches").removeClass("active"),$("#swh-tab-releases").addClass("active")}$(document).ready(function(){$(".dropdown-menu a.swh-branches-switch").click(function(t){n(),t.stopPropagation()}),$(".dropdown-menu a.swh-releases-switch").click(function(t){s(),t.stopPropagation()});var o=!1;$("#swh-branches-releases-dd").on("show.bs.dropdown",function(){if(!o){var t=$(".swh-branches-releases").width();$(".swh-branches-releases").width(t+25),o=!0}}),t&&(e?n():s())})}n.d(e,"a",function(){return s})},35:function(t,e,n){"use strict";function s(t){if(!t.ok)throw Error(t.statusText);return t}function o(t){for(var e=0;e<t.length;++e)if(!t[e].ok)throw Error(t[e].statusText);return t}function r(t){return"/static/"+t}n.d(e,"a",function(){return s}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return r})},466:function(t,e,n){},468:function(t,e,n){},470:function(t,e,n){},472:function(t,e,n){},473:function(t,e,n){"use strict";n.r(e);n(472),n(470),n(468),n(466);var s=n(207);n.d(e,"initSnapshotNavigation",function(){return s.a});var o=n(169);n.d(e,"initOriginSearch",function(){return o.a});var r=n(206);for(var i in r)["initSnapshotNavigation","initOriginSearch","default"].indexOf(i)<0&&function(t){n.d(e,t,function(){return r[t]})}(i)},474:function(t,e,n){t.exports=n(473)}})});
//# browse.9a7f5806b7582de98cb7.js.map