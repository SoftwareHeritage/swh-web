!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.admin=n():(e.swh=e.swh||{},e.swh.admin=n())}(window,function(){return function(e){function n(n){for(var t,o,s=n[0],u=n[1],d=n[2],l=0,f=[];l<s.length;l++)o=s[l],i[o]&&f.push(i[o][0]),i[o]=0;for(t in u)Object.prototype.hasOwnProperty.call(u,t)&&(e[t]=u[t]);for(c&&c(n);f.length;)f.shift()();return a.push.apply(a,d||[]),r()}function r(){for(var e,n=0;n<a.length;n++){for(var r=a[n],t=!0,s=1;s<r.length;s++){var u=r[s];0!==i[u]&&(t=!1)}t&&(a.splice(n--,1),e=o(o.s=r[0]))}return e}var t={},i={1:0},a=[];function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,n,r){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)o.d(r,t,function(n){return e[n]}.bind(null,t));return r},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="/static/";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=n,s=s.slice();for(var d=0;d<s.length;d++)n(s[d]);var c=u;return a.push([756,0]),r()}({153:function(e,n,r){var t=r(16),i=t.JSON||(t.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},473:function(e,n,r){"use strict";r.d(n,"a",function(){return o});var t=r(58),i=r.n(t);function a(e,n){if("display"===n&&(e&&e.startsWith("swh")))return'<a href="'+Urls.browse_swh_id(e)+'">'+e+"</a>";return e}function o(){var e;$(document).ready(function(){$.fn.dataTable.ext.errMode="none",(e=$("#swh-admin-deposit-list").on("error.dt",function(e,n,r,t){$("#swh-admin-deposit-list-error").text(t)}).DataTable({serverSide:!0,ajax:Urls.admin_deposit_list(),columns:[{data:"id",name:"id"},{data:"swh_id_context",name:"swh_id_context",render:function(e,n,r){if(e&&"display"===n){var t=e.indexOf(";origin=");if(-1!==t){var i=e.slice(t+";origin=".length);return'<a href="'+i+'">'+i+"</a>"}}return e}},{data:"reception_date",name:"reception_date",render:function(e,n,r){return"display"===n?new Date(e).toLocaleString():e}},{data:"status",name:"status"},{data:"status_detail",name:"status_detail",render:function(e,n,r){if("display"===n&&e){var t=e;return"object"==typeof e&&(t=i()(e,null,4)),'<div style="width: 200px; white-space: pre; overflow-x: auto;">'+t+"</div>"}return e},orderable:!1,visible:!1},{data:"swh_anchor_id",name:"swh_anchor_id",render:function(e,n,r){return a(e,n)},orderable:!1},{data:"swh_anchor_id_context",name:"swh_anchor_id_context",render:function(e,n,r){return a(e,n)},orderable:!1,visible:!1},{data:"swh_id",name:"swh_id",render:function(e,n,r){return a(e,n)},orderable:!1,visible:!1},{data:"swh_id_context",name:"swh_id_context",render:function(e,n,r){return a(e,n)},orderable:!1,visible:!1}],scrollX:!0,scrollY:"50vh",scrollCollapse:!0,order:[[0,"desc"]]})).draw()}),$("a.toggle-col").on("click",function(n){n.preventDefault();var r=e.column($(this).attr("data-column"));r.visible(!r.visible()),r.visible()?$(this).removeClass("col-hidden"):$(this).addClass("col-hidden")})}},474:function(e,n,r){"use strict";r.d(n,"d",function(){return c}),r.d(n,"b",function(){return l}),r.d(n,"g",function(){return f}),r.d(n,"c",function(){return h}),r.d(n,"j",function(){return v}),r.d(n,"a",function(){return p}),r.d(n,"e",function(){return w}),r.d(n,"h",function(){return _}),r.d(n,"f",function(){return b}),r.d(n,"i",function(){return m});var t,i,a,o,s,u=r(9);function d(e){$(e+" tbody").on("click","tr",function(){$(this).hasClass("selected")?$(this).removeClass("selected"):($(e+" tr.selected").removeClass("selected"),$(this).addClass("selected"))})}function c(){$(document).ready(function(){$.fn.dataTable.ext.errMode="throw",t=$("#swh-authorized-origin-urls").DataTable({serverSide:!0,ajax:Urls.admin_origin_save_authorized_urls_list(),columns:[{data:"url",name:"url"}],scrollY:"50vh",scrollCollapse:!0,info:!1}),d("#swh-authorized-origin-urls"),i=$("#swh-unauthorized-origin-urls").DataTable({serverSide:!0,ajax:Urls.admin_origin_save_unauthorized_urls_list(),columns:[{data:"url",name:"url"}],scrollY:"50vh",scrollCollapse:!0,info:!1}),d("#swh-unauthorized-origin-urls");var e=[{data:"id",name:"id",visible:!1,searchable:!1},{data:"save_request_date",name:"request_date",render:function(e,n,r){return"display"===n?new Date(e).toLocaleString():e}},{data:"origin_type",name:"origin_type"},{data:"origin_url",name:"origin_url",render:function(e,n,r){if("display"===n){var t=$.fn.dataTable.render.text().display(e);return'<a href="'+t+'">'+t+"</a>"}return e}}];a=$("#swh-origin-save-pending-requests").DataTable({serverSide:!0,ajax:Urls.browse_origin_save_requests_list("pending"),searchDelay:1e3,columns:e,scrollY:"50vh",scrollCollapse:!0,order:[[0,"desc"]],responsive:{details:{type:"none"}}}),d("#swh-origin-save-pending-requests"),s=$("#swh-origin-save-rejected-requests").DataTable({serverSide:!0,ajax:Urls.browse_origin_save_requests_list("rejected"),searchDelay:1e3,columns:e,scrollY:"50vh",scrollCollapse:!0,order:[[0,"desc"]],responsive:{details:{type:"none"}}}),d("#swh-origin-save-rejected-requests"),e.push({data:"save_task_status",name:"save_task_status",render:function(e,n,r){return"succeed"===e?'<a href="'+Urls.browse_origin(r.origin_url)+'">'+e+"</a>":e}}),o=$("#swh-origin-save-accepted-requests").DataTable({serverSide:!0,ajax:Urls.browse_origin_save_requests_list("accepted"),searchDelay:1e3,columns:e,scrollY:"50vh",scrollCollapse:!0,order:[[0,"desc"]],responsive:{details:{type:"none"}}}),d("#swh-origin-save-accepted-requests"),$("#swh-origin-save-requests-nav-item").on("shown.bs.tab",function(){a.draw()}),$("#swh-origin-save-url-filters-nav-item").on("shown.bs.tab",function(){t.draw()}),$("#swh-authorized-origins-tab").on("shown.bs.tab",function(){t.draw()}),$("#swh-unauthorized-origins-tab").on("shown.bs.tab",function(){i.draw()}),$("#swh-save-requests-pending-tab").on("shown.bs.tab",function(){a.draw()}),$("#swh-save-requests-accepted-tab").on("shown.bs.tab",function(){o.draw()}),$("#swh-save-requests-rejected-tab").on("shown.bs.tab",function(){s.draw()}),$("#swh-save-requests-pending-tab").click(function(){a.ajax.reload(null,!1)}),$("#swh-save-requests-accepted-tab").click(function(){o.ajax.reload(null,!1)}),$("#swh-save-requests-rejected-tab").click(function(){s.ajax.reload(null,!1)})})}function l(){var e=$("#swh-authorized-url-prefix").val(),n=Urls.admin_origin_save_add_authorized_url(e);Object(u.a)(n).then(u.b).then(function(){t.row.add({url:e}).draw()}).catch(function(e){swh.webapp.showModalMessage("Duplicated origin url prefix","The provided origin url prefix is already registered in the authorized list.")})}function f(){var e=$("#swh-authorized-origin-urls tr.selected").text();if(e){var n=Urls.admin_origin_save_remove_authorized_url(e);Object(u.a)(n).then(u.b).then(function(){t.row(".selected").remove().draw()}).catch(function(){})}}function h(){var e=$("#swh-unauthorized-url-prefix").val(),n=Urls.admin_origin_save_add_unauthorized_url(e);Object(u.a)(n).then(u.b).then(function(){i.row.add({url:e}).draw()}).catch(function(){swh.webapp.showModalMessage("Duplicated origin url prefix","The provided origin url prefix is already registered in the unauthorized list.")})}function v(){var e=$("#swh-unauthorized-origin-urls tr.selected").text();if(e){var n=Urls.admin_origin_save_remove_unauthorized_url(e);Object(u.a)(n).then(u.b).then(function(){i.row(".selected").remove().draw()}).catch(function(){})}}function p(){var e=a.row(".selected");if(e.length){swh.webapp.showModalConfirm("Accept origin save request ?","Are you sure to accept this origin save request ?",function(){var n=e.data(),r=Urls.admin_origin_save_request_accept(n.origin_type,n.origin_url);Object(u.a)(r).then(function(){a.ajax.reload(null,!1)})})}}function w(){var e=a.row(".selected");if(e.length){swh.webapp.showModalConfirm("Reject origin save request ?","Are you sure to reject this origin save request ?",function(){var n=e.data(),r=Urls.admin_origin_save_request_reject(n.origin_type,n.origin_url);Object(u.a)(r).then(function(){a.ajax.reload(null,!1)})})}}function g(e){var n=e.row(".selected");if(n.length){var r=n.data().id;swh.webapp.showModalConfirm("Remove origin save request ?","Are you sure to remove this origin save request ?",function(){var n=Urls.admin_origin_save_request_remove(r);Object(u.a)(n).then(function(){e.ajax.reload(null,!1)})})}}function _(){g(a)}function b(){g(o)}function m(){g(s)}},58:function(e,n,r){e.exports=r(153)},756:function(e,n,r){e.exports=r(757)},757:function(e,n,r){"use strict";r.r(n);var t=r(473);r.d(n,"initDepositAdmin",function(){return t.a});var i=r(474);r.d(n,"initOriginSaveAdmin",function(){return i.d}),r.d(n,"addAuthorizedOriginUrl",function(){return i.b}),r.d(n,"removeAuthorizedOriginUrl",function(){return i.g}),r.d(n,"addUnauthorizedOriginUrl",function(){return i.c}),r.d(n,"removeUnauthorizedOriginUrl",function(){return i.j}),r.d(n,"acceptOriginSaveRequest",function(){return i.a}),r.d(n,"rejectOriginSaveRequest",function(){return i.e}),r.d(n,"removePendingOriginSaveRequest",function(){return i.h}),r.d(n,"removeAcceptedOriginSaveRequest",function(){return i.f}),r.d(n,"removeRejectedOriginSaveRequest",function(){return i.i})},9:function(e,n,r){"use strict";function t(e){if(!e.ok)throw e;return e}function i(e){for(var n=0;n<e.length;++n)if(!e[n].ok)throw e[n];return e}function a(e){return"/static/"+e}function o(e,n,r){return void 0===n&&(n={}),void 0===r&&(r=null),n["X-CSRFToken"]=Cookies.get("csrftoken"),fetch(e,{credentials:"include",headers:n,method:"POST",body:r})}function s(e,n){return new RegExp("(?:git|https?|git@)(?:\\:\\/\\/)?"+n+"[/|:][A-Za-z0-9-]+?\\/[\\w\\.-]+\\/?(?!=.git)(?:\\.git(?:\\/?|\\#[\\w\\.\\-_]+)?)?$").test(e)}function u(){history.replaceState("",document.title,window.location.pathname+window.location.search)}function d(e,n){var r=window.getSelection();r.removeAllRanges();var t=document.createRange();t.setStart(e,0),"#text"!==n.nodeName?t.setEnd(n,n.childNodes.length):t.setEnd(n,n.textContent.length),r.addRange(t)}r.d(n,"b",function(){return t}),r.d(n,"c",function(){return i}),r.d(n,"g",function(){return a}),r.d(n,"a",function(){return o}),r.d(n,"d",function(){return s}),r.d(n,"e",function(){return u}),r.d(n,"f",function(){return d})}})});
//# sourceMappingURL=admin.d4b94e498e371a04d73b.js.map