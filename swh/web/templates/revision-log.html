{% extends "browse.html" %}

{% load render_bundle from webpack_loader %}

{% block header %}
{{ block.super }}
{% render_bundle 'revision' %}
{% endblock %}

{% block swh-browse-before-panels %}
{% if snapshot_context %}
  {% include "includes/snapshot-context.html" %}
{% endif %}
{% endblock %}

{% block swh-browse-main-panel-content %}
{% if snapshot_context %}
  {% include "includes/top-navigation.html" %}
{% else %}
  <div class="card-header bg-gray-light">
    <div class="card-title float-left">
      <h4>{{ top_panel_text }}</h4>
    </div>
    <div class="clearfix"></div>
  </div>
{% endif %}

<div class="table-responsive">
  <table class="table table-striped">
    <thead>
      <tr>
        <th><i class="octicon octicon-git-commit fa-fw"></i>Revision</th>
        <th>Author</th>
        <th>Message</th>
        <th>Date</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for log in revision_log %}
        <tr class="swh-revision-log-entry">
          <td class="swh-revision-log-entry-id"><i class="octicon octicon-git-commit fa-fw"></i>{{ log.revision }}</td>
          <td class="swh-revision-log-entry-author">{{ log.author }}</td>
          <td class="swh-log-entry-message swh-table-cell-text-overflow" title="{{ log.message }}">{{ log.message }}</td>
          <td class="swh-revision-log-entry-date">{{ log.date }}</td>
          <td>{{ log.directory }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

{% block swh-browse-after-panels %}
<ul class="pagination justify-content-center">
  {% if next_log_url %}
    <li class="page-item"><a class="page-link" href="{{ next_log_url }}">Newer</a></li>
  {% else %}
    <li class="page-item disabled"><a class="page-link">Newer</a></li>
  {% endif %}
  {% if prev_log_url %}
    <li class="page-item"><a class="page-link" href="{{ prev_log_url }}">Older</a></li>
  {% else %}
    <li class="page-item disabled"><a class="page-link">Older</a></li>
  {% endif %}
</ul>
{% endblock %}
