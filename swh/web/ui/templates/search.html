{% extends "layout.html" %}
{% block title %}Search SWH{% endblock %}
{% block content %}

<div class="container">
  <!-- Include the predefined search form-->
  {% include 'includes/search-form.html' %}

  {% if search_res is not none %}
  <!-- Search result display -->
  {% if search_stats is not none %}
  <label class="search-stats">
    Files available in SWH: {{ '%.2f' | format(search_stats['pct']) }}% of
    {{ search_stats['nbfiles'] }} files.
  </label>
  {% endif %}

  <table class="table table-striped search-res">
    <thead class="thead-default">
      <th>File name</th>
      <th>SHA1 checksum</th>
      <th>Result</th>
    </thead>
    {% for res in search_res %}
    <tr>
      {% if res['filename'] is not none %}
      <td>{{ res['filename'] }}</td>
      {% else %}
      <td>From text input</td>
      {% endif %}
      {% if res['found'] %}
      <td><a href="{{ url_for('browse_content', q=res['sha1']) }}">{{ res['sha1'] }}</a></td>
      <td><span class="glyphicon glyphicon-ok file-found"></span></td>
      {% else %}
      <td>{{ res['sha1'] }}</td>
      <td><span class="glyphicon glyphicon-remove file-notfound"></span></td>
      {% endif %}
    </tr>
    {% endfor %}
  </table>
  {% endif %}
  {% if message is not none and message != '' %}
  <div class="span8">{{ message | safe }}</div>
</div>
{% endif %}
</div>
{% endblock %}
