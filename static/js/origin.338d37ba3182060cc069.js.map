{"version":3,"sources":["webpack://swh.origin/webpack/universalModuleDefinition","webpack://swh.origin/webpack/bootstrap","webpack://swh.origin/./node_modules/@babel/runtime/regenerator/index.js","webpack://swh.origin/./swh/web/assets/src/bundles/origin/visits-histogram.js","webpack://swh.origin/./swh/web/assets/src/bundles/origin/visits-calendar.js","webpack://swh.origin/./swh/web/assets/src/bundles/origin/visits-reporting.js","webpack://swh.origin/./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack://swh.origin/./node_modules/js-year-calendar/dist/js-year-calendar.js","webpack://swh.origin/./swh/web/assets/src/bundles/origin/index.js","webpack://swh.origin/./node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime-module.js","webpack://swh.origin/./node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js"],"names":["root","factory","exports","module","define","amd","window","webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","installedModules","7","__webpack_require__","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","oldJsonpFunction","slice","s","createVisitsHistogram","container","visitsData","currentYear","yearClickCallback","a","d3","select","remove","width","height","margin","top","right","bottom","left","svg","attr","Math","ceil","append","tooltip","style","g","x","scaleTime","rangeRound","y","scaleLinear","range","colors","scaleOrdinal","domain","now","Date","endYear","getUTCFullYear","monthExtent","UTC","monthBins","timeMonths","timeMonth","offset","yearBins","timeYears","extent","binByMonth","histogram","date","thresholds","visitsByStatus","groups","sort","b","ascending","statuses","histData","forEach","entry","monthsData","stacked","stack","keys","yMax","max","total","yTickValues","axisLeft","tickValues","tickSize","tickFormat","selectAll","enter","timeYear","on","x1","getMonth","x0","transition","duration","ds","toISOString","substr","split","tooltipText","visitStatus","nbVisits","html","pageX","pageY","axisBottom","ticks","every","year","legendGroup","text","legend","reverse","currentPopover","visitsByDate","closePopover","$","popover","updateCalendar","filteredVisits","yearClickedCallback","minDate","maxDate","maxNbVisitsByDate","setHours","dateStr","toDateString","getTime","Calendar","dataSource","startYear","renderEnd","customDataSourceRenderer","element","events","size","offsetX","parseInt","css","offsetY","cellWrapper","dayNumber","circle","visit","status","innerHTML","outerHTML","mouseOnDay","visits","content","visitTime","formatted_date","indexOf","url","trigger","mouseleave","maxSize","allVisits","filterFullVisits","differentSnapshots","lastVisit","snapshot","updateVisitsList","children","visitsByYear","visitsCpt","visitsListHtml","yearChangedCalendar","yearClickedTimeline","updateDisplayedVisits","showFullVisitsDifferentSnapshots","showFullVisits","showAllVisits","initVisitsReporting","ready","firstFullVisit","v","floor","visitLink","asyncGeneratorStep","gen","_next","_throw","arg","info","done","then","fn","self","this","args","arguments","apply","globalThis","_exports","_typeof","obj","iterator","constructor","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","_defineProperty","NodeList","callback","thisArg","Element","matches","msMatchesSelector","webkitMatchesSelector","closest","el","documentElement","contains","parentElement","parentNode","nodeType","options","HTMLElement","querySelector","classList","add","_initializeEvents","_initializeOptions","setYear","opt","isNaN","getFullYear","language","locales","allowOverlap","displayWeekNumber","displayDisabledDataSource","displayHeader","alwaysHalfDay","enableRangeSelection","disabledDays","Array","disabledWeekDays","hiddenWeekDays","roundRangeLimits","enableContextMenu","contextMenuItems","customDayRenderer","weekStart","loadingTemplate","_dataSource","_initializeDatasourceColors","yearChanged","addEventListener","clickDay","dayContextMenu","selectRange","mouseOutDay","getDataSource","result","color","isLoading","firstChild","removeChild","_renderHeader","_renderLoading","_renderBody","_renderDataSource","_applyEvents","months","opacity","display","_triggerEvent","header","headerTable","prevDiv","prevIcon","prev2YearDiv","textContent","toString","prevYearDiv","yearDiv","nextYearDiv","next2YearDiv","nextDiv","nextIcon","monthsDiv","monthDiv","dataset","monthId","_nbCols","concat","firstDate","table","thead","titleRow","titleCell","headerRow","weekNumberCell","weekShort","headerCell","daysMin","_isHidden","currentDate","lastDate","getDay","setDate","getDate","row","currentThursday","getWeekNumber","cell","_isDisabled","cellContent","minHeight","loading","spinner","bounce","_this","querySelectorAll","month","monthData","startDate","endDate","day","nextDate","dayData","_renderDataSourceDay","elt","parent","weight","boxShadow","backgroundColor","currentTime","startHalfDay","otherColor","background","endHalfDay","_this2","currentTarget","marginLeft","visibility","stopPropagation","_getDate","getEvents","preventDefault","_openContextMenu","which","isThereFreeSlot","_mouseDown","_rangeStart","_rangeEnd","_refreshRange","newDate","oldValue","getEventsOnRange","_responsiveInterval","clearInterval","setInterval","calendarSize","offsetWidth","monthSize","className","_this3","offsetTop","offsetLeft","offsetParent","_this4","contextMenu","body","eventItem","paddingLeft","eventItemContent","icon","_renderContextMenuItems","position","_getElementPosition","getBoundingClientRect","_checkContextMenuItemsPosition","closeContextMenu","removeEventListener","items","evt","subMenu","visible","menuItem","menuItemContent","click","index","menus","menu","htmlMenu","eventName","parameters","Event","createEvent","initEvent","calendar","dispatchEvent","workingDate","week1","round","_this5","after","some","_this6","parsedYear","eventResult","preventRendering","render","_fetchDataSource","_this7","en","days","daysShort","monthsShort","Function","hadRuntime","regeneratorRuntime","getOwnPropertyNames","oldRuntime","global","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","inModule","runtime","wrap","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","GeneratorFunctionPrototype","Generator","GeneratorFunction","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","__await","defineIteratorMethods","AsyncIterator","async","innerFn","outerFn","tryLocsList","iter","next","pop","Context","reset","skipTempReset","prev","sent","_sent","delegate","method","tryEntries","resetTryEntry","charAt","stop","rootRecord","completion","rval","dispatchException","exception","context","handle","loc","caught","record","tryLoc","hasCatch","hasFinally","catchLoc","finallyLoc","abrupt","finallyEntry","complete","afterLoc","finish","thrown","delegateYield","iterable","resultName","nextLoc","protoGenerator","generator","_invoke","state","doneResult","delegateResult","maybeInvokeDelegate","tryCatch","makeInvokeMethod","invoke","unwrapped","previousPromise","callInvokeWithMethodAndArg","return","pushTryEntry","locs","iteratorMethod"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAgB,OAAID,KAEpBD,EAAU,IAAIA,EAAU,KAAK,GAAIA,EAAU,IAAU,OAAIC,KAR3D,CASGK,QAAQ,WACX,O,YCTE,SAASC,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GAKAK,EAAI,EAAGC,EAAW,GACpCD,EAAIF,EAASI,OAAQF,IACzBH,EAAUC,EAASE,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBV,IAAYU,EAAgBV,IACpFI,EAASO,KAAKD,EAAgBV,GAAS,IAExCU,EAAgBV,GAAW,EAE5B,IAAID,KAAYG,EACZI,OAAOC,UAAUC,eAAeC,KAAKP,EAAaH,KACpDa,EAAQb,GAAYG,EAAYH,IAKlC,IAFGc,GAAqBA,EAAoBf,GAEtCM,EAASC,QACdD,EAASU,OAATV,GAOF,IAAIW,EAAmB,GAKnBL,EAAkB,CACrBM,EAAG,GAWJ,SAASC,EAAoBlB,GAG5B,GAAGgB,EAAiBhB,GACnB,OAAOgB,EAAiBhB,GAAUP,QAGnC,IAAIC,EAASsB,EAAiBhB,GAAY,CACzCI,EAAGJ,EACHmB,GAAG,EACH1B,QAAS,IAUV,OANAoB,EAAQb,GAAUU,KAAKhB,EAAOD,QAASC,EAAQA,EAAOD,QAASyB,GAG/DxB,EAAOyB,GAAI,EAGJzB,EAAOD,QAKfyB,EAAoBE,EAAI,SAAuBnB,GAC9C,IAAIoB,EAAW,GAKXC,EAAqBX,EAAgBV,GACzC,GAA0B,IAAvBqB,EAGF,GAAGA,EACFD,EAAST,KAAKU,EAAmB,QAC3B,CAEN,IAAIC,EAAU,IAAIC,SAAQ,SAASC,EAASC,GAC3CJ,EAAqBX,EAAgBV,GAAW,CAACwB,EAASC,MAE3DL,EAAST,KAAKU,EAAmB,GAAKC,GAGtC,IACII,EADAC,EAASC,SAASC,cAAc,UAGpCF,EAAOG,QAAU,QACjBH,EAAOI,QAAU,IACbd,EAAoBe,IACvBL,EAAOM,aAAa,QAAShB,EAAoBe,IAElDL,EAAOO,IA1DV,SAAwBlC,GACvB,OAAOiB,EAAoBkB,EAAI,OAAS,CAAC,EAAI,MAAMnC,IAAUA,GAAW,IAAM,CAAC,EAAI,wBAAwBA,GAAW,MAyDvGoC,CAAepC,GAG5B,IAAIqC,EAAQ,IAAIC,MAChBZ,EAAmB,SAAUa,GAE5BZ,EAAOa,QAAUb,EAAOc,OAAS,KACjCC,aAAaX,GACb,IAAIY,EAAQjC,EAAgBV,GAC5B,GAAa,IAAV2C,EAAa,CACf,GAAGA,EAAO,CACT,IAAIC,EAAYL,IAAyB,SAAfA,EAAMM,KAAkB,UAAYN,EAAMM,MAChEC,EAAUP,GAASA,EAAMQ,QAAUR,EAAMQ,OAAOb,IACpDG,EAAMW,QAAU,iBAAmBhD,EAAU,cAAgB4C,EAAY,KAAOE,EAAU,IAC1FT,EAAMY,KAAO,iBACbZ,EAAMQ,KAAOD,EACbP,EAAMa,QAAUJ,EAChBH,EAAM,GAAGN,GAEV3B,EAAgBV,QAAWmD,IAG7B,IAAIpB,EAAUqB,YAAW,WACxB1B,EAAiB,CAAEmB,KAAM,UAAWE,OAAQpB,MAC1C,MACHA,EAAOa,QAAUb,EAAOc,OAASf,EACjCE,SAASyB,KAAKC,YAAY3B,GAG5B,OAAOJ,QAAQgC,IAAInC,IAIpBH,EAAoBuC,EAAI5C,EAGxBK,EAAoBwC,EAAI1C,EAGxBE,EAAoByC,EAAI,SAASlE,EAASyD,EAAMU,GAC3C1C,EAAoB2C,EAAEpE,EAASyD,IAClC3C,OAAOuD,eAAerE,EAASyD,EAAM,CAAEa,YAAY,EAAMC,IAAKJ,KAKhE1C,EAAoB+C,EAAI,SAASxE,GACX,oBAAXyE,QAA0BA,OAAOC,aAC1C5D,OAAOuD,eAAerE,EAASyE,OAAOC,YAAa,CAAEC,MAAO,WAE7D7D,OAAOuD,eAAerE,EAAS,aAAc,CAAE2E,OAAO,KAQvDlD,EAAoBmD,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlD,EAAoBkD,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKjE,OAAOkE,OAAO,MAGvB,GAFAvD,EAAoB+C,EAAEO,GACtBjE,OAAOuD,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlD,EAAoByC,EAAEa,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtD,EAAoB0D,EAAI,SAASlF,GAChC,IAAIkE,EAASlE,GAAUA,EAAO6E,WAC7B,WAAwB,OAAO7E,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAwB,EAAoByC,EAAEC,EAAQ,IAAKA,GAC5BA,GAIR1C,EAAoB2C,EAAI,SAASgB,EAAQC,GAAY,OAAOvE,OAAOC,UAAUC,eAAeC,KAAKmE,EAAQC,IAGzG5D,EAAoBkB,EAAI,WAGxBlB,EAAoB6D,GAAK,SAASC,GAA2B,MAApBC,QAAQ3C,MAAM0C,GAAYA,GAEnE,IAAIE,EAAarF,OAAqB,aAAIA,OAAqB,cAAK,GAChEsF,EAAmBD,EAAWtE,KAAK+D,KAAKO,GAC5CA,EAAWtE,KAAOd,EAClBoF,EAAaA,EAAWE,QACxB,IAAI,IAAIhF,EAAI,EAAGA,EAAI8E,EAAW5E,OAAQF,IAAKN,EAAqBoF,EAAW9E,IAC3E,IAAIU,EAAsBqE,EAI1B,OAAOjE,EAAoBA,EAAoBmE,EAAI,K,qBCrMrD3F,EAAOD,QAAU,EAAQ,K,yGCclB,SAAe6F,EAAtB,wC,oCAAO,WAAqCC,EAAWC,EAAYC,EAAaC,GAAzE,mEAAAC,EAAA,sEAEY,8BAFZ,OAwEL,KAtEMC,EAFD,QAKFC,OAAON,GAAWM,OAAO,OAAOC,SACnCF,EAAGC,OAAO,kBAAkBC,SAGxBC,EAAQ,IACRC,EAAS,IACTC,EAAS,CAACC,IAAK,GAAIC,MAAO,GAAIC,OAAQ,GAAIC,KAAM,IAGhDC,EAAMV,EAAGC,OAAON,GACjBgB,KAAK,QACA,mBAAqBC,KAAKC,KAAc,IAATT,EAAeD,GAAS,KAC5DW,OAAO,OACPH,KAAK,UAAW,OAASR,EAAQ,IAAMC,GAGtCW,EAAUf,EAAGC,OAAO,QACrBa,OAAO,OACPH,KAAK,QAAS,cACdK,MAAM,UAAW,GAGpBb,EAAQA,EAAQE,EAAOI,KAAOJ,EAAOE,MACrCH,EAASA,EAASC,EAAOC,IAAMD,EAAOG,OAGlCS,EAAIP,EAAII,OAAO,KAAKH,KAAK,YAAa,aAAeN,EAAOI,KAAO,IAAMJ,EAAOC,IAAM,KAGtFY,EAAIlB,EAAGmB,YAAYC,WAAW,CAAC,EAAGjB,IAGlCkB,EAAIrB,EAAGsB,cAAcC,MAAM,CAACnB,EAAQ,IAGpCoB,EAASxB,EAAGyB,eACbC,OAAO,CAAC,OAAQ,UAAW,SAAU,YACrCH,MAAM,CAAC,UAAW,UAAW,UAAW,YAG3B,KAEZI,EAAM,IAAIC,KACVC,EAAUF,EAAIG,iBAAmB,EACjCC,EAAc,CAAC,IAAIH,KAAKA,KAAKI,IAJjB,KAIgC,EAAG,IAAK,IAAIJ,KAAKA,KAAKI,IAAIH,EAAS,EAAG,KAGlFI,EAAYjC,EAAGkC,WAAWlC,EAAGmC,UAAUC,OAAOL,EAAY,IAAK,GAAIA,EAAY,IAE/EM,EAAWrC,EAAGsC,UAAUP,EAAY,GAAIA,EAAY,IAGxDb,EAAEQ,OAAO1B,EAAGuC,OAAON,IAGfO,EAAaxC,EAAGyC,YACjBjE,OAAM,SAAAT,GAAC,OAAIA,EAAE2E,QACbhB,OAAOR,EAAEQ,UACTiB,WAAWV,GAGVW,EAAiB5C,EAAG6C,OAAOjD,GAAY,SAAA7B,GAAC,OAAIA,EAAC,UAC9C+E,MAAK,SAAC/C,EAAGgD,GAAJ,OAAU/C,EAAGgD,UAAUjD,EAAE,GAAIgD,EAAE,OAGnCE,EAAW,GACXC,EAAW,GACN1I,EAAI,EAAGA,EAAIyH,EAAUvH,SAAUF,EACtC0I,EAAS1I,GAAK,GAgChB,IA9BAoI,EAAeO,SAAQ,SAAAC,GACrBH,EAASjI,KAAKoI,EAAM,IAEpB,IADA,IAAIC,EAAab,EAAWY,EAAM,IACzB5I,EAAI,EAAGA,EAAI6I,EAAW3I,SAAUF,EACvC0I,EAAS1I,GAAT,GAAoB6I,EAAW7I,GAAX,GACpB0I,EAAS1I,GAAT,GAAoB6I,EAAW7I,GAAX,GACpB0I,EAAS1I,GAAG4I,EAAM,IAAMC,EAAW7I,MAKnC8I,EAAUtD,EAAGuD,QACdC,KAAKP,GACLzE,OAAM,SAACT,EAAGe,GAAJ,OAAYf,EAAEe,GAAKpE,UAGxB+I,EAAOzD,EAAG0D,IAAIR,GAAU,SAAAnF,GAE1B,IADA,IAAI4F,EAAQ,EACHnJ,EAAI,EAAGA,EAAIyI,EAASvI,SAAUF,EACrCmJ,GAAS5F,EAAEkF,EAASzI,IAAIE,OAE1B,OAAOiJ,KAITtC,EAAEK,OAAO,CAAC,EAAG+B,IAGF,EACPG,EAAc,GACTpJ,EAAI,EAAGA,GAAKiJ,EAFV,IAEyBjJ,EAClCoJ,EAAY5I,KAHH,EAGQR,GAEnB,GAA2B,IAAvBoJ,EAAYlJ,OACd,IAASF,EAAI,EAAGA,GAAKiJ,IAAQjJ,EAC3BoJ,EAAY5I,KAAKR,QAEViJ,EATA,GASgB,GACzBG,EAAY5I,KAAKyI,GAInBxC,EAAEH,OAAO,KACNH,KAAK,QAAS,QACd7F,KAAKkF,EAAG6D,SAASxC,GACfyC,WAAWF,GACXG,UAAU5D,GACV6D,WAAW,KAMhB/C,EAAEH,OAAO,KACNmD,UAAU,QACV9J,KAAKkI,GACL6B,QAAQpD,OAAO,QACfH,KAAK,SAAS,SAAA5C,GAAC,MAAI,OAASA,EAAE+D,oBAC9BnB,KAAK,OAAQ,OACbA,KAAK,gBAAgB,SAAA5C,GAAC,OAAIA,EAAE+D,mBAAqBjC,EAAc,GAAM,KACrEc,KAAK,SAAU,QACfA,KAAK,KAAK,SAAA5C,GACT,IAAI2E,EAAO,IAAId,KAAKA,KAAKI,IAAIjE,EAAE+D,iBAAkB,EAAG,IACpD,OAAOZ,EAAEwB,MAEV/B,KAAK,IAAK,GACVA,KAAK,SAAUP,GACfO,KAAK,SAAS,SAAA5C,GACb,IAAI2E,EAAO,IAAId,KAAKA,KAAKI,IAAIjE,EAAE+D,iBAAkB,EAAG,IAEpD,OADgBZ,EAAElB,EAAGmE,SAAS/B,OAAOM,EAAM,IAAMxB,EAAEwB,MAKpD0B,GAAG,aAAa,SAACxH,EAAOmB,GACvB2C,EAAIuD,UAAU,YAAclG,EAAE+D,kBAC3BnB,KAAK,eAAgB,OAEzByD,GAAG,YAAY,SAACxH,EAAOmB,GACtB2C,EAAIuD,UAAU,YAAclG,EAAE+D,kBAC3BnB,KAAK,eAAgB,GACxBD,EAAIuD,UAAU,YAAcpE,GACzBc,KAAK,eAAgB,OAIzByD,GAAG,SAAS,SAACxH,EAAOmB,GACnB2C,EAAIuD,UAAU,YAAcpE,GACzBc,KAAK,eAAgB,GACxBD,EAAIuD,UAAU,mBAAqBpE,GAChCc,KAAK,SAAU,QAClBd,EAAc9B,EAAE+D,iBAChBpB,EAAIuD,UAAU,YAAcpE,GACzBc,KAAK,eAAgB,IACxBD,EAAIuD,UAAU,mBAAqBpE,GAChCc,KAAK,SAAU,SAClBb,EAAkBD,MAItBoB,EAAEH,OAAO,KACNmD,UAAU,KACV9J,KAAKmJ,EAAQJ,IACbgB,QAAQpD,OAAO,KACfH,KAAK,QAAQ,SAAA5C,GAAC,OAAIyD,EAAOzD,EAAEe,QAC3BmF,UAAU,QACV9J,MAAK,SAAA4D,GAAC,OAAIA,KACVmG,QAAQpD,OAAO,QACfH,KAAK,SAAS,SAAA5C,GAAC,MAAI,QAAUA,EAAE5D,KAAKkK,GAAGC,cACvC3D,KAAK,KAAK,SAAA5C,GAAC,OAAImD,EAAEnD,EAAE5D,KAAKoK,OACxB5D,KAAK,KAAK,SAAA5C,GAAC,OAAIsD,EAAEtD,EAAE,OACnB4C,KAAK,UAAU,SAAA5C,GAAC,OAAIsD,EAAEtD,EAAE,IAAMsD,EAAEtD,EAAE,OAClC4C,KAAK,SAAS,SAAA5C,GAAC,OAAImD,EAAEnD,EAAE5D,KAAKkK,IAAMnD,EAAEnD,EAAE5D,KAAKoK,IAAM,KAIjDH,GAAG,aAAa,SAACxH,EAAOmB,GACvB2C,EAAIuD,UAAU,YAAclG,EAAE5D,KAAKkK,GAAGvC,kBACnCnB,KAAK,eAAgB,IACxBI,EAAQyD,aACLC,SAAS,KACTzD,MAAM,UAAW,GAGpB,IAFA,IAAI0D,EAAK3G,EAAE5D,KAAKkK,GAAGM,cAAcC,OAAO,EAAG,GAAGC,MAAM,KAChDC,EAAc,MAAQJ,EAAG,GAAK,MAAQA,EAAG,GAAK,aACzClK,EAAI,EAAGA,EAAIyI,EAASvI,SAAUF,EAAG,CACxC,IAAIuK,EAAc9B,EAASzI,GACvBwK,EAAWjH,EAAE5D,KAAK4K,GAAarK,OAClB,IAAbsK,IACJF,GAAeE,EAAW,IAAMD,EAAc,UAC1CvK,IAAMyI,EAASvI,OAAS,IAAGoK,GAAe,UAEhD/D,EAAQkE,KAAKH,GACV9D,MAAM,OAAQpE,EAAMsI,MAAQ,GAAK,MACjClE,MAAM,MAAOpE,EAAMuI,MAAQ,SAE/Bf,GAAG,YAAY,SAACxH,EAAOmB,GACtB2C,EAAIuD,UAAU,YAAclG,EAAE5D,KAAKkK,GAAGvC,kBACnCnB,KAAK,eAAgB,GACxBD,EAAIuD,UAAU,YAAcpE,GACzBc,KAAK,eAAgB,IACxBI,EAAQyD,aACLC,SAAS,KACTzD,MAAM,UAAW,MAErBoD,GAAG,aAAa,SAACxH,GAChBmE,EAAQC,MAAM,OAAQpE,EAAMsI,MAAQ,GAAK,MACtClE,MAAM,MAAOpE,EAAMuI,MAAQ,SAI/Bf,GAAG,SAAS,SAACxH,EAAOmB,GACnB2C,EAAIuD,UAAU,YAAcpE,GACzBc,KAAK,eAAgB,GACxBD,EAAIuD,UAAU,mBAAqBpE,GAChCc,KAAK,SAAU,QAClBd,EAAc9B,EAAE5D,KAAKkK,GAAGvC,iBACxBpB,EAAIuD,UAAU,YAAcpE,GACzBc,KAAK,eAAgB,IACxBD,EAAIuD,UAAU,mBAAqBpE,GAChCc,KAAK,SAAU,SAClBb,EAAkBD,MAKtBoB,EAAEH,OAAO,KACNmD,UAAU,QACV9J,KAAKkI,GACL6B,QAAQpD,OAAO,QACfH,KAAK,SAAS,SAAA5C,GAAC,MAAI,cAAgBA,EAAE+D,oBACrCnB,KAAK,OAAQ,QACbA,KAAK,UAAU,SAAA5C,GAAC,OAAIA,EAAE+D,mBAAqBjC,EAAc,QAAU,UACnEc,KAAK,KAAK,SAAA5C,GACT,IAAI2E,EAAO,IAAId,KAAKA,KAAKI,IAAIjE,EAAE+D,iBAAkB,EAAG,IACpD,OAAOZ,EAAEwB,MAEV/B,KAAK,IAAK,GACVA,KAAK,SAAUP,GACfO,KAAK,SAAS,SAAA5C,GACb,IAAI2E,EAAO,IAAId,KAAKA,KAAKI,IAAIjE,EAAE+D,iBAAkB,EAAG,IAEpD,OADgBZ,EAAElB,EAAGmE,SAAS/B,OAAOM,EAAM,IAAMxB,EAAEwB,MAK3CzB,EAAEH,OAAO,KAClBH,KAAK,QAAS,QACdA,KAAK,YAAa,eAAiBP,EAAS,KAC5CtF,KACCkF,EAAGoF,WAAWlE,GACXmE,MAAMrF,EAAGmE,SAASmB,MAAM,IACxBtB,YAAW,SAAAjG,GAAC,OAAIA,EAAE+D,qBAKnBmC,UAAU,QACbtD,KAAK,aAAa,SAAA5C,GACjB,IAAIwH,EAAOxH,EAAE+D,iBACTY,EAAO,IAAId,KAAKA,KAAKI,IAAIuD,EAAM,EAAG,IAEtC,MAAO,eADSrE,EAAElB,EAAGmE,SAAS/B,OAAOM,EAAM,IAAMxB,EAAEwB,IAChB,EAAI,UAI3CzB,EAAEH,OAAO,KACNH,KAAK,QAAS,QACd7F,KAAKkF,EAAG6D,SAASxC,GAAGyC,WAAWF,KAG9B4B,EAAcvE,EAAEH,OAAO,KACxBH,KAAK,cAAe,cACpBA,KAAK,YAAa,IAClBA,KAAK,cAAe,QAEXG,OAAO,QAChBH,KAAK,IAAKR,EAAQE,EAAOE,MAAQ,GACjCI,KAAK,IAAK,KACVA,KAAK,KAAM,UACX8E,KAAK,kBAEJC,EAASF,EAAYvB,UAAU,KAChC9J,KAAK8I,EAASzD,QAAQmG,WACtBzB,QAAQpD,OAAO,KACfH,KAAK,aAAa,SAAC5C,EAAGvD,GAAJ,MAAU,eAA2B,IAATA,EAAI,GAAU,QAExDsG,OAAO,QACXH,KAAK,IAAKR,EAAQ,EAAIE,EAAOE,MAAQ,GACrCI,KAAK,QAAS,IACdA,KAAK,SAAU,IACfA,KAAK,OAAQa,GAEhBkE,EAAO5E,OAAO,QACXH,KAAK,IAAKR,EAAQ,EAAIE,EAAOE,MAAQ,EAAI,GACzCI,KAAK,IAAK,KACVA,KAAK,KAAM,UACX8E,MAAK,SAAA1H,GAAC,OAAIA,KAGbkD,EAAEH,OAAO,QACNH,KAAK,YAAa,eAClBA,KAAK,KAAMN,EAAOI,MAClBE,KAAK,KAAOP,EAAS,GACrBO,KAAK,KAAM,OACXK,MAAM,cAAe,UACrByE,KAAK,oBAhUH,6C,yDCdP,wDAYIG,GAZJ,OAYqB,MACjBC,EAAe,GAEnB,SAASC,IACHF,IACFG,EAAEH,GAAgBI,QAAQ,WAC1BJ,EAAiB,MAKd,SAASK,EAAeV,EAAMW,EAAgBC,GACnDN,EAAe,GAGf,IAFA,IACIO,EAASC,EADTC,EAAoB,EAEf9L,EAAI,EAAGA,EAAI0L,EAAexL,SAAUF,EAAG,CAC9C0L,EAAe1L,GAAf,UAAiC0L,EAAe1L,GAAf,KACjC0L,EAAe1L,GAAf,QAA+B0L,EAAe1L,GAAf,UAC/B,IAAIkI,EAAO,IAAId,KAAKsE,EAAe1L,GAAf,MACpBkI,EAAK6D,SAAS,EAAG,EAAG,EAAG,GACvB,IAAIC,EAAU9D,EAAK+D,eACdZ,EAAahL,eAAe2L,GAG/BX,EAAaW,GAASxL,KAAKkL,EAAe1L,IAF1CqL,EAAaW,GAAW,CAACN,EAAe1L,IAI1C8L,EAAoB1F,KAAK8C,IAAI4C,EAAmBT,EAAaW,GAAS9L,QAC5D,IAANF,EACF4L,EAAUC,EAAU3D,GAEhBA,EAAKgE,UAAYN,EAAQM,YAC3BN,EAAU1D,GAERA,EAAKgE,UAAYL,EAAQK,YAC3BL,EAAU3D,IAKhBoD,IAEA,IAAIa,IAAS,uBAAwB,CACnCC,WAAYV,EACZlF,MAAO,SACPoF,QAASA,EACTC,QAASA,EACTQ,UAAWtB,EACXuB,UAAW,SAAAtL,GAAC,OAAI2K,EAAoB3K,EAAEqE,cACtCkH,yBAA0B,SAACC,EAAStE,EAAMuE,GACxC,IAAIT,EAAU9D,EAAK+D,eACfzB,EAAWa,EAAaW,GAAS9L,OACjC+D,EAAIuG,EAAWsB,EACO,IAAtBA,IACF7H,EAAI,GAEN,IAAIyI,EAzDI,GAyDiB,GAAJzI,EACjB0I,GAzDI,GAyDiBD,GAAQ,EAAIE,SAASrB,EAAEiB,GAASK,IAAI,iBACzDC,GA1DI,GA0DiBJ,GAAQ,EAAIE,SAASrB,EAAEiB,GAASK,IAAI,gBAAkB,EAC3EE,EAAcxB,EAAE,eACpBwB,EAAYF,IAAI,WAAY,YAC5B,IAAIG,EAAYzB,EAAE,eAClByB,EAAU/B,KAAKM,EAAEiB,GAASvB,QAI1B,IAHA,IAAIgC,EAAS1B,EAAE,eACX1H,EAAI,EACJ4C,EAAI,EACCzG,EAAI,EAAGA,EAAIwK,IAAYxK,EAAG,CACjC,IAAIkN,EAAQ7B,EAAaW,GAAShM,GACb,SAAjBkN,EAAMC,OACR1G,GAAK,IACqB,YAAjByG,EAAMC,QACftJ,GAAK,IACL4C,GAAK,KAEL5C,GAAK,IAGTA,GAAK2G,EACL/D,GAAK+D,EACLyC,EAAOJ,IAAI,mBAAoB,QAAUhJ,EAAI,KAAO4C,EAAI,aACxDwG,EAAOJ,IAAI,QAASH,EAAO,MAC3BO,EAAOJ,IAAI,SAAUH,EAAO,MAC5BO,EAAOJ,IAAI,gBAAiBH,EAAO,MACnCO,EAAOJ,IAAI,WAAY,YACvBI,EAAOJ,IAAI,MAAOC,EAAU,MAC5BG,EAAOJ,IAAI,OAAQF,EAAU,MAC7BI,EAAYzG,OAAO0G,GACnBD,EAAYzG,OAAO2G,GACnB1B,EAAEiB,GAAS,GAAGY,UAAY7B,EAAEwB,GAAa,GAAGM,WAE9CC,WAAY,SAAAtM,GACNoK,IAAmBpK,EAAEwL,SACvBlB,IAEF,IAAIU,EAAUhL,EAAEkH,KAAK+D,eACrB,GAAIZ,EAAahL,eAAe2L,GAAU,CAExC,IAAIuB,EAASlC,EAAaW,GACtBwB,EAAU,YAAcxM,EAAEkH,KAAK+D,eAAiB,cACpDuB,GAAW,iCACX,IAAK,IAAIxN,EAAI,EAAGA,EAAIuN,EAAOrN,SAAUF,EAAG,CACtC,IAAIyN,EAAYF,EAAOvN,GAAG0N,eAAetD,OAAOmD,EAAOvN,GAAG0N,eAAeC,QAAQ,KAAO,GACxFH,GAAW,0CAA4CD,EAAOvN,GAAGmN,OAAS,YAAcI,EAAOvN,GAAGmN,OACvF,iBAAmBI,EAAOvN,GAAG4N,IAAM,KAAOH,EAAY,YAEnED,GAAW,QAEXjC,EAAEvK,EAAEwL,SAAShB,QAAQ,CACnBqC,QAAS,SACT1I,UAAW,OACXsF,MAAM,EACN+C,QAASA,IACR5D,GAAG,cAAc,WACb2B,EAAE,kBAAkBrL,QAGvBoL,OAIJC,EAAEvK,EAAEwL,SAAS5C,GAAG,oBAAoB,WAClC2B,EAAE,YAAYuC,YAAW,WAEvBxC,UAIJC,EAAEvK,EAAEwL,SAAShB,QAAQ,QACrBJ,EAAiBpK,EAAEwL,YAIzBjB,EAAE,0CAA0CsB,IAAI,QAASkB,QACzDxC,EAAE,0CAA0CsB,IAAI,SAAUkB,QAC1DxC,EAAE,0CAA0CsB,IAAI,UAAW,S,iCCjJ7D,4IAYImB,EAEAtC,EAEArG,EAhBJ,yBAmBA,SAAS4I,EAAiBC,GAExB,IADA,IAAIxC,EAAiB,GACZ1L,EAAI,EAAGA,EAAIgO,EAAU9N,SAAUF,EACtC,GAA4B,SAAxBgO,EAAUhO,GAAGmN,OACjB,GAAKe,EAEE,GAA8B,IAA1BxC,EAAexL,OACxBwL,EAAelL,KAAKwN,EAAUhO,QACzB,CACL,IAAImO,EAAYzC,EAAeA,EAAexL,OAAS,GACnD8N,EAAUhO,GAAGoO,WAAaD,EAAUC,UACtC1C,EAAelL,KAAKwN,EAAUhO,SANhC0L,EAAelL,KAAKwN,EAAUhO,IAUlC,OAAO0L,EAIT,SAAS2C,EAAiBtD,GACxBQ,EAAE,oBAAoB+C,WAAW5I,SAEjC,IADA,IAAI6I,EAAe,GACVvO,EAAI,EAAGA,EAAI0L,EAAexL,SAAUF,EACvC0L,EAAe1L,GAAGkI,KAAKZ,mBAAqByD,GAC9CwD,EAAa/N,KAAKkL,EAAe1L,IAMrC,IAHA,IAAIwO,EAAY,EAEZC,EAAiB,oCACZzO,EAAI,EAAGA,EAAIuO,EAAarO,SAAUF,EACrCwO,EAAY,GAAKA,EAHH,GAGiC,IACjDC,GAAkB,2CAEpBA,GAAkB,2DAClBA,GAAkB,sCAAwCF,EAAavO,GAAGmN,OAAS,YAAcoB,EAAavO,GAAGmN,OAC7F,iBAAmBoB,EAAavO,GAAG4N,IAAM,KAAOW,EAAavO,GAAG0N,eAAiB,OACrGe,GAAkB,WAChBD,EAEJC,GAAkB,SAClBlD,EAAE,oBAAoBjF,OAAOiF,EAAEkD,IAGjC,SAASC,EAAoB3D,GAC3B1F,EAAc0F,EACdsD,EAAiBtD,GACjB7F,YAAsB,cAAewG,EAAgBrG,EAAasJ,GAIpE,SAASA,EAAoB5D,GAC3B1F,EAAc0F,EACdU,YAAeV,EAAMW,EAAgBgD,GACrCL,EAAiBtD,GAInB,SAAS6D,IACuB,IAA1BlD,EAAexL,SAGdmF,IACHA,EAAcqG,EAAeA,EAAexL,OAAS,GAAGgI,KAAKZ,kBAE/DpC,YAAsB,cAAewG,EAAgBrG,EAAasJ,GAClElD,YAAepG,EAAaqG,EAAgBgD,GAC5CL,EAAiBhJ,IAKZ,SAASwJ,EAAiCzM,GAC/CsJ,EAAiBuC,GAAiB,GAClCW,IAIK,SAASE,EAAe1M,GAC7BsJ,EAAiBuC,GAAiB,GAClCW,IAIK,SAASG,EAAc3M,GAC5BsJ,EAAiBsC,EACjBY,IAGK,SAASI,EAAoBzB,GAClChC,EAAE9J,UAAUwN,OAAM,WAGhB,IAAIC,GAFJlB,EAAYT,GAGF5E,SAAQ,SAACwG,EAAGnP,GAEpBmP,EAAEjH,KAAO,IAAId,KAAKhB,KAAKgJ,MAAe,IAATD,EAAEjH,OAC/B,IAAImH,EAAY,sCAAwCF,EAAEhC,OAAS,WAAagC,EAAEvB,IAAM,KAAOuB,EAAEzB,eAAiB,OACjG,SAAbyB,EAAEhC,SACC+B,EAOH3D,EAAE,wBAAwB,GAAG6B,UAAYiC,GANzCH,EAAiBC,EACjB5D,EAAE,yBAAyBjF,OAAOiF,EAAE8D,IACX,IAArBrB,EAAU9N,SACZqL,EAAE,wBAAwB,GAAG6B,UAAYiC,KAM3CrP,IAAMgO,EAAU9N,OAAS,GAC3BqL,EAAE,mBAAmBjF,OAAOiF,EAAE8D,OAKlCR,S,iBCtIJ,SAASS,EAAmBC,EAAKlO,EAASC,EAAQkO,EAAOC,EAAQnL,EAAKoL,GACpE,IACE,IAAIC,EAAOJ,EAAIjL,GAAKoL,GAChB1L,EAAQ2L,EAAK3L,MACjB,MAAO9B,GAEP,YADAZ,EAAOY,GAILyN,EAAKC,KACPvO,EAAQ2C,GAER5C,QAAQC,QAAQ2C,GAAO6L,KAAKL,EAAOC,GAwBvCnQ,EAAOD,QApBP,SAA2ByQ,GACzB,OAAO,WACL,IAAIC,EAAOC,KACPC,EAAOC,UACX,OAAO,IAAI9O,SAAQ,SAAUC,EAASC,GACpC,IAAIiO,EAAMO,EAAGK,MAAMJ,EAAME,GAEzB,SAAST,EAAMxL,GACbsL,EAAmBC,EAAKlO,EAASC,EAAQkO,EAAOC,EAAQ,OAAQzL,GAGlE,SAASyL,EAAO7K,GACd0K,EAAmBC,EAAKlO,EAASC,EAAQkO,EAAOC,EAAQ,QAAS7K,GAGnE4K,OAAMxM,S,oBC/BZ,UAYyB,oBAAfoN,WAA6BA,WAA6B,oBAATL,MAAuBA,KAV9E,EAAO,CAAC,QAAmB,0BAAP,EAUuE,SAAUM,GACvG,aAOA,SAASC,EAAQC,GAAmV,OAAtOD,EAArD,mBAAXxM,QAAoD,iBAApBA,OAAO0M,SAAmC,SAAiBD,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXzM,QAAyByM,EAAIE,cAAgB3M,QAAUyM,IAAQzM,OAAO1D,UAAY,gBAAkBmQ,IAAyBA,GAEnX,SAASG,EAAgBC,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,qCAEhH,SAASC,EAAkBlO,EAAQmO,GAAS,IAAK,IAAI/Q,EAAI,EAAGA,EAAI+Q,EAAM7Q,OAAQF,IAAK,CAAE,IAAIgR,EAAaD,EAAM/Q,GAAIgR,EAAWrN,WAAaqN,EAAWrN,aAAc,EAAOqN,EAAWC,cAAe,EAAU,UAAWD,IAAYA,EAAWE,UAAW,GAAM/Q,OAAOuD,eAAed,EAAQoO,EAAW1M,IAAK0M,IAE7S,SAASG,EAAaP,EAAaQ,EAAYC,GAAmJ,OAAhID,GAAYN,EAAkBF,EAAYxQ,UAAWgR,GAAiBC,GAAaP,EAAkBF,EAAaS,GAAqBT,EAEzM,SAASU,EAAgBf,EAAKjM,EAAKN,GAAiK,OAApJM,KAAOiM,EAAOpQ,OAAOuD,eAAe6M,EAAKjM,EAAK,CAAEN,MAAOA,EAAOL,YAAY,EAAMsN,cAAc,EAAMC,UAAU,IAAkBX,EAAIjM,GAAON,EAAgBuM,EAgC3M,GA7CApQ,OAAOuD,eAAe2M,EAAU,aAAc,CAC5CrM,OAAO,IAETqM,EAAkB,aAAI,EA+BE,oBAAbkB,UAA6BA,SAASnR,UAAUuI,UACzD4I,SAASnR,UAAUuI,QAAU,SAAU6I,EAAUC,GAC/CA,EAAUA,GAAWhS,OAErB,IAAK,IAAIO,EAAI,EAAGA,EAAIgQ,KAAK9P,OAAQF,IAC/BwR,EAASlR,KAAKmR,EAASzB,KAAKhQ,GAAIA,EAAGgQ,QAMlB,oBAAZ0B,UAA4BA,QAAQtR,UAAUuR,QAAS,CAChE,IAAIvR,EAAYsR,QAAQtR,UACxBsR,QAAQtR,UAAUuR,QAAUvR,EAAUwR,mBAAqBxR,EAAUyR,sBAGhD,oBAAZH,SAA4BA,QAAQtR,UAAU0R,UACvDJ,QAAQtR,UAAU0R,QAAU,SAAU7M,GACpC,IAAI8M,EAAK/B,KACT,IAAKvO,SAASuQ,gBAAgBC,SAASF,GAAK,OAAO,KAEnD,EAAG,CACD,GAAIA,EAAGJ,QAAQ1M,GAAI,OAAO8M,EAC1BA,EAAKA,EAAGG,eAAiBH,EAAGI,iBACd,OAAPJ,GAA8B,GAAfA,EAAGK,UAE3B,OAAO,OAQX,IAAIjG,EAAwB,WA4F1B,SAASA,EAASK,GAChB,IAAI6F,EAAUnC,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,GAAmBA,UAAU,GAAK,KAkClF,GAhCAQ,EAAgBV,KAAM7D,GAEtBmF,EAAgBtB,KAAM,eAAW,GAEjCsB,EAAgBtB,KAAM,eAAW,GAEjCsB,EAAgBtB,KAAM,mBAAe,GAErCsB,EAAgBtB,KAAM,kBAAc,GAEpCsB,EAAgBtB,KAAM,mBAAe,GAErCsB,EAAgBtB,KAAM,iBAAa,GAEnCsB,EAAgBtB,KAAM,2BAAuB,GAE7CsB,EAAgBtB,KAAM,eAAW,GAEjCsB,EAAgBtB,KAAM,gBAAY,GAElCsB,EAAgBtB,KAAM,sBAAkB,GAExCsB,EAAgBtB,KAAM,kBAAc,GAEpCsB,EAAgBtB,KAAM,mBAAe,GAErCsB,EAAgBtB,KAAM,iBAAa,GAEnCsB,EAAgBtB,KAAM,mBAAe,GAErCsB,EAAgBtB,KAAM,mBAAe,GAEjCxD,aAAmB8F,YACrBtC,KAAKxD,QAAUA,MACV,IAAuB,iBAAZA,EAGhB,MAAM,IAAIrK,MAAM,4DAFhB6N,KAAKxD,QAAU/K,SAAS8Q,cAAc/F,GAKxCwD,KAAKxD,QAAQgG,UAAUC,IAAI,YAE3BzC,KAAK0C,kBAAkBL,GAEvBrC,KAAK2C,mBAAmBN,GAExBrC,KAAK4C,QAAQ5C,KAAKqC,QAAQhG,WAguD5B,OA7tDA8E,EAAahF,EAAU,CAAC,CACtB7H,IAAK,qBACLN,MAAO,SAA4B6O,GACtB,MAAPA,IACFA,EAAM,IAGR7C,KAAKqC,QAAU,CACbhG,UAAYyG,MAAMlG,SAASiG,EAAIxG,aAAwC,IAAIjF,MAAO2L,cAArCnG,SAASiG,EAAIxG,WAC1DT,QAASiH,EAAIjH,mBAAmBxE,KAAOyL,EAAIjH,QAAU,KACrDC,QAASgH,EAAIhH,mBAAmBzE,KAAOyL,EAAIhH,QAAU,KACrDmH,SAA0B,MAAhBH,EAAIG,UAAsD,MAAlC7G,EAAS8G,QAAQJ,EAAIG,UAAoBH,EAAIG,SAAW,KAC1FE,aAAkC,MAApBL,EAAIK,cAAuBL,EAAIK,aAC7CC,kBAA4C,MAAzBN,EAAIM,mBAA4BN,EAAIM,kBACvDC,0BAA4D,MAAjCP,EAAIO,2BAAoCP,EAAIO,0BACvEC,cAAoC,MAArBR,EAAIQ,eAAwBR,EAAIQ,cAC/CC,cAAoC,MAArBT,EAAIS,eAAwBT,EAAIS,cAC/CC,qBAAkD,MAA5BV,EAAIU,sBAA+BV,EAAIU,qBAC7DC,aAAcX,EAAIW,wBAAwBC,MAAQZ,EAAIW,aAAe,GACrEE,iBAAkBb,EAAIa,4BAA4BD,MAAQZ,EAAIa,iBAAmB,GACjFC,eAAgBd,EAAIc,0BAA0BF,MAAQZ,EAAIc,eAAiB,GAC3EC,iBAA0C,MAAxBf,EAAIe,kBAA2Bf,EAAIe,iBACrDxH,WAAYyG,EAAIzG,sBAAsBqH,OAAmC,mBAAnBZ,EAAIzG,WAA4ByG,EAAIzG,WAAa,GACvG5F,MAAoB,cAAbqM,EAAIrM,OAAsC,UAAbqM,EAAIrM,OAAkC,UAAbqM,EAAIrM,MAAoBqM,EAAIrM,MAAQ,SACjGqN,kBAA4C,MAAzBhB,EAAIgB,mBAA4BhB,EAAIgB,kBACvDC,iBAAkBjB,EAAIiB,4BAA4BL,MAAQZ,EAAIiB,iBAAmB,GACjFC,kBAAoD,mBAA1BlB,EAAIkB,kBAAmClB,EAAIkB,kBAAoB,KACzFxH,yBAAkE,mBAAjCsG,EAAItG,yBAA0CsG,EAAItG,yBAA2B,KAC9GyH,UAAYlB,MAAMlG,SAASiG,EAAImB,YAAwC,KAA1BpH,SAASiG,EAAImB,WAC1DC,gBAAgD,iBAAxBpB,EAAIoB,iBAAgCpB,EAAIoB,2BAA2B3B,YAAcO,EAAIoB,gBAAkB,MAG7HjE,KAAKqC,QAAQjG,sBAAsBqH,QACrCzD,KAAKkE,YAAclE,KAAKqC,QAAQjG,WAEhC4D,KAAKmE,iCAGR,CACD7P,IAAK,oBACLN,MAAO,SAA2B6O,GACrB,MAAPA,IACFA,EAAM,IAGJA,EAAIuB,aACNpE,KAAKxD,QAAQ6H,iBAAiB,cAAexB,EAAIuB,aAG/CvB,EAAIvG,WACN0D,KAAKxD,QAAQ6H,iBAAiB,YAAaxB,EAAIvG,WAG7CuG,EAAIyB,UACNtE,KAAKxD,QAAQ6H,iBAAiB,WAAYxB,EAAIyB,UAG5CzB,EAAI0B,gBACNvE,KAAKxD,QAAQ6H,iBAAiB,iBAAkBxB,EAAI0B,gBAGlD1B,EAAI2B,aACNxE,KAAKxD,QAAQ6H,iBAAiB,cAAexB,EAAI2B,aAG/C3B,EAAIvF,YACN0C,KAAKxD,QAAQ6H,iBAAiB,aAAcxB,EAAIvF,YAG9CuF,EAAI4B,aACNzE,KAAKxD,QAAQ6H,iBAAiB,cAAexB,EAAI4B,eAGpD,CACDnQ,IAAK,mBACLN,MAAO,SAA0BwN,GAC/B,GAAuC,mBAA5BxB,KAAKqC,QAAQjG,WAA2B,CACjD,IAAIsI,EAAgB1E,KAAKqC,QAAQjG,WAEjC,GAA4B,GAAxBsI,EAAcxU,OAEhBwU,EAAc1E,KAAKqC,QAAQhG,UAAWmF,OACjC,CAEL,IAAImD,EAASD,EAAc1E,KAAKqC,QAAQhG,WAEpCsI,aAAkBlB,MACpBjC,EAASmD,GAETA,EAAO9E,KAAK2B,SAIhBA,EAASxB,KAAKqC,QAAQjG,cAGzB,CACD9H,IAAK,8BACLN,MAAO,WACL,IAAK,IAAIhE,EAAI,EAAGA,EAAIgQ,KAAKkE,YAAYhU,OAAQF,IACV,MAA7BgQ,KAAKkE,YAAYlU,GAAG4U,QACtB5E,KAAKkE,YAAYlU,GAAG4U,MAAQzI,EAASnF,OAAOhH,EAAImM,EAASnF,OAAO9G,WAQrE,CACDoE,IAAK,SACLN,MAAO,WAIL,IAHA,IAAI6Q,EAAY3E,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GAGxEF,KAAKxD,QAAQsI,YAClB9E,KAAKxD,QAAQuI,YAAY/E,KAAKxD,QAAQsI,YAOxC,GAJI9E,KAAKqC,QAAQgB,eACfrD,KAAKgF,gBAGHH,EACF7E,KAAKiF,qBACA,CACLjF,KAAKkF,cAELlF,KAAKmF,oBAELnF,KAAKoF,eAGL,IAAIC,EAASrF,KAAKxD,QAAQ+F,cAAc,qBACxC8C,EAAO7O,MAAM8O,QAAU,IACvBD,EAAO7O,MAAM+O,QAAU,QACvBF,EAAO7O,MAAMwD,WAAa,eAC1B/G,YAAW,WACToS,EAAO7O,MAAM8O,QAAU,IACvBrS,YAAW,WACT,OAAOoS,EAAO7O,MAAMwD,WAAa,KAChC,OACF,GAEHgG,KAAKwF,cAAc,YAAa,CAC9BnQ,YAAa2K,KAAKqC,QAAQhG,eAI/B,CACD/H,IAAK,gBACLN,MAAO,WACL,IAAIyR,EAAShU,SAASC,cAAc,OACpC+T,EAAOjD,UAAUC,IAAI,mBACrB,IAAIiD,EAAcjU,SAASC,cAAc,SACrCiU,EAAUlU,SAASC,cAAc,MACrCiU,EAAQnD,UAAUC,IAAI,QAEM,MAAxBzC,KAAKqC,QAAQzG,SAAmBoE,KAAKqC,QAAQzG,QAAU,IAAIxE,KAAK4I,KAAKqC,QAAQhG,UAAY,EAAG,GAAI,KAClGsJ,EAAQnD,UAAUC,IAAI,YAGxB,IAAImD,EAAWnU,SAASC,cAAc,QACtCkU,EAASxI,UAAY,WACrBuI,EAAQxS,YAAYyS,GACpBF,EAAYvS,YAAYwS,GACxB,IAAIE,EAAepU,SAASC,cAAc,MAC1CmU,EAAarD,UAAUC,IAAI,cAC3BoD,EAAarD,UAAUC,IAAI,kBAC3BoD,EAAaC,aAAe9F,KAAKqC,QAAQhG,UAAY,GAAG0J,WAE5B,MAAxB/F,KAAKqC,QAAQzG,SAAmBoE,KAAKqC,QAAQzG,QAAU,IAAIxE,KAAK4I,KAAKqC,QAAQhG,UAAY,EAAG,GAAI,KAClGwJ,EAAarD,UAAUC,IAAI,YAG7BiD,EAAYvS,YAAY0S,GACxB,IAAIG,EAAcvU,SAASC,cAAc,MACzCsU,EAAYxD,UAAUC,IAAI,cAC1BuD,EAAYxD,UAAUC,IAAI,iBAC1BuD,EAAYF,aAAe9F,KAAKqC,QAAQhG,UAAY,GAAG0J,WAE3B,MAAxB/F,KAAKqC,QAAQzG,SAAmBoE,KAAKqC,QAAQzG,QAAU,IAAIxE,KAAK4I,KAAKqC,QAAQhG,UAAY,EAAG,GAAI,KAClG2J,EAAYxD,UAAUC,IAAI,YAG5BiD,EAAYvS,YAAY6S,GACxB,IAAIC,EAAUxU,SAASC,cAAc,MACrCuU,EAAQzD,UAAUC,IAAI,cACtBwD,EAAQH,YAAc9F,KAAKqC,QAAQhG,UAAU0J,WAC7CL,EAAYvS,YAAY8S,GACxB,IAAIC,EAAczU,SAASC,cAAc,MACzCwU,EAAY1D,UAAUC,IAAI,cAC1ByD,EAAY1D,UAAUC,IAAI,iBAC1ByD,EAAYJ,aAAe9F,KAAKqC,QAAQhG,UAAY,GAAG0J,WAE3B,MAAxB/F,KAAKqC,QAAQxG,SAAmBmE,KAAKqC,QAAQxG,QAAU,IAAIzE,KAAK4I,KAAKqC,QAAQhG,UAAY,EAAG,EAAG,IACjG6J,EAAY1D,UAAUC,IAAI,YAG5BiD,EAAYvS,YAAY+S,GACxB,IAAIC,EAAe1U,SAASC,cAAc,MAC1CyU,EAAa3D,UAAUC,IAAI,cAC3B0D,EAAa3D,UAAUC,IAAI,kBAC3B0D,EAAaL,aAAe9F,KAAKqC,QAAQhG,UAAY,GAAG0J,WAE5B,MAAxB/F,KAAKqC,QAAQxG,SAAmBmE,KAAKqC,QAAQxG,QAAU,IAAIzE,KAAK4I,KAAKqC,QAAQhG,UAAY,EAAG,EAAG,IACjG8J,EAAa3D,UAAUC,IAAI,YAG7BiD,EAAYvS,YAAYgT,GACxB,IAAIC,EAAU3U,SAASC,cAAc,MACrC0U,EAAQ5D,UAAUC,IAAI,QAEM,MAAxBzC,KAAKqC,QAAQxG,SAAmBmE,KAAKqC,QAAQxG,QAAU,IAAIzE,KAAK4I,KAAKqC,QAAQhG,UAAY,EAAG,EAAG,IACjG+J,EAAQ5D,UAAUC,IAAI,YAGxB,IAAI4D,EAAW5U,SAASC,cAAc,QACtC2U,EAASjJ,UAAY,WACrBgJ,EAAQjT,YAAYkT,GACpBX,EAAYvS,YAAYiT,GACxBX,EAAOtS,YAAYuS,GACnB1F,KAAKxD,QAAQrJ,YAAYsS,KAE1B,CACDnR,IAAK,cACLN,MAAO,WACL,IAAIsS,EAAY7U,SAASC,cAAc,OACvC4U,EAAU9D,UAAUC,IAAI,oBAExB,IAAK,IAAIpP,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAE3B,IAAIkT,EAAW9U,SAASC,cAAc,OACtC6U,EAAS/D,UAAUC,IAAI,mBACvB8D,EAASC,QAAQC,QAAUpT,EAAE0S,WAEzB/F,KAAK0G,SACPH,EAAS/D,UAAUC,IAAI,SAASkE,OAAO3G,KAAK0G,UAG9C,IAAIE,EAAY,IAAIxP,KAAK4I,KAAKqC,QAAQhG,UAAWhJ,EAAG,GAChDwT,EAAQpV,SAASC,cAAc,SACnCmV,EAAMrE,UAAUC,IAAI,SAGpB,IAAIqE,EAAQrV,SAASC,cAAc,SAC/BqV,EAAWtV,SAASC,cAAc,MAClCsV,EAAYvV,SAASC,cAAc,MACvCsV,EAAUxE,UAAUC,IAAI,eACxBuE,EAAUlV,aAAa,UAAWkO,KAAKqC,QAAQc,kBAAoB,IAAM,KACzE6D,EAAUlB,YAAc3J,EAAS8G,QAAQjD,KAAKqC,QAAQW,UAAUqC,OAAOhS,GACvE0T,EAAS5T,YAAY6T,GACrBF,EAAM3T,YAAY4T,GAClB,IAAIE,EAAYxV,SAASC,cAAc,MAEnCsO,KAAKqC,QAAQc,qBACX+D,EAAiBzV,SAASC,cAAc,OAC7B8Q,UAAUC,IAAI,eAC7ByE,EAAepB,YAAc3J,EAAS8G,QAAQjD,KAAKqC,QAAQW,UAAUmE,UACrEF,EAAU9T,YAAY+T,IAGxB,IAAIlD,EAAYhE,KAAKqC,QAAQ2B,UAAYhE,KAAKqC,QAAQ2B,UAAY7H,EAAS8G,QAAQjD,KAAKqC,QAAQW,UAAUgB,UACtGzQ,EAAIyQ,EAER,EAAG,CACD,IAAIoD,EAAa3V,SAASC,cAAc,MACxC0V,EAAW5E,UAAUC,IAAI,cACzB2E,EAAWtB,YAAc3J,EAAS8G,QAAQjD,KAAKqC,QAAQW,UAAUqE,QAAQ9T,GAErEyM,KAAKsH,UAAU/T,IACjB6T,EAAW5E,UAAUC,IAAI,UAG3BwE,EAAU9T,YAAYiU,KACtB7T,GACS,IAAGA,EAAI,SACTA,GAAKyQ,GAEd8C,EAAM3T,YAAY8T,GAClBJ,EAAM1T,YAAY2T,GAMlB,IAHA,IAAIS,EAAc,IAAInQ,KAAKwP,EAAU1K,WACjCsL,EAAW,IAAIpQ,KAAK4I,KAAKqC,QAAQhG,UAAWhJ,EAAI,EAAG,GAEhDkU,EAAYE,UAAYzD,GAC7BuD,EAAYG,QAAQH,EAAYI,UAAY,GAG9C,KAAOJ,GAAeC,GAAU,CAC9B,IAAII,EAAMnW,SAASC,cAAc,MAEjC,GAAIsO,KAAKqC,QAAQc,kBAAmB,CAClC,IAAI+D,EAAiBzV,SAASC,cAAc,MACxCmW,EAAkB,IAAIzQ,KAAKmQ,EAAYrL,WAE3C2L,EAAgBH,QAAQG,EAAgBF,UAAY3D,EAAY,GAChEkD,EAAe1E,UAAUC,IAAI,eAC7ByE,EAAepB,YAAc9F,KAAK8H,cAAcD,GAAiB9B,WACjE6B,EAAIzU,YAAY+T,GAGlB,EAAG,CACD,IAAIa,EAAOtW,SAASC,cAAc,MAOlC,GANAqW,EAAKvF,UAAUC,IAAI,OAEfzC,KAAKsH,UAAUC,EAAYE,WAC7BM,EAAKvF,UAAUC,IAAI,UAGjB8E,EAAcX,EAChBmB,EAAKvF,UAAUC,IAAI,YACd,GAAI8E,EAAcC,EACvBO,EAAKvF,UAAUC,IAAI,WACd,CACDzC,KAAKgI,YAAYT,IACnBQ,EAAKvF,UAAUC,IAAI,YAGrB,IAAIwF,EAAcxW,SAASC,cAAc,OACzCuW,EAAYzF,UAAUC,IAAI,eAC1BwF,EAAYnC,YAAcyB,EAAYI,UAAU5B,WAChDgC,EAAK5U,YAAY8U,GAEbjI,KAAKqC,QAAQ0B,mBACf/D,KAAKqC,QAAQ0B,kBAAkBkE,EAAaV,GAIhDK,EAAIzU,YAAY4U,GAChBR,EAAYG,QAAQH,EAAYI,UAAY,SACrCJ,EAAYE,UAAYzD,GAEjC6C,EAAM1T,YAAYyU,GAGpBrB,EAASpT,YAAY0T,GACrBP,EAAUnT,YAAYoT,GAGxBvG,KAAKxD,QAAQrJ,YAAYmT,KAE1B,CACDhS,IAAK,iBACLN,MAAO,WACL,IAAImB,EAAY1D,SAASC,cAAc,OACvCyD,EAAUqN,UAAUC,IAAI,8BACxBtN,EAAUqB,MAAM0R,UAA2B,IAAflI,KAAK0G,QAAgB,KACjD,IAAIyB,EAAU1W,SAASC,cAAc,OAGrC,GAFAyW,EAAQ3F,UAAUC,IAAI,oBAElBzC,KAAKqC,QAAQ4B,gBAC6B,iBAAjCjE,KAAKqC,QAAQ4B,gBACtBkE,EAAQ/K,UAAY4C,KAAKqC,QAAQ4B,gBACxBjE,KAAKqC,QAAQ4B,2BAA2B3B,aACjD6F,EAAQhV,YAAY6M,KAAKqC,QAAQ4B,qBAE9B,CACL,IAAImE,EAAU3W,SAASC,cAAc,OACrC0W,EAAQ5F,UAAUC,IAAI,oBAEtB,IAAK,IAAIzS,EAAI,EAAGA,GAAK,EAAGA,IAAK,CAC3B,IAAIqY,EAAS5W,SAASC,cAAc,OACpC2W,EAAO7F,UAAUC,IAAI,SAASkE,OAAO3W,IACrCoY,EAAQjV,YAAYkV,GAGtBF,EAAQhV,YAAYiV,GAGtBjT,EAAUhC,YAAYgV,GACtBnI,KAAKxD,QAAQrJ,YAAYgC,KAE1B,CACDb,IAAK,oBACLN,MAAO,WACL,IAAIsU,EAAQtI,KAEY,MAApBA,KAAKkE,aAAuBlE,KAAKkE,YAAYhU,OAAS,GACxD8P,KAAKxD,QAAQ+L,iBAAiB,oBAAoB5P,SAAQ,SAAU6P,GAClE,IAAI/B,EAAU7J,SAAS4L,EAAMhC,QAAQC,SACjCG,EAAY,IAAIxP,KAAKkR,EAAMjG,QAAQhG,UAAWoK,EAAS,GACvDe,EAAW,IAAIpQ,KAAKkR,EAAMjG,QAAQhG,UAAWoK,EAAU,EAAG,GAE9D,IAA8B,MAAzB6B,EAAMjG,QAAQzG,SAAmB4L,EAAWc,EAAMjG,QAAQzG,WAAsC,MAAzB0M,EAAMjG,QAAQxG,SAAmB+K,GAAa0B,EAAMjG,QAAQxG,SAAU,CAGhJ,IAFA,IAAI4M,EAAY,GAEPzY,EAAI,EAAGA,EAAIsY,EAAMpE,YAAYhU,OAAQF,IACtCsY,EAAMpE,YAAYlU,GAAG0Y,WAAalB,KAAac,EAAMpE,YAAYlU,GAAG2Y,QAAU/B,IAClF6B,EAAUjY,KAAK8X,EAAMpE,YAAYlU,IAIjCyY,EAAUvY,OAAS,GACrBsY,EAAMD,iBAAiB,gBAAgB5P,SAAQ,SAAUiQ,GACvD,IAAIrB,EAAc,IAAInQ,KAAKkR,EAAMjG,QAAQhG,UAAWoK,EAAS7J,SAASgM,EAAI9C,cACtE+C,EAAW,IAAIzR,KAAKkR,EAAMjG,QAAQhG,UAAWoK,EAASc,EAAYI,UAAY,GAC9EmB,EAAU,GAEd,IAA8B,MAAzBR,EAAMjG,QAAQzG,SAAmB2L,GAAee,EAAMjG,QAAQzG,WAAsC,MAAzB0M,EAAMjG,QAAQxG,SAAmB0L,GAAee,EAAMjG,QAAQxG,SAAU,CACtJ,IAAK,IAAI7L,EAAI,EAAGA,EAAIyY,EAAUvY,OAAQF,IAChCyY,EAAUzY,GAAG0Y,UAAYG,GAAYJ,EAAUzY,GAAG2Y,SAAWpB,GAC/DuB,EAAQtY,KAAKiY,EAAUzY,IAIvB8Y,EAAQ5Y,OAAS,IAAMoY,EAAMjG,QAAQe,4BAA8BkF,EAAMN,YAAYT,KACvFe,EAAMS,qBAAqBH,EAAKrB,EAAauB,aAS5D,CACDxU,IAAK,uBACLN,MAAO,SAA8BgV,EAAKzB,EAAa9K,GACrD,IAAIwM,EAASD,EAAI9G,cAEjB,OAAQlC,KAAKqC,QAAQ7L,OACnB,IAAK,SACH,IAAI0S,EAAS,EAUb,GARqB,GAAjBzM,EAAOvM,OACTgZ,EAAS,EACAzM,EAAOvM,QAAU,EAC1BgZ,EAAS,EAETD,EAAOzS,MAAM2S,UAAY,yBAGvBD,EAAS,EAAG,CAGd,IAFA,IAAIC,EAAY,GAEPnZ,EAAI,EAAGA,EAAIyM,EAAOvM,OAAQF,IAChB,IAAbmZ,IACFA,GAAa,KAGfA,GAAa,YAAYxC,QAAQ3W,EAAI,GAAKkZ,EAAQ,WAAWvC,OAAOlK,EAAOzM,GAAG4U,OAGhFqE,EAAOzS,MAAM2S,UAAYA,EAG3B,MAEF,IAAK,aACHF,EAAOzS,MAAM4S,gBAAkB3M,EAAOA,EAAOvM,OAAS,GAAG0U,MACzD,IAAIyE,EAAc9B,EAAYrL,UAE9B,GAAIO,EAAOA,EAAOvM,OAAS,GAAGwY,UAAUxM,WAAamN,EAGnD,GAFAJ,EAAOzG,UAAUC,IAAI,aAEjBhG,EAAOA,EAAOvM,OAAS,GAAGoZ,cAAgBtJ,KAAKqC,QAAQiB,cAAe,CACxE2F,EAAOzG,UAAUC,IAAI,YAErB,IAAI8G,EAAa,cAEjB,IAASvZ,EAAIyM,EAAOvM,OAAS,EAAGF,GAAK,EAAGA,IACtC,GAAIyM,EAAOzM,GAAG0Y,UAAUxM,WAAamN,IAAgB5M,EAAOzM,GAAGsZ,eAAiBtJ,KAAKqC,QAAQiB,cAAe,CAC1GiG,EAAa9M,EAAOzM,GAAG4U,MACvB,MAIJqE,EAAOzS,MAAMgT,WAAa,2BAA2B7C,OAAOlK,EAAOA,EAAOvM,OAAS,GAAG0U,MAAO,MAAM+B,OAAOlK,EAAOA,EAAOvM,OAAS,GAAG0U,MAAO,UAAU+B,OAAO4C,EAAY,UAAU5C,OAAO4C,EAAY,UAC5LvJ,KAAKqC,QAAQuB,kBACtBqF,EAAOzG,UAAUC,IAAI,mBAElB,GAAIhG,EAAOA,EAAOvM,OAAS,GAAGyY,QAAQzM,WAAamN,EAGxD,GAFAJ,EAAOzG,UAAUC,IAAI,WAEjBhG,EAAOA,EAAOvM,OAAS,GAAGuZ,YAAczJ,KAAKqC,QAAQiB,cAAe,CAKtE,IAJA2F,EAAOzG,UAAUC,IAAI,YAEjB8G,EAAa,cAERvZ,EAAIyM,EAAOvM,OAAS,EAAGF,GAAK,EAAGA,IACtC,GAAIyM,EAAOzM,GAAG2Y,QAAQzM,WAAamN,IAAgB5M,EAAOzM,GAAGyZ,aAAezJ,KAAKqC,QAAQiB,cAAe,CACtGiG,EAAa9M,EAAOzM,GAAG4U,MACvB,MAIJqE,EAAOzS,MAAMgT,WAAa,2BAA2B7C,OAAOlK,EAAOA,EAAOvM,OAAS,GAAG0U,MAAO,MAAM+B,OAAOlK,EAAOA,EAAOvM,OAAS,GAAG0U,MAAO,UAAU+B,OAAO4C,EAAY,UAAU5C,OAAO4C,EAAY,UAC5LvJ,KAAKqC,QAAQuB,kBACtBqF,EAAOzG,UAAUC,IAAI,eAIzB,MAEF,IAAK,SACCzC,KAAKqC,QAAQ9F,0BACfyD,KAAKqC,QAAQ9F,yBAAyBjM,KAAK0P,KAAMgJ,EAAKzB,EAAa9K,MAM1E,CACDnI,IAAK,eACLN,MAAO,WACL,IAAI0V,EAAS1J,KAETA,KAAKqC,QAAQgB,gBAEfrD,KAAKxD,QAAQ+L,iBAAiB,mCAAmC5P,SAAQ,SAAU6D,GACjFA,EAAQ6H,iBAAiB,SAAS,SAAUrT,GACrCA,EAAE2Y,cAAcnH,UAAUP,SAAS,aACtCyH,EAAO9G,QAAQhG,SAAS5L,EAAE2Y,cAAc7D,oBAI9C9F,KAAKxD,QAAQ+F,cAAc,0BAA0B8B,iBAAiB,SAAS,SAAUrT,GACvF,IAAKA,EAAE2Y,cAAcnH,UAAUP,SAAS,YAAa,CACnD,IAAIoD,EAASqE,EAAOlN,QAAQ+F,cAAc,qBAE1C8C,EAAO7O,MAAMwD,WAAa,mBAC1BqL,EAAO7O,MAAMoT,WAAa,OAC1B3W,YAAW,WACToS,EAAO7O,MAAMqT,WAAa,SAC1BxE,EAAO7O,MAAMwD,WAAa,GAC1BqL,EAAO7O,MAAMoT,WAAa,IAC1B3W,YAAW,WACTyW,EAAO9G,QAAQ8G,EAAOrH,QAAQhG,UAAY,KACzC,MACF,SAGP2D,KAAKxD,QAAQ+F,cAAc,0BAA0B8B,iBAAiB,SAAS,SAAUrT,GACvF,IAAKA,EAAE2Y,cAAcnH,UAAUP,SAAS,YAAa,CACnD,IAAIoD,EAASqE,EAAOlN,QAAQ+F,cAAc,qBAE1C8C,EAAO7O,MAAMwD,WAAa,mBAC1BqL,EAAO7O,MAAMoT,WAAa,QAC1B3W,YAAW,WACToS,EAAO7O,MAAMqT,WAAa,SAC1BxE,EAAO7O,MAAMwD,WAAa,GAC1BqL,EAAO7O,MAAMoT,WAAa,IAC1B3W,YAAW,WACTyW,EAAO9G,QAAQ8G,EAAOrH,QAAQhG,UAAY,KACzC,MACF,UAKG2D,KAAKxD,QAAQ+L,iBAAiB,2CACpC5P,SAAQ,SAAUoP,GAEtBA,EAAK1D,iBAAiB,SAAS,SAAUrT,GACvCA,EAAE8Y,kBAEF,IAAI5R,EAAOwR,EAAOK,SAAS/Y,EAAE2Y,eAE7BD,EAAOlE,cAAc,WAAY,CAC/BhJ,QAASxL,EAAE2Y,cACXzR,KAAMA,EACNuE,OAAQiN,EAAOM,UAAU9R,QAK7B6P,EAAK1D,iBAAiB,eAAe,SAAUrT,GACzC0Y,EAAOrH,QAAQwB,oBACjB7S,EAAEiZ,iBAEEP,EAAOrH,QAAQyB,iBAAiB5T,OAAS,GAC3CwZ,EAAOQ,iBAAiBlZ,EAAE2Y,gBAI9B,IAAIzR,EAAOwR,EAAOK,SAAS/Y,EAAE2Y,eAE7BD,EAAOlE,cAAc,iBAAkB,CACrChJ,QAASxL,EAAE2Y,cACXzR,KAAMA,EACNuE,OAAQiN,EAAOM,UAAU9R,QAKzBwR,EAAOrH,QAAQkB,uBACjBwE,EAAK1D,iBAAiB,aAAa,SAAUrT,GAC3C,GAAe,GAAXA,EAAEmZ,MAAY,CAChB,IAAI5C,EAAcmC,EAAOK,SAAS/Y,EAAE2Y,gBAEhCD,EAAOrH,QAAQa,cAAgBwG,EAAOU,gBAAgB7C,MACxDmC,EAAOW,YAAa,EACpBX,EAAOY,YAAcZ,EAAOa,UAAYhD,EAExCmC,EAAOc,qBAIbzC,EAAK1D,iBAAiB,cAAc,SAAUrT,GAC5C,GAAI0Y,EAAOW,WAAY,CACrB,IAAI9C,EAAcmC,EAAOK,SAAS/Y,EAAE2Y,eAEpC,IAAKD,EAAOrH,QAAQa,aAAc,CAChC,IAAIuH,EAAU,IAAIrT,KAAKsS,EAAOY,YAAYpO,WAE1C,GAAIuO,EAAUlD,EAGZ,IAFA,IAAIsB,EAAW,IAAIzR,KAAKqT,EAAQ1H,cAAe0H,EAAQ3Q,WAAY2Q,EAAQ9C,UAAY,GAEhF8C,EAAUlD,GACVmC,EAAOU,gBAAgBvB,GAAU,IAItC4B,EAAQ/C,QAAQ+C,EAAQ9C,UAAY,GACpCkB,EAASnB,QAAQmB,EAASlB,UAAY,QAKxC,IAFIkB,EAAW,IAAIzR,KAAKqT,EAAQ1H,cAAe0H,EAAQ3Q,WAAY2Q,EAAQ9C,UAAY,GAEhF8C,EAAUlD,GACVmC,EAAOU,gBAAgBvB,GAAU,IAItC4B,EAAQ/C,QAAQ+C,EAAQ9C,UAAY,GACpCkB,EAASnB,QAAQmB,EAASlB,UAAY,GAI1CJ,EAAckD,EAGhB,IAAIC,EAAWhB,EAAOa,UACtBb,EAAOa,UAAYhD,EAEfmD,EAASxO,WAAawN,EAAOa,UAAUrO,WACzCwN,EAAOc,qBAQfzC,EAAK1D,iBAAiB,cAAc,SAAUrT,GAC5C,IAAK0Y,EAAOW,WAAY,CACtB,IAAInS,EAAOwR,EAAOK,SAAS/Y,EAAE2Y,eAE7BD,EAAOlE,cAAc,aAAc,CACjChJ,QAASxL,EAAE2Y,cACXzR,KAAMA,EACNuE,OAAQiN,EAAOM,UAAU9R,SAI/B6P,EAAK1D,iBAAiB,cAAc,SAAUrT,GAC5C,IAAIkH,EAAOwR,EAAOK,SAAS/Y,EAAE2Y,eAE7BD,EAAOlE,cAAc,cAAe,CAClChJ,QAASxL,EAAE2Y,cACXzR,KAAMA,EACNuE,OAAQiN,EAAOM,UAAU9R,WAK3B8H,KAAKqC,QAAQkB,sBAEf9T,OAAO4U,iBAAiB,WAAW,SAAUrT,GAC3C,GAAI0Y,EAAOW,WAAY,CACrBX,EAAOW,YAAa,EAEpBX,EAAOc,gBAEP,IAAI5O,EAAU8N,EAAOY,YAAcZ,EAAOa,UAAYb,EAAOY,YAAcZ,EAAOa,UAC9E1O,EAAU6N,EAAOa,UAAYb,EAAOY,YAAcZ,EAAOa,UAAYb,EAAOY,YAEhFZ,EAAOlE,cAAc,cAAe,CAClCkD,UAAW9M,EACX+M,QAAS9M,EACTY,OAAQiN,EAAOiB,iBAAiB/O,EAAS,IAAIxE,KAAKyE,EAAQkH,cAAelH,EAAQ/B,WAAY+B,EAAQ8L,UAAY,UAQrH3H,KAAK4K,sBACPC,cAAc7K,KAAK4K,qBACnB5K,KAAK4K,oBAAsB,MAG7B5K,KAAK4K,oBAAsBE,aAAY,WACrC,GAA8C,MAA1CpB,EAAOlN,QAAQ+F,cAAc,UAAjC,CAIA,IAAIwI,EAAerB,EAAOlN,QAAQwO,YAC9BC,EAAYvB,EAAOlN,QAAQ+F,cAAc,UAAUyI,YAAc,GACrEtB,EAAOhD,QAAU,KAGfgD,EAAOhD,QADO,EAAZuE,EAAgBF,EACD,EACI,EAAZE,EAAgBF,EACR,EACI,EAAZE,EAAgBF,EACR,EACI,EAAZE,EAAgBF,EACR,EAEA,GAGnBrB,EAAOlN,QAAQ+L,iBAAiB,oBAAoB5P,SAAQ,SAAU6P,GAC/DA,EAAMhG,UAAUP,SAAS,SAAS0E,OAAO+C,EAAOhD,YACnD,CAAC,UAAW,UAAW,UAAW,UAAW,YAAY/N,SAAQ,SAAUuS,GACzE1C,EAAMhG,UAAU9M,OAAOwV,MAEzB1C,EAAMhG,UAAUC,IAAI,SAASkE,OAAO+C,EAAOhD,iBAG9C,OAEJ,CACDpS,IAAK,gBACLN,MAAO,WACL,IAAImX,EAASnL,KAYb,GAVAA,KAAKxD,QAAQ+L,iBAAiB,gBAAgB5P,SAAQ,SAAUiQ,GAC9D,OAAOA,EAAIpG,UAAU9M,OAAO,YAE9BsK,KAAKxD,QAAQ+L,iBAAiB,sBAAsB5P,SAAQ,SAAUiQ,GACpE,OAAOA,EAAIpG,UAAU9M,OAAO,kBAE9BsK,KAAKxD,QAAQ+L,iBAAiB,oBAAoB5P,SAAQ,SAAUiQ,GAClE,OAAOA,EAAIpG,UAAU9M,OAAO,gBAG1BsK,KAAKqK,WAAY,CACnB,IAAIzO,EAAUoE,KAAKsK,YAActK,KAAKuK,UAAYvK,KAAKsK,YAActK,KAAKuK,UACtE1O,EAAUmE,KAAKuK,UAAYvK,KAAKsK,YAActK,KAAKuK,UAAYvK,KAAKsK,YACxEtK,KAAKxD,QAAQ+L,iBAAiB,oBAAoB5P,SAAQ,SAAU6P,GAClE,IAAI/B,EAAU7J,SAAS4L,EAAMhC,QAAQC,SAEjC7K,EAAQ9B,YAAc2M,GAAW5K,EAAQ/B,YAAc2M,GACzD+B,EAAMD,iBAAiB,8BAA8B5P,SAAQ,SAAUiQ,GACrE,IAAI1Q,EAAOiT,EAAOpB,SAASnB,GAEvB1Q,GAAQ0D,GAAW1D,GAAQ2D,IAC7B+M,EAAIpG,UAAUC,IAAI,SAEdvK,EAAKgE,WAAaN,EAAQM,WAC5B0M,EAAIpG,UAAUC,IAAI,eAGhBvK,EAAKgE,WAAaL,EAAQK,WAC5B0M,EAAIpG,UAAUC,IAAI,uBAQ/B,CACDnO,IAAK,sBACLN,MAAO,SAA6BwI,GAClC,IAAI1G,EAAM,EACNG,EAAO,EAEX,GACEH,GAAO0G,EAAQ4O,WAAa,EAC5BnV,GAAQuG,EAAQ6O,YAAc,EAC9B7O,EAAUA,EAAQ8O,mBACX9O,GAET,MAAO,CACL1G,IAAKA,EACLG,KAAMA,KAGT,CACD3B,IAAK,mBACLN,MAAO,SAA0BgV,GAC/B,IAAIuC,EAASvL,KAETwL,EAAc/Z,SAAS8Q,cAAc,0BAEzC,GAAoB,OAAhBiJ,EAGF,IAFAA,EAAYhV,MAAM+O,QAAU,OAErBiG,EAAY1G,YACjB0G,EAAYzG,YAAYyG,EAAY1G,iBAGtC0G,EAAc/Z,SAASC,cAAc,QACzB8Q,UAAUC,IAAI,yBAC1BhR,SAASga,KAAKtY,YAAYqY,GAO5B,IAJA,IAAItT,EAAO8H,KAAK+J,SAASf,GAErBvM,EAASuD,KAAKgK,UAAU9R,GAEnBlI,EAAI,EAAGA,EAAIyM,EAAOvM,OAAQF,IAAK,CACtC,IAAI0b,EAAYja,SAASC,cAAc,OACvCga,EAAUlJ,UAAUC,IAAI,QACxBiJ,EAAUlV,MAAMmV,YAAc,MAC9BD,EAAUlV,MAAM2S,UAAY,mBAAmBxC,OAAOlK,EAAOzM,GAAG4U,OAChE,IAAIgH,EAAmBna,SAASC,cAAc,OAC9Cka,EAAiBpJ,UAAUC,IAAI,WAC/B,IAAIxH,EAAOxJ,SAASC,cAAc,QAClCuJ,EAAKuH,UAAUC,IAAI,QACnBxH,EAAK6K,YAAcrJ,EAAOzM,GAAG8C,KAC7B8Y,EAAiBzY,YAAY8H,GAC7B,IAAI4Q,EAAOpa,SAASC,cAAc,QAClCma,EAAKrJ,UAAUC,IAAI,SACnBoJ,EAAKzO,UAAY,WACjBwO,EAAiBzY,YAAY0Y,GAC7BH,EAAUvY,YAAYyY,GAEtB5L,KAAK8L,wBAAwBJ,EAAW1L,KAAKqC,QAAQyB,iBAAkBrH,EAAOzM,IAE9Ewb,EAAYrY,YAAYuY,GAG1B,GAAIF,EAAYlN,SAASpO,OAAS,EAAG,CACnC,IAAI6b,EAAW/L,KAAKgM,oBAAoBhD,GAExCwC,EAAYhV,MAAMP,KAAO8V,EAAS9V,KAAO,GAAK,KAC9CuV,EAAYhV,MAAMT,MAAQ,GAC1ByV,EAAYhV,MAAMV,IAAMiW,EAASjW,IAAM,GAAK,KAC5C0V,EAAYhV,MAAM+O,QAAU,QAExBiG,EAAYS,wBAAwBlW,MAAQtE,SAASga,KAAKT,cAC5DQ,EAAYhV,MAAMP,KAAO,GACzBuV,EAAYhV,MAAMT,MAAQ,KAI5B9C,YAAW,WACT,OAAOsY,EAAOW,mCACb,GAEH,IAAIC,EAAmB,SAASA,EAAiB/Z,GAC5B,UAAfA,EAAMM,MAAqB8Y,EAAYvJ,SAAS7P,EAAMQ,UACxD4Y,EAAYhV,MAAM+O,QAAU,OAC5B9V,OAAO2c,oBAAoB,QAASD,GACpC1c,OAAO2c,oBAAoB,SAAUD,GACrC1c,OAAO2c,oBAAoB,SAAUD,KAIzC1c,OAAO4U,iBAAiB,QAAS8H,GACjC1c,OAAO4U,iBAAiB,SAAU8H,GAClC1c,OAAO4U,iBAAiB,SAAU8H,MAGrC,CACD7X,IAAK,0BACLN,MAAO,SAAiCiV,EAAQoD,EAAOC,GACrD,IAAIC,EAAU9a,SAASC,cAAc,OACrC6a,EAAQ/J,UAAUC,IAAI,WAEtB,IAAK,IAAIzS,EAAI,EAAGA,EAAIqc,EAAMnc,OAAQF,IAChC,IAAyB,IAArBqc,EAAMrc,GAAGwc,UAAiD,mBAArBH,EAAMrc,GAAGwc,SAA2BH,EAAMrc,GAAGwc,QAAQF,IAA9F,CAIA,IAAIG,EAAWhb,SAASC,cAAc,OACtC+a,EAASjK,UAAUC,IAAI,QACvB,IAAIiK,EAAkBjb,SAASC,cAAc,OAC7Cgb,EAAgBlK,UAAUC,IAAI,WAC9B,IAAIxH,EAAOxJ,SAASC,cAAc,QAgBlC,GAfAuJ,EAAKuH,UAAUC,IAAI,QACnBxH,EAAK6K,YAAcuG,EAAMrc,GAAGiL,KAC5ByR,EAAgBvZ,YAAY8H,GAExBoR,EAAMrc,GAAG2c,OACX,SAAWC,GACTF,EAAgBrI,iBAAiB,SAAS,WACxC5S,SAAS8Q,cAAc,0BAA0B/L,MAAM+O,QAAU,OACjE8G,EAAMO,GAAOD,MAAML,MAHvB,CAKGtc,GAGLyc,EAAStZ,YAAYuZ,GAEjBL,EAAMrc,GAAGqc,OAASA,EAAMrc,GAAGqc,MAAMnc,OAAS,EAAG,CAC/C,IAAI2b,EAAOpa,SAASC,cAAc,QAClCma,EAAKrJ,UAAUC,IAAI,SACnBoJ,EAAKzO,UAAY,WACjBsP,EAAgBvZ,YAAY0Y,GAE5B7L,KAAK8L,wBAAwBW,EAAUJ,EAAMrc,GAAGqc,MAAOC,GAGzDC,EAAQpZ,YAAYsZ,GAGlBF,EAAQjO,SAASpO,OAAS,GAC5B+Y,EAAO9V,YAAYoZ,KAGtB,CACDjY,IAAK,iCACLN,MAAO,WACL,IAAI6Y,EAAQpb,SAAS8W,iBAAiB,mCACtCsE,EAAMlU,SAAQ,SAAUmU,GACtB,IAAIC,EAAWD,EACfC,EAASvW,MAAM+O,QAAU,QACzBwH,EAASvW,MAAMqT,WAAa,YAE9BgD,EAAMlU,SAAQ,SAAUmU,GACtB,IAAIC,EAAWD,EAEXC,EAASd,wBAAwBlW,MAAQtE,SAASga,KAAKT,YACzD+B,EAASvK,UAAUC,IAAI,aAEvBsK,EAASvK,UAAU9M,OAAO,gBAG9BmX,EAAMlU,SAAQ,SAAUmU,GACtB,IAAIC,EAAWD,EACfC,EAASvW,MAAM+O,QAAU,GACzBwH,EAASvW,MAAMqT,WAAa,QAG/B,CACDvV,IAAK,WACLN,MAAO,SAAkBgV,GACvB,IAAIJ,EAAMI,EAAIzG,cAAc,gBAAgBuD,YACxC0C,EAAQQ,EAAIlH,QAAQ,oBAAoB0E,QAAQC,QAChD1L,EAAOiF,KAAKqC,QAAQhG,UACxB,OAAO,IAAIjF,KAAK2D,EAAMyN,EAAOI,KAE9B,CACDtU,IAAK,gBACLN,MAAO,SAAuBgZ,EAAWC,GACvC,IAAI7a,EAAQ,KAWZ,IAAK,IAAIpC,IATY,mBAAVkd,MACT9a,EAAQ,IAAI8a,MAAMF,IAElB5a,EAAQX,SAAS0b,YAAY,UACvBC,UAAUJ,GAAW,GAAO,GAGpC5a,EAAMib,SAAWrN,KAEHiN,EACZ7a,EAAMpC,GAAKid,EAAWjd,GAIxB,OADAgQ,KAAKxD,QAAQ8Q,cAAclb,GACpBA,IAER,CACDkC,IAAK,cACLN,MAAO,SAAqBkE,GAC1B,GAA4B,MAAxB8H,KAAKqC,QAAQzG,SAAmB1D,EAAO8H,KAAKqC,QAAQzG,SAAmC,MAAxBoE,KAAKqC,QAAQxG,SAAmB3D,EAAO8H,KAAKqC,QAAQxG,QACrH,OAAO,EAGT,GAAImE,KAAKqC,QAAQqB,iBAAiBxT,OAAS,EACzC,IAAK,IAAIqD,EAAI,EAAGA,EAAIyM,KAAKqC,QAAQqB,iBAAiBxT,OAAQqD,IACxD,GAAI2E,EAAKuP,UAAYzH,KAAKqC,QAAQqB,iBAAiBnQ,GACjD,OAAO,EAKb,GAAIyM,KAAKqC,QAAQmB,aAAatT,OAAS,EACrC,IAASqD,EAAI,EAAGA,EAAIyM,KAAKqC,QAAQmB,aAAatT,OAAQqD,IACpD,GAAI2E,EAAKgE,WAAa8D,KAAKqC,QAAQmB,aAAajQ,GAAG2I,UACjD,OAAO,EAKb,OAAO,IAER,CACD5H,IAAK,YACLN,MAAO,SAAmB4U,GACxB,GAAI5I,KAAKqC,QAAQsB,eAAezT,OAAS,EACvC,IAAK,IAAIqD,EAAI,EAAGA,EAAIyM,KAAKqC,QAAQsB,eAAezT,OAAQqD,IACtD,GAAIqV,GAAO5I,KAAKqC,QAAQsB,eAAepQ,GACrC,OAAO,EAKb,OAAO,IAQR,CACDe,IAAK,gBACLN,MAAO,SAAuBkE,GAE5B,IAAIqV,EAAc,IAAInW,KAAKc,EAAKgE,WAChCqR,EAAYxR,SAAS,EAAG,EAAG,EAAG,GAE9BwR,EAAY7F,QAAQ6F,EAAY5F,UAAY,GAAK4F,EAAY9F,SAAW,GAAK,GAE7E,IAAI+F,EAAQ,IAAIpW,KAAKmW,EAAYxK,cAAe,EAAG,GAEnD,OAAO,EAAI3M,KAAKqX,QAAQF,EAAYrR,UAAYsR,EAAMtR,WAAa,MAAW,GAAKsR,EAAM/F,SAAW,GAAK,GAAK,KAQ/G,CACDnT,IAAK,YACLN,MAAO,SAAmBkE,GACxB,OAAO8H,KAAK2K,iBAAiBzS,EAAM,IAAId,KAAKc,EAAK6K,cAAe7K,EAAK4B,WAAY5B,EAAKyP,UAAY,MASnG,CACDrT,IAAK,mBACLN,MAAO,SAA0B0U,EAAWC,GAC1C,IAAIlM,EAAS,GAEb,GAAIuD,KAAKkE,aAAewE,GAAaC,EACnC,IAAK,IAAI3Y,EAAI,EAAGA,EAAIgQ,KAAKkE,YAAYhU,OAAQF,IACvCgQ,KAAKkE,YAAYlU,GAAG0Y,UAAYC,GAAW3I,KAAKkE,YAAYlU,GAAG2Y,SAAWD,GAC5EjM,EAAOjM,KAAKwP,KAAKkE,YAAYlU,IAKnC,OAAOyM,IAWR,CACDnI,IAAK,kBACLN,MAAO,SAAyBkE,GAC9B,IAAIwV,EAAS1N,KAET2N,EAAQzN,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,GAAmBA,UAAU,GAAK,KAC5EzD,EAASuD,KAAKgK,UAAU9R,GAE5B,OAAc,IAAVyV,GACMlR,EAAOmR,MAAK,SAAUtB,GAC5B,OAAQoB,EAAOrL,QAAQiB,gBAAkBgJ,EAAI7C,YAAc6C,EAAI3D,QAAUzQ,MAExD,IAAVyV,GACDlR,EAAOmR,MAAK,SAAUtB,GAC5B,OAAQoB,EAAOrL,QAAQiB,gBAAkBgJ,EAAIhD,cAAgBgD,EAAI5D,UAAYxQ,KAGxE8H,KAAKoK,gBAAgBlS,GAAM,IAAU8H,KAAKoK,gBAAgBlS,GAAM,KAO1E,CACD5D,IAAK,UACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQhG,YAQrB,CACD/H,IAAK,UACLN,MAAO,SAAiB+G,GACtB,IAAI8S,EAAS7N,KAET8N,EAAalR,SAAS7B,GAE1B,IAAK+H,MAAMgL,GAAa,CAGtB,IAFA9N,KAAKqC,QAAQhG,UAAYyR,EAElB9N,KAAKxD,QAAQsI,YAClB9E,KAAKxD,QAAQuI,YAAY/E,KAAKxD,QAAQsI,YAGpC9E,KAAKqC,QAAQgB,eACfrD,KAAKgF,gBAGP,IAAI+I,EAAc/N,KAAKwF,cAAc,cAAe,CAClDnQ,YAAa2K,KAAKqC,QAAQhG,UAC1B2R,kBAAkB,IAGmB,mBAA5BhO,KAAKqC,QAAQjG,YACtB4D,KAAKiO,QAAO,GAEZjO,KAAKkO,kBAAiB,SAAU9R,GAC9ByR,EAAO3J,YAAc9H,EAErByR,EAAO1J,8BAEP0J,EAAOI,QAAO,OAGXF,EAAYC,kBACfhO,KAAKiO,YASZ,CACD3Z,IAAK,aACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQzG,UAWrB,CACDtH,IAAK,aACLN,MAAO,SAAoBkE,GACzB,IAAI8V,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,IAElFhI,aAAgBd,MAAiB,OAATc,KAC1B8H,KAAKqC,QAAQzG,QAAU1D,EAElB8V,GACHhO,KAAKiO,YAQV,CACD3Z,IAAK,aACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQxG,UAWrB,CACDvH,IAAK,aACLN,MAAO,SAAoBkE,GACzB,IAAI8V,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,IAElFhI,aAAgBd,MAAiB,OAATc,KAC1B8H,KAAKqC,QAAQxG,QAAU3D,EAElB8V,GACHhO,KAAKiO,YAQV,CACD3Z,IAAK,WACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQ7L,QAWrB,CACDlC,IAAK,WACLN,MAAO,SAAkBwC,GACvB,IAAIwX,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GACtFF,KAAKqC,QAAQ7L,MAAiB,cAATA,GAAkC,UAATA,GAA8B,UAATA,EAAoBA,EAAQ,SAE1FwX,GACHhO,KAAKiO,WAOR,CACD3Z,IAAK,kBACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQa,eAQrB,CACD5O,IAAK,kBACLN,MAAO,SAAyBkP,GAC9BlD,KAAKqC,QAAQa,aAAeA,IAM7B,CACD5O,IAAK,uBACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQc,oBAWrB,CACD7O,IAAK,uBACLN,MAAO,SAA8BmP,GACnC,IAAI6K,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GACtFF,KAAKqC,QAAQc,kBAAoBA,EAE5B6K,GACHhO,KAAKiO,WAOR,CACD3Z,IAAK,mBACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQgB,gBAWrB,CACD/O,IAAK,mBACLN,MAAO,SAA0BqP,GAC/B,IAAI2K,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GACtFF,KAAKqC,QAAQgB,cAAgBA,EAExB2K,GACHhO,KAAKiO,WAOR,CACD3Z,IAAK,+BACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQe,4BAWrB,CACD9O,IAAK,+BACLN,MAAO,SAAsCoP,GAC3C,IAAI4K,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GACtFF,KAAKqC,QAAQe,0BAA4BA,EAEpC4K,GACHhO,KAAKiO,WAOR,CACD3Z,IAAK,mBACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQiB,gBAWrB,CACDhP,IAAK,mBACLN,MAAO,SAA0BsP,GAC/B,IAAI0K,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GACtFF,KAAKqC,QAAQiB,cAAgBA,EAExB0K,GACHhO,KAAKiO,WAOR,CACD3Z,IAAK,0BACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQkB,uBAWrB,CACDjP,IAAK,0BACLN,MAAO,SAAiCuP,GACtC,IAAIyK,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GACtFF,KAAKqC,QAAQkB,qBAAuBA,EAE/ByK,GACHhO,KAAKiO,WAOR,CACD3Z,IAAK,kBACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQmB,eAWrB,CACDlP,IAAK,kBACLN,MAAO,SAAyBwP,GAC9B,IAAIwK,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GACtFF,KAAKqC,QAAQmB,aAAeA,aAAwBC,MAAQD,EAAe,GAEtEwK,GACHhO,KAAKiO,WAOR,CACD3Z,IAAK,sBACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQqB,mBAWrB,CACDpP,IAAK,sBACLN,MAAO,SAA6B0P,GAClC,IAAIsK,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GACtFF,KAAKqC,QAAQqB,iBAAmBA,aAA4BD,MAAQC,EAAmB,GAElFsK,GACHhO,KAAKiO,WAOR,CACD3Z,IAAK,oBACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQsB,iBAWrB,CACDrP,IAAK,oBACLN,MAAO,SAA2B2P,GAChC,IAAIqK,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GACtFF,KAAKqC,QAAQsB,eAAiBA,aAA0BF,MAAQE,EAAiB,GAE5EqK,GACHhO,KAAKiO,WAOR,CACD3Z,IAAK,sBACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQuB,mBAWrB,CACDtP,IAAK,sBACLN,MAAO,SAA6B4P,GAClC,IAAIoK,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GACtFF,KAAKqC,QAAQuB,iBAAmBA,EAE3BoK,GACHhO,KAAKiO,WAOR,CACD3Z,IAAK,uBACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQwB,oBAWrB,CACDvP,IAAK,uBACLN,MAAO,SAA8B6P,GACnC,IAAImK,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GACtFF,KAAKqC,QAAQwB,kBAAoBA,EAE5BmK,GACHhO,KAAKiO,WAOR,CACD3Z,IAAK,sBACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQyB,mBAWrB,CACDxP,IAAK,sBACLN,MAAO,SAA6B8P,GAClC,IAAIkK,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GACtFF,KAAKqC,QAAQyB,iBAAmBA,aAA4BL,MAAQK,EAAmB,GAElFkK,GACHhO,KAAKiO,WAOR,CACD3Z,IAAK,uBACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQ0B,oBAWrB,CACDzP,IAAK,uBACLN,MAAO,SAA8B+P,GACnC,IAAIiK,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GACtFF,KAAKqC,QAAQ0B,kBAAiD,mBAAtBA,EAAmCA,EAAoB,KAE1FiK,GACHhO,KAAKiO,WAOR,CACD3Z,IAAK,8BACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQ9F,2BAWrB,CACDjI,IAAK,8BACLN,MAAO,SAAqCuI,GAC1C,IAAIyR,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GACtFF,KAAKqC,QAAQ9F,yBAA+D,mBAA7BA,EAA0CA,EAA2B,KAE/GyR,GACHhO,KAAKiO,WAOR,CACD3Z,IAAK,cACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQW,WAWrB,CACD1O,IAAK,cACLN,MAAO,SAAqBgP,GAC1B,IAAIgL,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GAEtE,MAAZ8C,GAAkD,MAA9B7G,EAAS8G,QAAQD,KACvChD,KAAKqC,QAAQW,SAAWA,EAEnBgL,GACHhO,KAAKiO,YAQV,CACD3Z,IAAK,gBACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQjG,aAWrB,CACD9H,IAAK,gBACLN,MAAO,SAAuBoI,GAC5B,IAAI+R,EAASnO,KAETgO,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GACtFF,KAAKqC,QAAQjG,WAAaA,aAAsBqH,OAA+B,mBAAfrH,EAA4BA,EAAa,GAElE,mBAA5B4D,KAAKqC,QAAQjG,YACtB4D,KAAKiO,QAAO,GAEZjO,KAAKkO,kBAAiB,SAAU9R,GAC9B+R,EAAOjK,YAAc9H,EAErB+R,EAAOhK,8BAEPgK,EAAOF,QAAO,QAGhBjO,KAAKkE,YAAclE,KAAKqC,QAAQjG,WAEhC4D,KAAKmE,8BAEA6J,GACHhO,KAAKiO,YAQV,CACD3Z,IAAK,eACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQ2B,UAAYhE,KAAKqC,QAAQ2B,UAAY7H,EAAS8G,QAAQjD,KAAKqC,QAAQW,UAAUgB,YAWlG,CACD1P,IAAK,eACLN,MAAO,SAAsBgQ,GAC3B,IAAIgK,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GACtFF,KAAKqC,QAAQ2B,UAAalB,MAAMlG,SAASoH,IAAoC,KAAtBpH,SAASoH,GAE3DgK,GACHhO,KAAKiO,WAOR,CACD3Z,IAAK,qBACLN,MAAO,WACL,OAAOgM,KAAKqC,QAAQ4B,kBAQrB,CACD3P,IAAK,qBACLN,MAAO,SAA4BiQ,GACjCjE,KAAKqC,QAAQ4B,gBAA6C,iBAApBA,GAAgCA,aAA2B3B,YAAc2B,EAAkB,OAYlI,CACD3P,IAAK,WACLN,MAAO,SAAkBsY,GACvB,IAAI0B,EAAmB9N,UAAUhQ,OAAS,QAAsB8C,IAAjBkN,UAAU,IAAmBA,UAAU,GAEtFF,KAAKkE,YAAY1T,KAAK8b,GAEjB0B,GACHhO,KAAKiO,aAKJ9R,EA72DmB,GAg3D5BkE,EAAkB,QAAIlE,EAEtBmF,EAAgBnF,EAAU,UAAW,CACnCiS,GAAI,CACFC,KAAM,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YACzEC,UAAW,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACtDjH,QAAS,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAC9ChC,OAAQ,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YACvHkJ,YAAa,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3FpH,UAAW,IACXnD,UAAW,KAIf1C,EAAgBnF,EAAU,SAAU,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,YAEpB,YAAjD,oBAAX1M,OAAyB,YAAc6Q,EAAQ7Q,WACzDA,OAAO0M,SAAWA,EAClB1K,SAAS4S,iBAAiB,oBAAoB,WAC5C5S,SAAS8W,iBAAiB,6BAA6B5P,SAAQ,SAAU6D,GACvE,OAAO,IAAIL,EAASK,YAr9DG,gC,uECF/B,+O,+DCSA,IAAI/F,EAAI,WACN,OAAOuJ,MAAyB,iBAATD,MAAqBA,KADtC,IAEAyO,SAAS,cAATA,GAIJC,EAAahY,EAAEiY,oBACjBve,OAAOwe,oBAAoBlY,GAAGkH,QAAQ,uBAAyB,EAG7DiR,EAAaH,GAAchY,EAAEiY,mBAOjC,GAJAjY,EAAEiY,wBAAqB1b,EAEvB1D,EAAOD,QAAU,EAAQ,IAErBof,EAEFhY,EAAEiY,mBAAqBE,OAGvB,WACSnY,EAAEiY,mBACT,MAAM1d,GACNyF,EAAEiY,wBAAqB1b,I,kBC3B1B,SAAU6b,GACT,aAEA,IAEI7b,EAFA8b,EAAK3e,OAAOC,UACZ2e,EAASD,EAAGze,eAEZ2e,EAA4B,mBAAXlb,OAAwBA,OAAS,GAClDmb,EAAiBD,EAAQxO,UAAY,aACrC0O,EAAsBF,EAAQG,eAAiB,kBAC/CC,EAAoBJ,EAAQjb,aAAe,gBAE3Csb,EAA6B,iBAAX/f,EAClBggB,EAAUT,EAAOH,mBACrB,GAAIY,EACED,IAGF/f,EAAOD,QAAUigB,OAJrB,EAaAA,EAAUT,EAAOH,mBAAqBW,EAAW/f,EAAOD,QAAU,IAc1DkgB,KAAOA,EAoBf,IAAIC,EAAyB,iBACzBC,EAAyB,iBACzBC,EAAoB,YACpBC,EAAoB,YAIpBC,EAAmB,GAYnBC,EAAoB,GACxBA,EAAkBZ,GAAkB,WAClC,OAAOjP,MAGT,IAAI8P,EAAW3f,OAAO4f,eAClBC,EAA0BF,GAAYA,EAASA,EAASG,EAAO,MAC/DD,GACAA,IAA4BlB,GAC5BC,EAAOze,KAAK0f,EAAyBf,KAGvCY,EAAoBG,GAGtB,IAAIE,EAAKC,EAA2B/f,UAClCggB,EAAUhgB,UAAYD,OAAOkE,OAAOwb,GACtCQ,EAAkBjgB,UAAY8f,EAAGzP,YAAc0P,EAC/CA,EAA2B1P,YAAc4P,EACzCF,EAA2Bf,GACzBiB,EAAkBC,YAAc,oBAYlChB,EAAQiB,oBAAsB,SAASC,GACrC,IAAIC,EAAyB,mBAAXD,GAAyBA,EAAO/P,YAClD,QAAOgQ,IACHA,IAASJ,GAG2B,uBAAnCI,EAAKH,aAAeG,EAAK3d,QAIhCwc,EAAQoB,KAAO,SAASF,GAUtB,OATIrgB,OAAOwgB,eACTxgB,OAAOwgB,eAAeH,EAAQL,IAE9BK,EAAOI,UAAYT,EACbf,KAAqBoB,IACzBA,EAAOpB,GAAqB,sBAGhCoB,EAAOpgB,UAAYD,OAAOkE,OAAO6b,GAC1BM,GAOTlB,EAAQuB,MAAQ,SAASnR,GACvB,MAAO,CAAEoR,QAASpR,IAsEpBqR,EAAsBC,EAAc5gB,WACpC4gB,EAAc5gB,UAAU8e,GAAuB,WAC7C,OAAOlP,MAETsP,EAAQ0B,cAAgBA,EAKxB1B,EAAQ2B,MAAQ,SAASC,EAASC,EAASpR,EAAMqR,GAC/C,IAAIC,EAAO,IAAIL,EACbzB,EAAK2B,EAASC,EAASpR,EAAMqR,IAG/B,OAAO9B,EAAQiB,oBAAoBY,GAC/BE,EACAA,EAAKC,OAAOzR,MAAK,SAAS8E,GACxB,OAAOA,EAAO/E,KAAO+E,EAAO3Q,MAAQqd,EAAKC,WAsKjDP,EAAsBb,GAEtBA,EAAGd,GAAqB,YAOxBc,EAAGjB,GAAkB,WACnB,OAAOjP,MAGTkQ,EAAGnK,SAAW,WACZ,MAAO,sBAkCTuJ,EAAQtW,KAAO,SAASvE,GACtB,IAAIuE,EAAO,GACX,IAAK,IAAI1E,KAAOG,EACduE,EAAKxI,KAAK8D,GAMZ,OAJA0E,EAAKmC,UAIE,SAASmW,IACd,KAAOtY,EAAK9I,QAAQ,CAClB,IAAIoE,EAAM0E,EAAKuY,MACf,GAAIjd,KAAOG,EAGT,OAFA6c,EAAKtd,MAAQM,EACbgd,EAAK1R,MAAO,EACL0R,EAQX,OADAA,EAAK1R,MAAO,EACL0R,IAsCXhC,EAAQW,OAASA,EAMjBuB,EAAQphB,UAAY,CAClBqQ,YAAa+Q,EAEbC,MAAO,SAASC,GAcd,GAbA1R,KAAK2R,KAAO,EACZ3R,KAAKsR,KAAO,EAGZtR,KAAK4R,KAAO5R,KAAK6R,MAAQ7e,EACzBgN,KAAKJ,MAAO,EACZI,KAAK8R,SAAW,KAEhB9R,KAAK+R,OAAS,OACd/R,KAAKN,IAAM1M,EAEXgN,KAAKgS,WAAWrZ,QAAQsZ,IAEnBP,EACH,IAAK,IAAI5e,KAAQkN,KAEQ,MAAnBlN,EAAKof,OAAO,IACZnD,EAAOze,KAAK0P,KAAMlN,KACjBgQ,OAAOhQ,EAAKkC,MAAM,MACrBgL,KAAKlN,GAAQE,IAMrBmf,KAAM,WACJnS,KAAKJ,MAAO,EAEZ,IACIwS,EADYpS,KAAKgS,WAAW,GACLK,WAC3B,GAAwB,UAApBD,EAAW1f,KACb,MAAM0f,EAAW1S,IAGnB,OAAOM,KAAKsS,MAGdC,kBAAmB,SAASC,GAC1B,GAAIxS,KAAKJ,KACP,MAAM4S,EAGR,IAAIC,EAAUzS,KACd,SAAS0S,EAAOC,EAAKC,GAYnB,OAXAC,EAAOngB,KAAO,QACdmgB,EAAOnT,IAAM8S,EACbC,EAAQnB,KAAOqB,EAEXC,IAGFH,EAAQV,OAAS,OACjBU,EAAQ/S,IAAM1M,KAGN4f,EAGZ,IAAK,IAAI5iB,EAAIgQ,KAAKgS,WAAW9hB,OAAS,EAAGF,GAAK,IAAKA,EAAG,CACpD,IAAI4I,EAAQoH,KAAKgS,WAAWhiB,GACxB6iB,EAASja,EAAMyZ,WAEnB,GAAqB,SAAjBzZ,EAAMka,OAIR,OAAOJ,EAAO,OAGhB,GAAI9Z,EAAMka,QAAU9S,KAAK2R,KAAM,CAC7B,IAAIoB,EAAWhE,EAAOze,KAAKsI,EAAO,YAC9Boa,EAAajE,EAAOze,KAAKsI,EAAO,cAEpC,GAAIma,GAAYC,EAAY,CAC1B,GAAIhT,KAAK2R,KAAO/Y,EAAMqa,SACpB,OAAOP,EAAO9Z,EAAMqa,UAAU,GACzB,GAAIjT,KAAK2R,KAAO/Y,EAAMsa,WAC3B,OAAOR,EAAO9Z,EAAMsa,iBAGjB,GAAIH,GACT,GAAI/S,KAAK2R,KAAO/Y,EAAMqa,SACpB,OAAOP,EAAO9Z,EAAMqa,UAAU,OAG3B,KAAID,EAMT,MAAM,IAAI7gB,MAAM,0CALhB,GAAI6N,KAAK2R,KAAO/Y,EAAMsa,WACpB,OAAOR,EAAO9Z,EAAMsa,gBAU9BC,OAAQ,SAASzgB,EAAMgN,GACrB,IAAK,IAAI1P,EAAIgQ,KAAKgS,WAAW9hB,OAAS,EAAGF,GAAK,IAAKA,EAAG,CACpD,IAAI4I,EAAQoH,KAAKgS,WAAWhiB,GAC5B,GAAI4I,EAAMka,QAAU9S,KAAK2R,MACrB5C,EAAOze,KAAKsI,EAAO,eACnBoH,KAAK2R,KAAO/Y,EAAMsa,WAAY,CAChC,IAAIE,EAAexa,EACnB,OAIAwa,IACU,UAAT1gB,GACS,aAATA,IACD0gB,EAAaN,QAAUpT,GACvBA,GAAO0T,EAAaF,aAGtBE,EAAe,MAGjB,IAAIP,EAASO,EAAeA,EAAaf,WAAa,GAItD,OAHAQ,EAAOngB,KAAOA,EACdmgB,EAAOnT,IAAMA,EAET0T,GACFpT,KAAK+R,OAAS,OACd/R,KAAKsR,KAAO8B,EAAaF,WAClBtD,GAGF5P,KAAKqT,SAASR,IAGvBQ,SAAU,SAASR,EAAQS,GACzB,GAAoB,UAAhBT,EAAOngB,KACT,MAAMmgB,EAAOnT,IAcf,MAXoB,UAAhBmT,EAAOngB,MACS,aAAhBmgB,EAAOngB,KACTsN,KAAKsR,KAAOuB,EAAOnT,IACM,WAAhBmT,EAAOngB,MAChBsN,KAAKsS,KAAOtS,KAAKN,IAAMmT,EAAOnT,IAC9BM,KAAK+R,OAAS,SACd/R,KAAKsR,KAAO,OACa,WAAhBuB,EAAOngB,MAAqB4gB,IACrCtT,KAAKsR,KAAOgC,GAGP1D,GAGT2D,OAAQ,SAASL,GACf,IAAK,IAAIljB,EAAIgQ,KAAKgS,WAAW9hB,OAAS,EAAGF,GAAK,IAAKA,EAAG,CACpD,IAAI4I,EAAQoH,KAAKgS,WAAWhiB,GAC5B,GAAI4I,EAAMsa,aAAeA,EAGvB,OAFAlT,KAAKqT,SAASza,EAAMyZ,WAAYzZ,EAAM0a,UACtCrB,EAAcrZ,GACPgX,IAKb,MAAS,SAASkD,GAChB,IAAK,IAAI9iB,EAAIgQ,KAAKgS,WAAW9hB,OAAS,EAAGF,GAAK,IAAKA,EAAG,CACpD,IAAI4I,EAAQoH,KAAKgS,WAAWhiB,GAC5B,GAAI4I,EAAMka,SAAWA,EAAQ,CAC3B,IAAID,EAASja,EAAMyZ,WACnB,GAAoB,UAAhBQ,EAAOngB,KAAkB,CAC3B,IAAI8gB,EAASX,EAAOnT,IACpBuS,EAAcrZ,GAEhB,OAAO4a,GAMX,MAAM,IAAIrhB,MAAM,0BAGlBshB,cAAe,SAASC,EAAUC,EAAYC,GAa5C,OAZA5T,KAAK8R,SAAW,CACdtR,SAAUyP,EAAOyD,GACjBC,WAAYA,EACZC,QAASA,GAGS,SAAhB5T,KAAK+R,SAGP/R,KAAKN,IAAM1M,GAGN4c,IAnqBX,SAASL,EAAK2B,EAASC,EAASpR,EAAMqR,GAEpC,IAAIyC,EAAiB1C,GAAWA,EAAQ/gB,qBAAqBggB,EAAYe,EAAUf,EAC/E0D,EAAY3jB,OAAOkE,OAAOwf,EAAezjB,WACzCqiB,EAAU,IAAIjB,EAAQJ,GAAe,IAMzC,OAFA0C,EAAUC,QAkMZ,SAA0B7C,EAASnR,EAAM0S,GACvC,IAAIuB,EAAQxE,EAEZ,OAAO,SAAgBuC,EAAQrS,GAC7B,GAAIsU,IAAUtE,EACZ,MAAM,IAAIvd,MAAM,gCAGlB,GAAI6hB,IAAUrE,EAAmB,CAC/B,GAAe,UAAXoC,EACF,MAAMrS,EAKR,OAAOuU,IAMT,IAHAxB,EAAQV,OAASA,EACjBU,EAAQ/S,IAAMA,IAED,CACX,IAAIoS,EAAWW,EAAQX,SACvB,GAAIA,EAAU,CACZ,IAAIoC,EAAiBC,EAAoBrC,EAAUW,GACnD,GAAIyB,EAAgB,CAClB,GAAIA,IAAmBtE,EAAkB,SACzC,OAAOsE,GAIX,GAAuB,SAAnBzB,EAAQV,OAGVU,EAAQb,KAAOa,EAAQZ,MAAQY,EAAQ/S,SAElC,GAAuB,UAAnB+S,EAAQV,OAAoB,CACrC,GAAIiC,IAAUxE,EAEZ,MADAwE,EAAQrE,EACF8C,EAAQ/S,IAGhB+S,EAAQF,kBAAkBE,EAAQ/S,SAEN,WAAnB+S,EAAQV,QACjBU,EAAQU,OAAO,SAAUV,EAAQ/S,KAGnCsU,EAAQtE,EAER,IAAImD,EAASuB,EAASlD,EAASnR,EAAM0S,GACrC,GAAoB,WAAhBI,EAAOngB,KAAmB,CAO5B,GAJAshB,EAAQvB,EAAQ7S,KACZ+P,EACAF,EAEAoD,EAAOnT,MAAQkQ,EACjB,SAGF,MAAO,CACL5b,MAAO6e,EAAOnT,IACdE,KAAM6S,EAAQ7S,MAGS,UAAhBiT,EAAOngB,OAChBshB,EAAQrE,EAGR8C,EAAQV,OAAS,QACjBU,EAAQ/S,IAAMmT,EAAOnT,OA1QP2U,CAAiBnD,EAASnR,EAAM0S,GAE7CqB,EAcT,SAASM,EAAStU,EAAIS,EAAKb,GACzB,IACE,MAAO,CAAEhN,KAAM,SAAUgN,IAAKI,EAAGxP,KAAKiQ,EAAKb,IAC3C,MAAO9K,GACP,MAAO,CAAElC,KAAM,QAASgN,IAAK9K,IAiBjC,SAASwb,KACT,SAASC,KACT,SAASF,KA4BT,SAASY,EAAsB3gB,GAC7B,CAAC,OAAQ,QAAS,UAAUuI,SAAQ,SAASoZ,GAC3C3hB,EAAU2hB,GAAU,SAASrS,GAC3B,OAAOM,KAAK+T,QAAQhC,EAAQrS,OAoClC,SAASsR,EAAc8C,GACrB,SAASQ,EAAOvC,EAAQrS,EAAKrO,EAASC,GACpC,IAAIuhB,EAASuB,EAASN,EAAU/B,GAAS+B,EAAWpU,GACpD,GAAoB,UAAhBmT,EAAOngB,KAEJ,CACL,IAAIiS,EAASkO,EAAOnT,IAChB1L,EAAQ2Q,EAAO3Q,MACnB,OAAIA,GACiB,iBAAVA,GACP+a,EAAOze,KAAK0D,EAAO,WACd5C,QAAQC,QAAQ2C,EAAM8c,SAASjR,MAAK,SAAS7L,GAClDsgB,EAAO,OAAQtgB,EAAO3C,EAASC,MAC9B,SAASsD,GACV0f,EAAO,QAAS1f,EAAKvD,EAASC,MAI3BF,QAAQC,QAAQ2C,GAAO6L,MAAK,SAAS0U,GAI1C5P,EAAO3Q,MAAQugB,EACfljB,EAAQsT,MACP,SAASzS,GAGV,OAAOoiB,EAAO,QAASpiB,EAAOb,EAASC,MAvBzCA,EAAOuhB,EAAOnT,KA4BlB,IAAI8U,EAgCJxU,KAAK+T,QA9BL,SAAiBhC,EAAQrS,GACvB,SAAS+U,IACP,OAAO,IAAIrjB,SAAQ,SAASC,EAASC,GACnCgjB,EAAOvC,EAAQrS,EAAKrO,EAASC,MAIjC,OAAOkjB,EAaLA,EAAkBA,EAAgB3U,KAChC4U,EAGAA,GACEA,KA+GV,SAASN,EAAoBrC,EAAUW,GACrC,IAAIV,EAASD,EAAStR,SAASiS,EAAQV,QACvC,GAAIA,IAAW/e,EAAW,CAKxB,GAFAyf,EAAQX,SAAW,KAEI,UAAnBW,EAAQV,OAAoB,CAC9B,GAAID,EAAStR,SAASkU,SAGpBjC,EAAQV,OAAS,SACjBU,EAAQ/S,IAAM1M,EACdmhB,EAAoBrC,EAAUW,GAEP,UAAnBA,EAAQV,QAGV,OAAOnC,EAIX6C,EAAQV,OAAS,QACjBU,EAAQ/S,IAAM,IAAImB,UAChB,kDAGJ,OAAO+O,EAGT,IAAIiD,EAASuB,EAASrC,EAAQD,EAAStR,SAAUiS,EAAQ/S,KAEzD,GAAoB,UAAhBmT,EAAOngB,KAIT,OAHA+f,EAAQV,OAAS,QACjBU,EAAQ/S,IAAMmT,EAAOnT,IACrB+S,EAAQX,SAAW,KACZlC,EAGT,IAAIjQ,EAAOkT,EAAOnT,IAElB,OAAMC,EAOFA,EAAKC,MAGP6S,EAAQX,EAAS6B,YAAchU,EAAK3L,MAGpCye,EAAQnB,KAAOQ,EAAS8B,QAQD,WAAnBnB,EAAQV,SACVU,EAAQV,OAAS,OACjBU,EAAQ/S,IAAM1M,GAUlByf,EAAQX,SAAW,KACZlC,GANEjQ,GA3BP8S,EAAQV,OAAS,QACjBU,EAAQ/S,IAAM,IAAImB,UAAU,oCAC5B4R,EAAQX,SAAW,KACZlC,GAoDX,SAAS+E,EAAaC,GACpB,IAAIhc,EAAQ,CAAEka,OAAQ8B,EAAK,IAEvB,KAAKA,IACPhc,EAAMqa,SAAW2B,EAAK,IAGpB,KAAKA,IACPhc,EAAMsa,WAAa0B,EAAK,GACxBhc,EAAM0a,SAAWsB,EAAK,IAGxB5U,KAAKgS,WAAWxhB,KAAKoI,GAGvB,SAASqZ,EAAcrZ,GACrB,IAAIia,EAASja,EAAMyZ,YAAc,GACjCQ,EAAOngB,KAAO,gBACPmgB,EAAOnT,IACd9G,EAAMyZ,WAAaQ,EAGrB,SAASrB,EAAQJ,GAIfpR,KAAKgS,WAAa,CAAC,CAAEc,OAAQ,SAC7B1B,EAAYzY,QAAQgc,EAAc3U,MAClCA,KAAKyR,OAAM,GA8Bb,SAASxB,EAAOyD,GACd,GAAIA,EAAU,CACZ,IAAImB,EAAiBnB,EAASzE,GAC9B,GAAI4F,EACF,OAAOA,EAAevkB,KAAKojB,GAG7B,GAA6B,mBAAlBA,EAASpC,KAClB,OAAOoC,EAGT,IAAK5Q,MAAM4Q,EAASxjB,QAAS,CAC3B,IAAIF,GAAK,EAAGshB,EAAO,SAASA,IAC1B,OAASthB,EAAI0jB,EAASxjB,QACpB,GAAI6e,EAAOze,KAAKojB,EAAU1jB,GAGxB,OAFAshB,EAAKtd,MAAQ0f,EAAS1jB,GACtBshB,EAAK1R,MAAO,EACL0R,EAOX,OAHAA,EAAKtd,MAAQhB,EACbse,EAAK1R,MAAO,EAEL0R,GAGT,OAAOA,EAAKA,KAAOA,GAKvB,MAAO,CAAEA,KAAM2C,GAIjB,SAASA,IACP,MAAO,CAAEjgB,MAAOhB,EAAW4M,MAAM,IAxfpC,CAssBC,WACE,OAAOI,MAAyB,iBAATD,MAAqBA,KAD9C,IAEQyO,SAAS,cAATA","file":"js/origin.338d37ba3182060cc069.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"origin\"] = factory();\n\telse\n\t\troot[\"swh\"] = root[\"swh\"] || {}, root[\"swh\"][\"origin\"] = factory();\n})(window, function() {\nreturn "," \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t7: 0\n \t};\n\n\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"3\":\"d3\"}[chunkId]||chunkId) + \".\" + {\"3\":\"9cadc5189c8430703daf\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 254);\n","module.exports = require(\"regenerator-runtime\");\n","/**\n * Copyright (C) 2018-2019  The Software Heritage developers\n * See the AUTHORS file at the top-level directory of this distribution\n * License: GNU Affero General Public License version 3, or any later version\n * See top-level LICENSE file for more information\n */\n\n// Creation of a stacked histogram with D3.js for software origin visits history\n// Parameters description:\n//  - container: selector for the div that will contain the histogram\n//  - visitsData: raw swh origin visits data\n//  - currentYear: the visits year to display by default\n//  - yearClickCallback: callback when the user selects a year through the histogram\n\nexport async function createVisitsHistogram(container, visitsData, currentYear, yearClickCallback) {\n\n  const d3 = await import(/* webpackChunkName: \"d3\" */ 'utils/d3');\n\n  // remove previously created histogram and tooltip if any\n  d3.select(container).select('svg').remove();\n  d3.select('div.d3-tooltip').remove();\n\n  // histogram size and margins\n  let width = 1000;\n  let height = 200;\n  let margin = {top: 20, right: 80, bottom: 30, left: 50};\n\n  // create responsive svg\n  let svg = d3.select(container)\n    .attr('style',\n          'padding-bottom: ' + Math.ceil(height * 100 / width) + '%')\n    .append('svg')\n    .attr('viewBox', '0 0 ' + width + ' ' + height);\n\n  // create tooltip div\n  let tooltip = d3.select('body')\n    .append('div')\n    .attr('class', 'd3-tooltip')\n    .style('opacity', 0);\n\n  // update width and height without margins\n  width = width - margin.left - margin.right;\n  height = height - margin.top - margin.bottom;\n\n  // create main svg group element\n  let g = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n  // create x scale\n  let x = d3.scaleTime().rangeRound([0, width]);\n\n  // create y scale\n  let y = d3.scaleLinear().range([height, 0]);\n\n  // create ordinal colorscale mapping visit status\n  let colors = d3.scaleOrdinal()\n    .domain(['full', 'partial', 'failed', 'ongoing'])\n    .range(['#008000', '#edc344', '#ff0000', '#0000ff']);\n\n  // first swh crawls were made in 2015\n  let startYear = 2015;\n  // set latest display year as the current one\n  let now = new Date();\n  let endYear = now.getUTCFullYear() + 1;\n  let monthExtent = [new Date(Date.UTC(startYear, 0, 1)), new Date(Date.UTC(endYear, 0, 1))];\n\n  // create months bins based on setup extent\n  let monthBins = d3.timeMonths(d3.timeMonth.offset(monthExtent[0], -1), monthExtent[1]);\n  // create years bins based on setup extent\n  let yearBins = d3.timeYears(monthExtent[0], monthExtent[1]);\n\n  // set x scale domain\n  x.domain(d3.extent(monthBins));\n\n  // use D3 histogram layout to create a function that will bin the visits by month\n  let binByMonth = d3.histogram()\n    .value(d => d.date)\n    .domain(x.domain())\n    .thresholds(monthBins);\n\n  // use D3 nest function to group the visits by status\n  let visitsByStatus = d3.groups(visitsData, d => d['status'])\n    .sort((a, b) => d3.ascending(a[0], b[0]));\n\n  // prepare data in order to be able to stack visit statuses by month\n  let statuses = [];\n  let histData = [];\n  for (let i = 0; i < monthBins.length; ++i) {\n    histData[i] = {};\n  }\n  visitsByStatus.forEach(entry => {\n    statuses.push(entry[0]);\n    let monthsData = binByMonth(entry[1]);\n    for (let i = 0; i < monthsData.length; ++i) {\n      histData[i]['x0'] = monthsData[i]['x0'];\n      histData[i]['x1'] = monthsData[i]['x1'];\n      histData[i][entry[0]] = monthsData[i];\n    }\n  });\n\n  // create function to stack visits statuses by month\n  let stacked = d3.stack()\n    .keys(statuses)\n    .value((d, key) => d[key].length);\n\n  // compute the maximum amount of visits by month\n  let yMax = d3.max(histData, d => {\n    let total = 0;\n    for (let i = 0; i < statuses.length; ++i) {\n      total += d[statuses[i]].length;\n    }\n    return total;\n  });\n\n  // set y scale domain\n  y.domain([0, yMax]);\n\n  // compute ticks values for the y axis\n  let step = 5;\n  let yTickValues = [];\n  for (let i = 0; i <= yMax / step; ++i) {\n    yTickValues.push(i * step);\n  }\n  if (yTickValues.length === 0) {\n    for (let i = 0; i <= yMax; ++i) {\n      yTickValues.push(i);\n    }\n  } else if (yMax % step !== 0) {\n    yTickValues.push(yMax);\n  }\n\n  // add histogram background grid\n  g.append('g')\n    .attr('class', 'grid')\n    .call(d3.axisLeft(y)\n      .tickValues(yTickValues)\n      .tickSize(-width)\n      .tickFormat(''));\n\n  // create one fill only rectangle by displayed year\n  // each rectangle will be made visible when hovering the mouse over a year range\n  // user will then be able to select a year by clicking in the rectangle\n\n  g.append('g')\n    .selectAll('rect')\n    .data(yearBins)\n    .enter().append('rect')\n    .attr('class', d => 'year' + d.getUTCFullYear())\n    .attr('fill', 'red')\n    .attr('fill-opacity', d => d.getUTCFullYear() === currentYear ? 0.3 : 0)\n    .attr('stroke', 'none')\n    .attr('x', d => {\n      let date = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n      return x(date);\n    })\n    .attr('y', 0)\n    .attr('height', height)\n    .attr('width', d => {\n      let date = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n      let yearWidth = x(d3.timeYear.offset(date, 1)) - x(date);\n      return yearWidth;\n    })\n    // mouse event callbacks used to show rectangle years\n    // when hovering the mouse over the histograms\n    .on('mouseover', (event, d) => {\n      svg.selectAll('rect.year' + d.getUTCFullYear())\n        .attr('fill-opacity', 0.5);\n    })\n    .on('mouseout', (event, d) => {\n      svg.selectAll('rect.year' + d.getUTCFullYear())\n        .attr('fill-opacity', 0);\n      svg.selectAll('rect.year' + currentYear)\n        .attr('fill-opacity', 0.3);\n    })\n    // callback to select a year after a mouse click\n    // in a rectangle year\n    .on('click', (event, d) => {\n      svg.selectAll('rect.year' + currentYear)\n        .attr('fill-opacity', 0);\n      svg.selectAll('rect.yearoutline' + currentYear)\n        .attr('stroke', 'none');\n      currentYear = d.getUTCFullYear();\n      svg.selectAll('rect.year' + currentYear)\n        .attr('fill-opacity', 0.5);\n      svg.selectAll('rect.yearoutline' + currentYear)\n        .attr('stroke', 'black');\n      yearClickCallback(currentYear);\n    });\n\n  // create the stacked histogram of visits\n  g.append('g')\n    .selectAll('g')\n    .data(stacked(histData))\n    .enter().append('g')\n    .attr('fill', d => colors(d.key))\n    .selectAll('rect')\n    .data(d => d)\n    .enter().append('rect')\n    .attr('class', d => 'month' + d.data.x1.getMonth())\n    .attr('x', d => x(d.data.x0))\n    .attr('y', d => y(d[1]))\n    .attr('height', d => y(d[0]) - y(d[1]))\n    .attr('width', d => x(d.data.x1) - x(d.data.x0) - 1)\n    // mouse event callbacks used to show rectangle years\n    // but also to show tooltip when hovering the mouse\n    // over the histogram bars\n    .on('mouseover', (event, d) => {\n      svg.selectAll('rect.year' + d.data.x1.getUTCFullYear())\n        .attr('fill-opacity', 0.5);\n      tooltip.transition()\n        .duration(200)\n        .style('opacity', 1);\n      let ds = d.data.x1.toISOString().substr(0, 7).split('-');\n      let tooltipText = '<b>' + ds[1] + ' / ' + ds[0] + ':</b><br/>';\n      for (let i = 0; i < statuses.length; ++i) {\n        let visitStatus = statuses[i];\n        let nbVisits = d.data[visitStatus].length;\n        if (nbVisits === 0) continue;\n        tooltipText += nbVisits + ' ' + visitStatus + ' visits';\n        if (i !== statuses.length - 1) tooltipText += '<br/>';\n      }\n      tooltip.html(tooltipText)\n        .style('left', event.pageX + 15 + 'px')\n        .style('top', event.pageY + 'px');\n    })\n    .on('mouseout', (event, d) => {\n      svg.selectAll('rect.year' + d.data.x1.getUTCFullYear())\n        .attr('fill-opacity', 0);\n      svg.selectAll('rect.year' + currentYear)\n        .attr('fill-opacity', 0.3);\n      tooltip.transition()\n        .duration(500)\n        .style('opacity', 0);\n    })\n    .on('mousemove', (event) => {\n      tooltip.style('left', event.pageX + 15 + 'px')\n        .style('top', event.pageY + 'px');\n    })\n    // callback to select a year after a mouse click\n    // inside a histogram bar\n    .on('click', (event, d) => {\n      svg.selectAll('rect.year' + currentYear)\n        .attr('fill-opacity', 0);\n      svg.selectAll('rect.yearoutline' + currentYear)\n        .attr('stroke', 'none');\n      currentYear = d.data.x1.getUTCFullYear();\n      svg.selectAll('rect.year' + currentYear)\n        .attr('fill-opacity', 0.5);\n      svg.selectAll('rect.yearoutline' + currentYear)\n        .attr('stroke', 'black');\n      yearClickCallback(currentYear);\n    });\n\n  // create one stroke only rectangle by displayed year\n  // that will be displayed on top of the histogram when the user has selected a year\n  g.append('g')\n    .selectAll('rect')\n    .data(yearBins)\n    .enter().append('rect')\n    .attr('class', d => 'yearoutline' + d.getUTCFullYear())\n    .attr('fill', 'none')\n    .attr('stroke', d => d.getUTCFullYear() === currentYear ? 'black' : 'none')\n    .attr('x', d => {\n      let date = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n      return x(date);\n    })\n    .attr('y', 0)\n    .attr('height', height)\n    .attr('width', d => {\n      let date = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n      let yearWidth = x(d3.timeYear.offset(date, 1)) - x(date);\n      return yearWidth;\n    });\n\n  // add x axis with a tick for every 1st day of each year\n  let xAxis = g.append('g')\n    .attr('class', 'axis')\n    .attr('transform', 'translate(0,' + height + ')')\n    .call(\n      d3.axisBottom(x)\n        .ticks(d3.timeYear.every(1))\n        .tickFormat(d => d.getUTCFullYear())\n    );\n\n  // shift tick labels in order to display them at the middle\n  // of each year range\n  xAxis.selectAll('text')\n    .attr('transform', d => {\n      let year = d.getUTCFullYear();\n      let date = new Date(Date.UTC(year, 0, 1));\n      let yearWidth = x(d3.timeYear.offset(date, 1)) - x(date);\n      return 'translate(' + -yearWidth / 2 + ', 0)';\n    });\n\n  // add y axis for the number of visits\n  g.append('g')\n    .attr('class', 'axis')\n    .call(d3.axisLeft(y).tickValues(yTickValues));\n\n  // add legend for visit statuses\n  let legendGroup = g.append('g')\n    .attr('font-family', 'sans-serif')\n    .attr('font-size', 10)\n    .attr('text-anchor', 'end');\n\n  legendGroup.append('text')\n    .attr('x', width + margin.right - 5)\n    .attr('y', 9.5)\n    .attr('dy', '0.32em')\n    .text('visit status:');\n\n  let legend = legendGroup.selectAll('g')\n    .data(statuses.slice().reverse())\n    .enter().append('g')\n    .attr('transform', (d, i) => 'translate(0,' + (i + 1) * 20 + ')');\n\n  legend.append('rect')\n    .attr('x', width + 2 * margin.right / 3)\n    .attr('width', 19)\n    .attr('height', 19)\n    .attr('fill', colors);\n\n  legend.append('text')\n    .attr('x', width + 2 * margin.right / 3 - 5)\n    .attr('y', 9.5)\n    .attr('dy', '0.32em')\n    .text(d => d);\n\n  // add text label for the y axis\n  g.append('text')\n    .attr('transform', 'rotate(-90)')\n    .attr('y', -margin.left)\n    .attr('x', -(height / 2))\n    .attr('dy', '1em')\n    .style('text-anchor', 'middle')\n    .text('Number of visits');\n}\n","/**\n * Copyright (C) 2018-2019  The Software Heritage developers\n * See the AUTHORS file at the top-level directory of this distribution\n * License: GNU Affero General Public License version 3, or any later version\n * See top-level LICENSE file for more information\n */\n\nimport Calendar from 'js-year-calendar';\nimport 'js-year-calendar/dist/js-year-calendar.css';\n\nlet minSize = 15;\nlet maxSize = 28;\nlet currentPopover = null;\nlet visitsByDate = {};\n\nfunction closePopover() {\n  if (currentPopover) {\n    $(currentPopover).popover('dispose');\n    currentPopover = null;\n  }\n}\n\n// function to update the visits calendar view based on the selected year\nexport function updateCalendar(year, filteredVisits, yearClickedCallback) {\n  visitsByDate = {};\n  let maxNbVisitsByDate = 0;\n  let minDate, maxDate;\n  for (let i = 0; i < filteredVisits.length; ++i) {\n    filteredVisits[i]['startDate'] = filteredVisits[i]['date'];\n    filteredVisits[i]['endDate'] = filteredVisits[i]['startDate'];\n    let date = new Date(filteredVisits[i]['date']);\n    date.setHours(0, 0, 0, 0);\n    let dateStr = date.toDateString();\n    if (!visitsByDate.hasOwnProperty(dateStr)) {\n      visitsByDate[dateStr] = [filteredVisits[i]];\n    } else {\n      visitsByDate[dateStr].push(filteredVisits[i]);\n    }\n    maxNbVisitsByDate = Math.max(maxNbVisitsByDate, visitsByDate[dateStr].length);\n    if (i === 0) {\n      minDate = maxDate = date;\n    } else {\n      if (date.getTime() < minDate.getTime()) {\n        minDate = date;\n      }\n      if (date.getTime() > maxDate.getTime()) {\n        maxDate = date;\n      }\n    }\n  }\n\n  closePopover();\n\n  new Calendar('#swh-visits-calendar', {\n    dataSource: filteredVisits,\n    style: 'custom',\n    minDate: minDate,\n    maxDate: maxDate,\n    startYear: year,\n    renderEnd: e => yearClickedCallback(e.currentYear),\n    customDataSourceRenderer: (element, date, events) => {\n      let dateStr = date.toDateString();\n      let nbVisits = visitsByDate[dateStr].length;\n      let t = nbVisits / maxNbVisitsByDate;\n      if (maxNbVisitsByDate === 1) {\n        t = 0;\n      }\n      let size = minSize + t * (maxSize - minSize);\n      let offsetX = (maxSize - size) / 2 - parseInt($(element).css('padding-left'));\n      let offsetY = (maxSize - size) / 2 - parseInt($(element).css('padding-top')) + 1;\n      let cellWrapper = $('<div></div>');\n      cellWrapper.css('position', 'relative');\n      let dayNumber = $('<div></div>');\n      dayNumber.text($(element).text());\n      let circle = $('<div></div>');\n      let r = 0;\n      let g = 0;\n      for (let i = 0; i < nbVisits; ++i) {\n        let visit = visitsByDate[dateStr][i];\n        if (visit.status === 'full') {\n          g += 255;\n        } else if (visit.status === 'partial') {\n          r += 255;\n          g += 255;\n        } else {\n          r += 255;\n        }\n      }\n      r /= nbVisits;\n      g /= nbVisits;\n      circle.css('background-color', 'rgba(' + r + ', ' + g + ', 0, 0.3)');\n      circle.css('width', size + 'px');\n      circle.css('height', size + 'px');\n      circle.css('border-radius', size + 'px');\n      circle.css('position', 'absolute');\n      circle.css('top', offsetY + 'px');\n      circle.css('left', offsetX + 'px');\n      cellWrapper.append(dayNumber);\n      cellWrapper.append(circle);\n      $(element)[0].innerHTML = $(cellWrapper)[0].outerHTML;\n    },\n    mouseOnDay: e => {\n      if (currentPopover !== e.element) {\n        closePopover();\n      }\n      let dateStr = e.date.toDateString();\n      if (visitsByDate.hasOwnProperty(dateStr)) {\n\n        let visits = visitsByDate[dateStr];\n        let content = '<div><h6>' + e.date.toDateString() + '</h6></div>';\n        content += '<ul class=\"swh-list-unstyled\">';\n        for (let i = 0; i < visits.length; ++i) {\n          let visitTime = visits[i].formatted_date.substr(visits[i].formatted_date.indexOf(',') + 2);\n          content += '<li><a class=\"swh-visit-icon swh-visit-' + visits[i].status + '\" title=\"' + visits[i].status +\n                     ' visit\" href=\"' + visits[i].url + '\">' + visitTime + '</a></li>';\n        }\n        content += '</ul>';\n\n        $(e.element).popover({\n          trigger: 'manual',\n          container: 'body',\n          html: true,\n          content: content\n        }).on('mouseleave', () => {\n          if (!$('.popover:hover').length) {\n            // close popover when leaving day in calendar\n            // except if the pointer is hovering it\n            closePopover();\n          }\n        });\n\n        $(e.element).on('shown.bs.popover', () => {\n          $('.popover').mouseleave(() => {\n            // close popover when pointer leaves it\n            closePopover();\n          });\n        });\n\n        $(e.element).popover('show');\n        currentPopover = e.element;\n      }\n    }\n  });\n  $('#swh-visits-calendar.calendar table td').css('width', maxSize + 'px');\n  $('#swh-visits-calendar.calendar table td').css('height', maxSize + 'px');\n  $('#swh-visits-calendar.calendar table td').css('padding', '0px');\n}\n","/**\n * Copyright (C) 2018  The Software Heritage developers\n * See the AUTHORS file at the top-level directory of this distribution\n * License: GNU Affero General Public License version 3, or any later version\n * See top-level LICENSE file for more information\n */\n\nimport {createVisitsHistogram} from './visits-histogram';\nimport {updateCalendar} from './visits-calendar';\nimport './visits-reporting.css';\n\n// will hold all visits\nlet allVisits;\n// will hold filtered visits to display\nlet filteredVisits;\n// will hold currently displayed year\nlet currentYear;\n\n// function to gather full visits\nfunction filterFullVisits(differentSnapshots) {\n  let filteredVisits = [];\n  for (let i = 0; i < allVisits.length; ++i) {\n    if (allVisits[i].status !== 'full') continue;\n    if (!differentSnapshots) {\n      filteredVisits.push(allVisits[i]);\n    } else if (filteredVisits.length === 0) {\n      filteredVisits.push(allVisits[i]);\n    } else {\n      let lastVisit = filteredVisits[filteredVisits.length - 1];\n      if (allVisits[i].snapshot !== lastVisit.snapshot) {\n        filteredVisits.push(allVisits[i]);\n      }\n    }\n  }\n  return filteredVisits;\n}\n\n// function to update the visits list view based on the selected year\nfunction updateVisitsList(year) {\n  $('#swh-visits-list').children().remove();\n  let visitsByYear = [];\n  for (let i = 0; i < filteredVisits.length; ++i) {\n    if (filteredVisits[i].date.getUTCFullYear() === year) {\n      visitsByYear.push(filteredVisits[i]);\n    }\n  }\n  let visitsCpt = 0;\n  let nbVisitsByRow = 4;\n  let visitsListHtml = '<div class=\"swh-visits-list-row\">';\n  for (let i = 0; i < visitsByYear.length; ++i) {\n    if (visitsCpt > 0 && visitsCpt % nbVisitsByRow === 0) {\n      visitsListHtml += '</div><div class=\"swh-visits-list-row\">';\n    }\n    visitsListHtml += '<div class=\"swh-visits-list-column\" style=\"width: ' + 100 / nbVisitsByRow + '%;\">';\n    visitsListHtml += '<a class=\"swh-visit-icon swh-visit-' + visitsByYear[i].status + '\" title=\"' + visitsByYear[i].status +\n                        ' visit\" href=\"' + visitsByYear[i].url + '\">' + visitsByYear[i].formatted_date + '</a>';\n    visitsListHtml += '</div>';\n    ++visitsCpt;\n  }\n  visitsListHtml += '</div>';\n  $('#swh-visits-list').append($(visitsListHtml));\n}\n\nfunction yearChangedCalendar(year) {\n  currentYear = year;\n  updateVisitsList(year);\n  createVisitsHistogram('.d3-wrapper', filteredVisits, currentYear, yearClickedTimeline);\n}\n\n// callback when the user selects a year through the visits histogram\nfunction yearClickedTimeline(year) {\n  currentYear = year;\n  updateCalendar(year, filteredVisits, yearChangedCalendar);\n  updateVisitsList(year);\n}\n\n// function to update the visits views (histogram, calendar, list)\nfunction updateDisplayedVisits() {\n  if (filteredVisits.length === 0) {\n    return;\n  }\n  if (!currentYear) {\n    currentYear = filteredVisits[filteredVisits.length - 1].date.getUTCFullYear();\n  }\n  createVisitsHistogram('.d3-wrapper', filteredVisits, currentYear, yearClickedTimeline);\n  updateCalendar(currentYear, filteredVisits, yearChangedCalendar);\n  updateVisitsList(currentYear);\n}\n\n// callback when the user only wants to see full visits pointing\n// to different snapshots (default)\nexport function showFullVisitsDifferentSnapshots(event) {\n  filteredVisits = filterFullVisits(true);\n  updateDisplayedVisits();\n}\n\n// callback when the user only wants to see full visits\nexport function showFullVisits(event) {\n  filteredVisits = filterFullVisits(false);\n  updateDisplayedVisits();\n}\n\n// callback when the user wants to see all visits (including partial, ongoing and failed ones)\nexport function showAllVisits(event) {\n  filteredVisits = allVisits;\n  updateDisplayedVisits();\n}\n\nexport function initVisitsReporting(visits) {\n  $(document).ready(() => {\n    allVisits = visits;\n    // process input visits\n    let firstFullVisit;\n    allVisits.forEach((v, i) => {\n      // Turn Unix epoch into Javascript Date object\n      v.date = new Date(Math.floor(v.date * 1000));\n      let visitLink = '<a class=\"swh-visit-icon swh-visit-' + v.status + '\" href=\"' + v.url + '\">' + v.formatted_date + '</a>';\n      if (v.status === 'full') {\n        if (!firstFullVisit) {\n          firstFullVisit = v;\n          $('#swh-first-full-visit').append($(visitLink));\n          if (allVisits.length === 1) {\n            $('#swh-last-full-visit')[0].innerHTML = visitLink;\n          }\n        } else {\n          $('#swh-last-full-visit')[0].innerHTML = visitLink;\n        }\n      }\n      if (i === allVisits.length - 1) {\n        $('#swh-last-visit').append($(visitLink));\n      }\n    });\n\n    // display full visits pointing to different snapshots by default\n    showFullVisitsDifferentSnapshots();\n  });\n\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"exports\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports);\n    global.jsYearCalendar = mod.exports;\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_exports) {\n  \"use strict\";\n\n  Object.defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n  _exports[\"default\"] = void 0;\n\n  function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  /* =========================================================\r\n   * JS year calendar v1.0.0\r\n   * Repo: https://github.com/year-calendar/js-year-calendar\r\n   * =========================================================\r\n   * Created by Paul David-Sivelle\r\n   *\r\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   * you may not use this file except in compliance with the License.\r\n   * You may obtain a copy of the License at\r\n   *\r\n   * http://www.apache.org/licenses/LICENSE-2.0\r\n   *\r\n   * Unless required by applicable law or agreed to in writing, software\r\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   * See the License for the specific language governing permissions and\r\n   * limitations under the License.\r\n   * ========================================================= */\n  // NodeList forEach() polyfill\n  if (typeof NodeList !== \"undefined\" && !NodeList.prototype.forEach) {\n    NodeList.prototype.forEach = function (callback, thisArg) {\n      thisArg = thisArg || window;\n\n      for (var i = 0; i < this.length; i++) {\n        callback.call(thisArg, this[i], i, this);\n      }\n    };\n  } // Element closest() polyfill\n\n\n  if (typeof Element !== \"undefined\" && !Element.prototype.matches) {\n    var prototype = Element.prototype;\n    Element.prototype.matches = prototype.msMatchesSelector || prototype.webkitMatchesSelector;\n  }\n\n  if (typeof Element !== \"undefined\" && !Element.prototype.closest) {\n    Element.prototype.closest = function (s) {\n      var el = this;\n      if (!document.documentElement.contains(el)) return null;\n\n      do {\n        if (el.matches(s)) return el;\n        el = el.parentElement || el.parentNode;\n      } while (el !== null && el.nodeType == 1);\n\n      return null;\n    };\n  }\n  /**\r\n   * Calendar instance.\r\n   */\n\n\n  var Calendar = /*#__PURE__*/function () {\n    /**\r\n     * Fired when a day is clicked.\r\n     * @event\r\n     * @example\r\n     * ```\r\n     * \r\n     * document.querySelector('.calendar').addEventListener('clickDay', function(e) {\r\n     *   console.log(\"Click on day: \" + e.date + \" (\" + e.events.length + \" events)\");\r\n     * })\r\n     * ```\r\n     */\n\n    /**\r\n     * Fired when a day is right clicked.\r\n     * @event\r\n     * @example\r\n     * ```\r\n     * \r\n     * document.querySelector('.calendar').addEventListener('clickDay', function(e) {\r\n     *   console.log(\"Right click on day: \" + e.date + \" (\" + e.events.length + \" events)\");\r\n     * })\r\n     * ```\r\n     */\n\n    /**\r\n     * Fired when the mouse enter in a day.\r\n     * @event\r\n     * @example\r\n     * ```\r\n     * \r\n     * document.querySelector('.calendar').addEventListener('mouseOnDay', function(e) {\r\n     *   console.log(\"Mouse enter in a day: \" + e.date + \" (\" + e.events.length + \" events)\");\r\n     * })\r\n     * ```\r\n     */\n\n    /**\r\n     * Fired when the mouse leave a day.\r\n     * @event\r\n     * @example\r\n     * ```\r\n     * \r\n     * document.querySelector('.calendar').addEventListener('mouseOutDay', function(e) {\r\n     *   console.log(\"Mouse leave a day: \" + e.date + \" (\" + e.events.length + \" events)\");\r\n     * })\r\n     * ```\r\n     */\n\n    /**\r\n     * Fired when the calendar rendering is ended.\r\n     * @event\r\n     * @example\r\n     * ```\r\n     * \r\n     * document.querySelector('.calendar').addEventListener('renderEnd', function(e) {\r\n     *   console.log(\"Render end for year: \" + e.currentYear);\r\n     * })\r\n     * ```\r\n     */\n\n    /**\r\n     * Fired when a date range is selected.\r\n     * \r\n     * Don't forget to enable the `enableRangeSelection` option to be able to use the range selection functionality.\r\n     * @event\r\n     * @example\r\n     * ```\r\n     * \r\n     * document.querySelector('.calendar').addEventListener('selectRange', function(e) {\r\n     *   console.log(\"Select the range: \" + e.startDate + \" - \" + e.endDate);\r\n     * })\r\n     * ```\r\n     */\n\n    /**\r\n     * Triggered after the changing the current year.\r\n     * @event\r\n     * @example\r\n     * ```\r\n     * \r\n     * document.querySelector('.calendar').addEventListener('yearChanged', function(e) {\r\n     *   console.log(\"New year selected: \" + e.currentYear);\r\n     * })\r\n     * ```\r\n     */\n\n    /**\r\n     * Create a new calendar.\r\n     * @param element The element (or the selector to an element) in which the calendar should be created.\r\n     * @param options [Optional] The options used to customize the calendar\r\n     */\n    function Calendar(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      _classCallCheck(this, Calendar);\n\n      _defineProperty(this, \"element\", void 0);\n\n      _defineProperty(this, \"options\", void 0);\n\n      _defineProperty(this, \"_dataSource\", void 0);\n\n      _defineProperty(this, \"_mouseDown\", void 0);\n\n      _defineProperty(this, \"_rangeStart\", void 0);\n\n      _defineProperty(this, \"_rangeEnd\", void 0);\n\n      _defineProperty(this, \"_responsiveInterval\", void 0);\n\n      _defineProperty(this, \"_nbCols\", void 0);\n\n      _defineProperty(this, \"clickDay\", void 0);\n\n      _defineProperty(this, \"dayContextMenu\", void 0);\n\n      _defineProperty(this, \"mouseOnDay\", void 0);\n\n      _defineProperty(this, \"mouseOutDay\", void 0);\n\n      _defineProperty(this, \"renderEnd\", void 0);\n\n      _defineProperty(this, \"selectRange\", void 0);\n\n      _defineProperty(this, \"yearChanged\", void 0);\n\n      if (element instanceof HTMLElement) {\n        this.element = element;\n      } else if (typeof element === \"string\") {\n        this.element = document.querySelector(element);\n      } else {\n        throw new Error(\"The element parameter should be a DOM node or a selector\");\n      }\n\n      this.element.classList.add('calendar');\n\n      this._initializeEvents(options);\n\n      this._initializeOptions(options);\n\n      this.setYear(this.options.startYear);\n    }\n\n    _createClass(Calendar, [{\n      key: \"_initializeOptions\",\n      value: function _initializeOptions(opt) {\n        if (opt == null) {\n          opt = {};\n        }\n\n        this.options = {\n          startYear: !isNaN(parseInt(opt.startYear)) ? parseInt(opt.startYear) : new Date().getFullYear(),\n          minDate: opt.minDate instanceof Date ? opt.minDate : null,\n          maxDate: opt.maxDate instanceof Date ? opt.maxDate : null,\n          language: opt.language != null && Calendar.locales[opt.language] != null ? opt.language : 'en',\n          allowOverlap: opt.allowOverlap != null ? opt.allowOverlap : true,\n          displayWeekNumber: opt.displayWeekNumber != null ? opt.displayWeekNumber : false,\n          displayDisabledDataSource: opt.displayDisabledDataSource != null ? opt.displayDisabledDataSource : false,\n          displayHeader: opt.displayHeader != null ? opt.displayHeader : true,\n          alwaysHalfDay: opt.alwaysHalfDay != null ? opt.alwaysHalfDay : false,\n          enableRangeSelection: opt.enableRangeSelection != null ? opt.enableRangeSelection : false,\n          disabledDays: opt.disabledDays instanceof Array ? opt.disabledDays : [],\n          disabledWeekDays: opt.disabledWeekDays instanceof Array ? opt.disabledWeekDays : [],\n          hiddenWeekDays: opt.hiddenWeekDays instanceof Array ? opt.hiddenWeekDays : [],\n          roundRangeLimits: opt.roundRangeLimits != null ? opt.roundRangeLimits : false,\n          dataSource: opt.dataSource instanceof Array || typeof opt.dataSource === \"function\" ? opt.dataSource : [],\n          style: opt.style == 'background' || opt.style == 'border' || opt.style == 'custom' ? opt.style : 'border',\n          enableContextMenu: opt.enableContextMenu != null ? opt.enableContextMenu : false,\n          contextMenuItems: opt.contextMenuItems instanceof Array ? opt.contextMenuItems : [],\n          customDayRenderer: typeof opt.customDayRenderer === \"function\" ? opt.customDayRenderer : null,\n          customDataSourceRenderer: typeof opt.customDataSourceRenderer === \"function\" ? opt.customDataSourceRenderer : null,\n          weekStart: !isNaN(parseInt(opt.weekStart)) ? parseInt(opt.weekStart) : null,\n          loadingTemplate: typeof opt.loadingTemplate === \"string\" || opt.loadingTemplate instanceof HTMLElement ? opt.loadingTemplate : null\n        };\n\n        if (this.options.dataSource instanceof Array) {\n          this._dataSource = this.options.dataSource;\n\n          this._initializeDatasourceColors();\n        }\n      }\n    }, {\n      key: \"_initializeEvents\",\n      value: function _initializeEvents(opt) {\n        if (opt == null) {\n          opt = [];\n        }\n\n        if (opt.yearChanged) {\n          this.element.addEventListener('yearChanged', opt.yearChanged);\n        }\n\n        if (opt.renderEnd) {\n          this.element.addEventListener('renderEnd', opt.renderEnd);\n        }\n\n        if (opt.clickDay) {\n          this.element.addEventListener('clickDay', opt.clickDay);\n        }\n\n        if (opt.dayContextMenu) {\n          this.element.addEventListener('dayContextMenu', opt.dayContextMenu);\n        }\n\n        if (opt.selectRange) {\n          this.element.addEventListener('selectRange', opt.selectRange);\n        }\n\n        if (opt.mouseOnDay) {\n          this.element.addEventListener('mouseOnDay', opt.mouseOnDay);\n        }\n\n        if (opt.mouseOutDay) {\n          this.element.addEventListener('mouseOutDay', opt.mouseOutDay);\n        }\n      }\n    }, {\n      key: \"_fetchDataSource\",\n      value: function _fetchDataSource(callback) {\n        if (typeof this.options.dataSource === \"function\") {\n          var getDataSource = this.options.dataSource;\n\n          if (getDataSource.length == 2) {\n            // 2 parameters, means callback method\n            getDataSource(this.options.startYear, callback);\n          } else {\n            // 1 parameter, means synchronous or promise method\n            var result = getDataSource(this.options.startYear);\n\n            if (result instanceof Array) {\n              callback(result);\n            } else {\n              result.then(callback);\n            }\n          }\n        } else {\n          callback(this.options.dataSource);\n        }\n      }\n    }, {\n      key: \"_initializeDatasourceColors\",\n      value: function _initializeDatasourceColors() {\n        for (var i = 0; i < this._dataSource.length; i++) {\n          if (this._dataSource[i].color == null) {\n            this._dataSource[i].color = Calendar.colors[i % Calendar.colors.length];\n          }\n        }\n      }\n      /**\r\n          * Renders the calendar.\r\n          */\n\n    }, {\n      key: \"render\",\n      value: function render() {\n        var isLoading = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n        // Clear the calendar (faster method)\n        while (this.element.firstChild) {\n          this.element.removeChild(this.element.firstChild);\n        }\n\n        if (this.options.displayHeader) {\n          this._renderHeader();\n        }\n\n        if (isLoading) {\n          this._renderLoading();\n        } else {\n          this._renderBody();\n\n          this._renderDataSource();\n\n          this._applyEvents(); // Fade animation\n\n\n          var months = this.element.querySelector('.months-container');\n          months.style.opacity = '0';\n          months.style.display = 'block';\n          months.style.transition = 'opacity 0.5s';\n          setTimeout(function () {\n            months.style.opacity = '1';\n            setTimeout(function () {\n              return months.style.transition = '';\n            }, 500);\n          }, 0);\n\n          this._triggerEvent('renderEnd', {\n            currentYear: this.options.startYear\n          });\n        }\n      }\n    }, {\n      key: \"_renderHeader\",\n      value: function _renderHeader() {\n        var header = document.createElement('div');\n        header.classList.add('calendar-header');\n        var headerTable = document.createElement('table');\n        var prevDiv = document.createElement('th');\n        prevDiv.classList.add('prev');\n\n        if (this.options.minDate != null && this.options.minDate > new Date(this.options.startYear - 1, 11, 31)) {\n          prevDiv.classList.add('disabled');\n        }\n\n        var prevIcon = document.createElement('span');\n        prevIcon.innerHTML = \"&lsaquo;\";\n        prevDiv.appendChild(prevIcon);\n        headerTable.appendChild(prevDiv);\n        var prev2YearDiv = document.createElement('th');\n        prev2YearDiv.classList.add('year-title');\n        prev2YearDiv.classList.add('year-neighbor2');\n        prev2YearDiv.textContent = (this.options.startYear - 2).toString();\n\n        if (this.options.minDate != null && this.options.minDate > new Date(this.options.startYear - 2, 11, 31)) {\n          prev2YearDiv.classList.add('disabled');\n        }\n\n        headerTable.appendChild(prev2YearDiv);\n        var prevYearDiv = document.createElement('th');\n        prevYearDiv.classList.add('year-title');\n        prevYearDiv.classList.add('year-neighbor');\n        prevYearDiv.textContent = (this.options.startYear - 1).toString();\n\n        if (this.options.minDate != null && this.options.minDate > new Date(this.options.startYear - 1, 11, 31)) {\n          prevYearDiv.classList.add('disabled');\n        }\n\n        headerTable.appendChild(prevYearDiv);\n        var yearDiv = document.createElement('th');\n        yearDiv.classList.add('year-title');\n        yearDiv.textContent = this.options.startYear.toString();\n        headerTable.appendChild(yearDiv);\n        var nextYearDiv = document.createElement('th');\n        nextYearDiv.classList.add('year-title');\n        nextYearDiv.classList.add('year-neighbor');\n        nextYearDiv.textContent = (this.options.startYear + 1).toString();\n\n        if (this.options.maxDate != null && this.options.maxDate < new Date(this.options.startYear + 1, 0, 1)) {\n          nextYearDiv.classList.add('disabled');\n        }\n\n        headerTable.appendChild(nextYearDiv);\n        var next2YearDiv = document.createElement('th');\n        next2YearDiv.classList.add('year-title');\n        next2YearDiv.classList.add('year-neighbor2');\n        next2YearDiv.textContent = (this.options.startYear + 2).toString();\n\n        if (this.options.maxDate != null && this.options.maxDate < new Date(this.options.startYear + 2, 0, 1)) {\n          next2YearDiv.classList.add('disabled');\n        }\n\n        headerTable.appendChild(next2YearDiv);\n        var nextDiv = document.createElement('th');\n        nextDiv.classList.add('next');\n\n        if (this.options.maxDate != null && this.options.maxDate < new Date(this.options.startYear + 1, 0, 1)) {\n          nextDiv.classList.add('disabled');\n        }\n\n        var nextIcon = document.createElement('span');\n        nextIcon.innerHTML = \"&rsaquo;\";\n        nextDiv.appendChild(nextIcon);\n        headerTable.appendChild(nextDiv);\n        header.appendChild(headerTable);\n        this.element.appendChild(header);\n      }\n    }, {\n      key: \"_renderBody\",\n      value: function _renderBody() {\n        var monthsDiv = document.createElement('div');\n        monthsDiv.classList.add('months-container');\n\n        for (var m = 0; m < 12; m++) {\n          /* Container */\n          var monthDiv = document.createElement('div');\n          monthDiv.classList.add('month-container');\n          monthDiv.dataset.monthId = m.toString();\n\n          if (this._nbCols) {\n            monthDiv.classList.add(\"month-\".concat(this._nbCols));\n          }\n\n          var firstDate = new Date(this.options.startYear, m, 1);\n          var table = document.createElement('table');\n          table.classList.add('month');\n          /* Month header */\n\n          var thead = document.createElement('thead');\n          var titleRow = document.createElement('tr');\n          var titleCell = document.createElement('th');\n          titleCell.classList.add('month-title');\n          titleCell.setAttribute('colspan', this.options.displayWeekNumber ? '8' : '7');\n          titleCell.textContent = Calendar.locales[this.options.language].months[m];\n          titleRow.appendChild(titleCell);\n          thead.appendChild(titleRow);\n          var headerRow = document.createElement('tr');\n\n          if (this.options.displayWeekNumber) {\n            var weekNumberCell = document.createElement('th');\n            weekNumberCell.classList.add('week-number');\n            weekNumberCell.textContent = Calendar.locales[this.options.language].weekShort;\n            headerRow.appendChild(weekNumberCell);\n          }\n\n          var weekStart = this.options.weekStart ? this.options.weekStart : Calendar.locales[this.options.language].weekStart;\n          var d = weekStart;\n\n          do {\n            var headerCell = document.createElement('th');\n            headerCell.classList.add('day-header');\n            headerCell.textContent = Calendar.locales[this.options.language].daysMin[d];\n\n            if (this._isHidden(d)) {\n              headerCell.classList.add('hidden');\n            }\n\n            headerRow.appendChild(headerCell);\n            d++;\n            if (d >= 7) d = 0;\n          } while (d != weekStart);\n\n          thead.appendChild(headerRow);\n          table.appendChild(thead);\n          /* Days */\n\n          var currentDate = new Date(firstDate.getTime());\n          var lastDate = new Date(this.options.startYear, m + 1, 0);\n\n          while (currentDate.getDay() != weekStart) {\n            currentDate.setDate(currentDate.getDate() - 1);\n          }\n\n          while (currentDate <= lastDate) {\n            var row = document.createElement('tr');\n\n            if (this.options.displayWeekNumber) {\n              var weekNumberCell = document.createElement('td');\n              var currentThursday = new Date(currentDate.getTime()); // Week number is computed based on the thursday\n\n              currentThursday.setDate(currentThursday.getDate() - weekStart + 4);\n              weekNumberCell.classList.add('week-number');\n              weekNumberCell.textContent = this.getWeekNumber(currentThursday).toString();\n              row.appendChild(weekNumberCell);\n            }\n\n            do {\n              var cell = document.createElement('td');\n              cell.classList.add('day');\n\n              if (this._isHidden(currentDate.getDay())) {\n                cell.classList.add('hidden');\n              }\n\n              if (currentDate < firstDate) {\n                cell.classList.add('old');\n              } else if (currentDate > lastDate) {\n                cell.classList.add('new');\n              } else {\n                if (this._isDisabled(currentDate)) {\n                  cell.classList.add('disabled');\n                }\n\n                var cellContent = document.createElement('div');\n                cellContent.classList.add('day-content');\n                cellContent.textContent = currentDate.getDate().toString();\n                cell.appendChild(cellContent);\n\n                if (this.options.customDayRenderer) {\n                  this.options.customDayRenderer(cellContent, currentDate);\n                }\n              }\n\n              row.appendChild(cell);\n              currentDate.setDate(currentDate.getDate() + 1);\n            } while (currentDate.getDay() != weekStart);\n\n            table.appendChild(row);\n          }\n\n          monthDiv.appendChild(table);\n          monthsDiv.appendChild(monthDiv);\n        }\n\n        this.element.appendChild(monthsDiv);\n      }\n    }, {\n      key: \"_renderLoading\",\n      value: function _renderLoading() {\n        var container = document.createElement('div');\n        container.classList.add('calendar-loading-container');\n        container.style.minHeight = this._nbCols * 200 + 'px';\n        var loading = document.createElement('div');\n        loading.classList.add('calendar-loading');\n\n        if (this.options.loadingTemplate) {\n          if (typeof this.options.loadingTemplate === \"string\") {\n            loading.innerHTML = this.options.loadingTemplate;\n          } else if (this.options.loadingTemplate instanceof HTMLElement) {\n            loading.appendChild(this.options.loadingTemplate);\n          }\n        } else {\n          var spinner = document.createElement('div');\n          spinner.classList.add('calendar-spinner');\n\n          for (var i = 1; i <= 3; i++) {\n            var bounce = document.createElement('div');\n            bounce.classList.add(\"bounce\".concat(i));\n            spinner.appendChild(bounce);\n          }\n\n          loading.appendChild(spinner);\n        }\n\n        container.appendChild(loading);\n        this.element.appendChild(container);\n      }\n    }, {\n      key: \"_renderDataSource\",\n      value: function _renderDataSource() {\n        var _this = this;\n\n        if (this._dataSource != null && this._dataSource.length > 0) {\n          this.element.querySelectorAll('.month-container').forEach(function (month) {\n            var monthId = parseInt(month.dataset.monthId);\n            var firstDate = new Date(_this.options.startYear, monthId, 1);\n            var lastDate = new Date(_this.options.startYear, monthId + 1, 1);\n\n            if ((_this.options.minDate == null || lastDate > _this.options.minDate) && (_this.options.maxDate == null || firstDate <= _this.options.maxDate)) {\n              var monthData = [];\n\n              for (var i = 0; i < _this._dataSource.length; i++) {\n                if (!(_this._dataSource[i].startDate >= lastDate) || _this._dataSource[i].endDate < firstDate) {\n                  monthData.push(_this._dataSource[i]);\n                }\n              }\n\n              if (monthData.length > 0) {\n                month.querySelectorAll('.day-content').forEach(function (day) {\n                  var currentDate = new Date(_this.options.startYear, monthId, parseInt(day.textContent));\n                  var nextDate = new Date(_this.options.startYear, monthId, currentDate.getDate() + 1);\n                  var dayData = [];\n\n                  if ((_this.options.minDate == null || currentDate >= _this.options.minDate) && (_this.options.maxDate == null || currentDate <= _this.options.maxDate)) {\n                    for (var i = 0; i < monthData.length; i++) {\n                      if (monthData[i].startDate < nextDate && monthData[i].endDate >= currentDate) {\n                        dayData.push(monthData[i]);\n                      }\n                    }\n\n                    if (dayData.length > 0 && (_this.options.displayDisabledDataSource || !_this._isDisabled(currentDate))) {\n                      _this._renderDataSourceDay(day, currentDate, dayData);\n                    }\n                  }\n                });\n              }\n            }\n          });\n        }\n      }\n    }, {\n      key: \"_renderDataSourceDay\",\n      value: function _renderDataSourceDay(elt, currentDate, events) {\n        var parent = elt.parentElement;\n\n        switch (this.options.style) {\n          case 'border':\n            var weight = 0;\n\n            if (events.length == 1) {\n              weight = 4;\n            } else if (events.length <= 3) {\n              weight = 2;\n            } else {\n              parent.style.boxShadow = 'inset 0 -4px 0 0 black';\n            }\n\n            if (weight > 0) {\n              var boxShadow = '';\n\n              for (var i = 0; i < events.length; i++) {\n                if (boxShadow != '') {\n                  boxShadow += \",\";\n                }\n\n                boxShadow += \"inset 0 -\".concat((i + 1) * weight, \"px 0 0 \").concat(events[i].color);\n              }\n\n              parent.style.boxShadow = boxShadow;\n            }\n\n            break;\n\n          case 'background':\n            parent.style.backgroundColor = events[events.length - 1].color;\n            var currentTime = currentDate.getTime();\n\n            if (events[events.length - 1].startDate.getTime() == currentTime) {\n              parent.classList.add('day-start');\n\n              if (events[events.length - 1].startHalfDay || this.options.alwaysHalfDay) {\n                parent.classList.add('day-half'); // Find color for other half\n\n                var otherColor = 'transparent';\n\n                for (var i = events.length - 2; i >= 0; i--) {\n                  if (events[i].startDate.getTime() != currentTime || !events[i].startHalfDay && !this.options.alwaysHalfDay) {\n                    otherColor = events[i].color;\n                    break;\n                  }\n                }\n\n                parent.style.background = \"linear-gradient(-45deg, \".concat(events[events.length - 1].color, \", \").concat(events[events.length - 1].color, \" 49%, \").concat(otherColor, \" 51%, \").concat(otherColor, \")\");\n              } else if (this.options.roundRangeLimits) {\n                parent.classList.add('round-left');\n              }\n            } else if (events[events.length - 1].endDate.getTime() == currentTime) {\n              parent.classList.add('day-end');\n\n              if (events[events.length - 1].endHalfDay || this.options.alwaysHalfDay) {\n                parent.classList.add('day-half'); // Find color for other half\n\n                var otherColor = 'transparent';\n\n                for (var i = events.length - 2; i >= 0; i--) {\n                  if (events[i].endDate.getTime() != currentTime || !events[i].endHalfDay && !this.options.alwaysHalfDay) {\n                    otherColor = events[i].color;\n                    break;\n                  }\n                }\n\n                parent.style.background = \"linear-gradient(135deg, \".concat(events[events.length - 1].color, \", \").concat(events[events.length - 1].color, \" 49%, \").concat(otherColor, \" 51%, \").concat(otherColor, \")\");\n              } else if (this.options.roundRangeLimits) {\n                parent.classList.add('round-right');\n              }\n            }\n\n            break;\n\n          case 'custom':\n            if (this.options.customDataSourceRenderer) {\n              this.options.customDataSourceRenderer.call(this, elt, currentDate, events);\n            }\n\n            break;\n        }\n      }\n    }, {\n      key: \"_applyEvents\",\n      value: function _applyEvents() {\n        var _this2 = this;\n\n        if (this.options.displayHeader) {\n          /* Header buttons */\n          this.element.querySelectorAll('.year-neighbor, .year-neighbor2').forEach(function (element) {\n            element.addEventListener('click', function (e) {\n              if (!e.currentTarget.classList.contains('disabled')) {\n                _this2.setYear(parseInt(e.currentTarget.textContent));\n              }\n            });\n          });\n          this.element.querySelector('.calendar-header .prev').addEventListener('click', function (e) {\n            if (!e.currentTarget.classList.contains('disabled')) {\n              var months = _this2.element.querySelector('.months-container');\n\n              months.style.transition = 'margin-left 0.1s';\n              months.style.marginLeft = '100%';\n              setTimeout(function () {\n                months.style.visibility = 'hidden';\n                months.style.transition = '';\n                months.style.marginLeft = '0';\n                setTimeout(function () {\n                  _this2.setYear(_this2.options.startYear - 1);\n                }, 50);\n              }, 100);\n            }\n          });\n          this.element.querySelector('.calendar-header .next').addEventListener('click', function (e) {\n            if (!e.currentTarget.classList.contains('disabled')) {\n              var months = _this2.element.querySelector('.months-container');\n\n              months.style.transition = 'margin-left 0.1s';\n              months.style.marginLeft = '-100%';\n              setTimeout(function () {\n                months.style.visibility = 'hidden';\n                months.style.transition = '';\n                months.style.marginLeft = '0';\n                setTimeout(function () {\n                  _this2.setYear(_this2.options.startYear + 1);\n                }, 50);\n              }, 100);\n            }\n          });\n        }\n\n        var cells = this.element.querySelectorAll('.day:not(.old):not(.new):not(.disabled)');\n        cells.forEach(function (cell) {\n          /* Click on date */\n          cell.addEventListener('click', function (e) {\n            e.stopPropagation();\n\n            var date = _this2._getDate(e.currentTarget);\n\n            _this2._triggerEvent('clickDay', {\n              element: e.currentTarget,\n              date: date,\n              events: _this2.getEvents(date)\n            });\n          });\n          /* Click right on date */\n\n          cell.addEventListener('contextmenu', function (e) {\n            if (_this2.options.enableContextMenu) {\n              e.preventDefault();\n\n              if (_this2.options.contextMenuItems.length > 0) {\n                _this2._openContextMenu(e.currentTarget);\n              }\n            }\n\n            var date = _this2._getDate(e.currentTarget);\n\n            _this2._triggerEvent('dayContextMenu', {\n              element: e.currentTarget,\n              date: date,\n              events: _this2.getEvents(date)\n            });\n          });\n          /* Range selection */\n\n          if (_this2.options.enableRangeSelection) {\n            cell.addEventListener('mousedown', function (e) {\n              if (e.which == 1) {\n                var currentDate = _this2._getDate(e.currentTarget);\n\n                if (_this2.options.allowOverlap || _this2.isThereFreeSlot(currentDate)) {\n                  _this2._mouseDown = true;\n                  _this2._rangeStart = _this2._rangeEnd = currentDate;\n\n                  _this2._refreshRange();\n                }\n              }\n            });\n            cell.addEventListener('mouseenter', function (e) {\n              if (_this2._mouseDown) {\n                var currentDate = _this2._getDate(e.currentTarget);\n\n                if (!_this2.options.allowOverlap) {\n                  var newDate = new Date(_this2._rangeStart.getTime());\n\n                  if (newDate < currentDate) {\n                    var nextDate = new Date(newDate.getFullYear(), newDate.getMonth(), newDate.getDate() + 1);\n\n                    while (newDate < currentDate) {\n                      if (!_this2.isThereFreeSlot(nextDate, false)) {\n                        break;\n                      }\n\n                      newDate.setDate(newDate.getDate() + 1);\n                      nextDate.setDate(nextDate.getDate() + 1);\n                    }\n                  } else {\n                    var nextDate = new Date(newDate.getFullYear(), newDate.getMonth(), newDate.getDate() - 1);\n\n                    while (newDate > currentDate) {\n                      if (!_this2.isThereFreeSlot(nextDate, true)) {\n                        break;\n                      }\n\n                      newDate.setDate(newDate.getDate() - 1);\n                      nextDate.setDate(nextDate.getDate() - 1);\n                    }\n                  }\n\n                  currentDate = newDate;\n                }\n\n                var oldValue = _this2._rangeEnd;\n                _this2._rangeEnd = currentDate;\n\n                if (oldValue.getTime() != _this2._rangeEnd.getTime()) {\n                  _this2._refreshRange();\n                }\n              }\n            });\n          }\n          /* Hover date */\n\n\n          cell.addEventListener('mouseenter', function (e) {\n            if (!_this2._mouseDown) {\n              var date = _this2._getDate(e.currentTarget);\n\n              _this2._triggerEvent('mouseOnDay', {\n                element: e.currentTarget,\n                date: date,\n                events: _this2.getEvents(date)\n              });\n            }\n          });\n          cell.addEventListener('mouseleave', function (e) {\n            var date = _this2._getDate(e.currentTarget);\n\n            _this2._triggerEvent('mouseOutDay', {\n              element: e.currentTarget,\n              date: date,\n              events: _this2.getEvents(date)\n            });\n          });\n        });\n\n        if (this.options.enableRangeSelection) {\n          // Release range selection\n          window.addEventListener('mouseup', function (e) {\n            if (_this2._mouseDown) {\n              _this2._mouseDown = false;\n\n              _this2._refreshRange();\n\n              var minDate = _this2._rangeStart < _this2._rangeEnd ? _this2._rangeStart : _this2._rangeEnd;\n              var maxDate = _this2._rangeEnd > _this2._rangeStart ? _this2._rangeEnd : _this2._rangeStart;\n\n              _this2._triggerEvent('selectRange', {\n                startDate: minDate,\n                endDate: maxDate,\n                events: _this2.getEventsOnRange(minDate, new Date(maxDate.getFullYear(), maxDate.getMonth(), maxDate.getDate() + 1))\n              });\n            }\n          });\n        }\n        /* Responsive management */\n\n\n        if (this._responsiveInterval) {\n          clearInterval(this._responsiveInterval);\n          this._responsiveInterval = null;\n        }\n\n        this._responsiveInterval = setInterval(function () {\n          if (_this2.element.querySelector('.month') == null) {\n            return;\n          }\n\n          var calendarSize = _this2.element.offsetWidth;\n          var monthSize = _this2.element.querySelector('.month').offsetWidth + 10;\n          _this2._nbCols = null;\n\n          if (monthSize * 6 < calendarSize) {\n            _this2._nbCols = 2;\n          } else if (monthSize * 4 < calendarSize) {\n            _this2._nbCols = 3;\n          } else if (monthSize * 3 < calendarSize) {\n            _this2._nbCols = 4;\n          } else if (monthSize * 2 < calendarSize) {\n            _this2._nbCols = 6;\n          } else {\n            _this2._nbCols = 12;\n          }\n\n          _this2.element.querySelectorAll('.month-container').forEach(function (month) {\n            if (!month.classList.contains(\"month-\".concat(_this2._nbCols))) {\n              ['month-2', 'month-3', 'month-4', 'month-6', 'month-12'].forEach(function (className) {\n                month.classList.remove(className);\n              });\n              month.classList.add(\"month-\".concat(_this2._nbCols));\n            }\n          });\n        }, 300);\n      }\n    }, {\n      key: \"_refreshRange\",\n      value: function _refreshRange() {\n        var _this3 = this;\n\n        this.element.querySelectorAll('td.day.range').forEach(function (day) {\n          return day.classList.remove('range');\n        });\n        this.element.querySelectorAll('td.day.range-start').forEach(function (day) {\n          return day.classList.remove('range-start');\n        });\n        this.element.querySelectorAll('td.day.range-end').forEach(function (day) {\n          return day.classList.remove('range-end');\n        });\n\n        if (this._mouseDown) {\n          var minDate = this._rangeStart < this._rangeEnd ? this._rangeStart : this._rangeEnd;\n          var maxDate = this._rangeEnd > this._rangeStart ? this._rangeEnd : this._rangeStart;\n          this.element.querySelectorAll('.month-container').forEach(function (month) {\n            var monthId = parseInt(month.dataset.monthId);\n\n            if (minDate.getMonth() <= monthId && maxDate.getMonth() >= monthId) {\n              month.querySelectorAll('td.day:not(.old):not(.new)').forEach(function (day) {\n                var date = _this3._getDate(day);\n\n                if (date >= minDate && date <= maxDate) {\n                  day.classList.add('range');\n\n                  if (date.getTime() == minDate.getTime()) {\n                    day.classList.add('range-start');\n                  }\n\n                  if (date.getTime() == maxDate.getTime()) {\n                    day.classList.add('range-end');\n                  }\n                }\n              });\n            }\n          });\n        }\n      }\n    }, {\n      key: \"_getElementPosition\",\n      value: function _getElementPosition(element) {\n        var top = 0,\n            left = 0;\n\n        do {\n          top += element.offsetTop || 0;\n          left += element.offsetLeft || 0;\n          element = element.offsetParent;\n        } while (element);\n\n        return {\n          top: top,\n          left: left\n        };\n      }\n    }, {\n      key: \"_openContextMenu\",\n      value: function _openContextMenu(elt) {\n        var _this4 = this;\n\n        var contextMenu = document.querySelector('.calendar-context-menu');\n\n        if (contextMenu !== null) {\n          contextMenu.style.display = 'none'; // Clear the context menu (faster method)\n\n          while (contextMenu.firstChild) {\n            contextMenu.removeChild(contextMenu.firstChild);\n          }\n        } else {\n          contextMenu = document.createElement('div');\n          contextMenu.classList.add('calendar-context-menu');\n          document.body.appendChild(contextMenu);\n        }\n\n        var date = this._getDate(elt);\n\n        var events = this.getEvents(date);\n\n        for (var i = 0; i < events.length; i++) {\n          var eventItem = document.createElement('div');\n          eventItem.classList.add('item');\n          eventItem.style.paddingLeft = '4px';\n          eventItem.style.boxShadow = \"inset 4px 0 0 0 \".concat(events[i].color);\n          var eventItemContent = document.createElement('div');\n          eventItemContent.classList.add('content');\n          var text = document.createElement('span');\n          text.classList.add('text');\n          text.textContent = events[i].name;\n          eventItemContent.appendChild(text);\n          var icon = document.createElement('span');\n          icon.classList.add('arrow');\n          icon.innerHTML = \"&rsaquo;\";\n          eventItemContent.appendChild(icon);\n          eventItem.appendChild(eventItemContent);\n\n          this._renderContextMenuItems(eventItem, this.options.contextMenuItems, events[i]);\n\n          contextMenu.appendChild(eventItem);\n        }\n\n        if (contextMenu.children.length > 0) {\n          var position = this._getElementPosition(elt);\n\n          contextMenu.style.left = position.left + 25 + 'px';\n          contextMenu.style.right = '';\n          contextMenu.style.top = position.top + 25 + 'px';\n          contextMenu.style.display = 'block';\n\n          if (contextMenu.getBoundingClientRect().right > document.body.offsetWidth) {\n            contextMenu.style.left = '';\n            contextMenu.style.right = '0';\n          } // Launch the position check once the whole context menu tree will be rendered\n\n\n          setTimeout(function () {\n            return _this4._checkContextMenuItemsPosition();\n          }, 0);\n\n          var closeContextMenu = function closeContextMenu(event) {\n            if (event.type !== 'click' || !contextMenu.contains(event.target)) {\n              contextMenu.style.display = 'none';\n              window.removeEventListener('click', closeContextMenu);\n              window.removeEventListener('resize', closeContextMenu);\n              window.removeEventListener('scroll', closeContextMenu);\n            }\n          };\n\n          window.addEventListener('click', closeContextMenu);\n          window.addEventListener('resize', closeContextMenu);\n          window.addEventListener('scroll', closeContextMenu);\n        }\n      }\n    }, {\n      key: \"_renderContextMenuItems\",\n      value: function _renderContextMenuItems(parent, items, evt) {\n        var subMenu = document.createElement('div');\n        subMenu.classList.add('submenu');\n\n        for (var i = 0; i < items.length; i++) {\n          if (items[i].visible === false || typeof items[i].visible === \"function\" && !items[i].visible(evt)) {\n            continue;\n          }\n\n          var menuItem = document.createElement('div');\n          menuItem.classList.add('item');\n          var menuItemContent = document.createElement('div');\n          menuItemContent.classList.add('content');\n          var text = document.createElement('span');\n          text.classList.add('text');\n          text.textContent = items[i].text;\n          menuItemContent.appendChild(text);\n\n          if (items[i].click) {\n            (function (index) {\n              menuItemContent.addEventListener('click', function () {\n                document.querySelector('.calendar-context-menu').style.display = 'none';\n                items[index].click(evt);\n              });\n            })(i);\n          }\n\n          menuItem.appendChild(menuItemContent);\n\n          if (items[i].items && items[i].items.length > 0) {\n            var icon = document.createElement('span');\n            icon.classList.add('arrow');\n            icon.innerHTML = \"&rsaquo;\";\n            menuItemContent.appendChild(icon);\n\n            this._renderContextMenuItems(menuItem, items[i].items, evt);\n          }\n\n          subMenu.appendChild(menuItem);\n        }\n\n        if (subMenu.children.length > 0) {\n          parent.appendChild(subMenu);\n        }\n      }\n    }, {\n      key: \"_checkContextMenuItemsPosition\",\n      value: function _checkContextMenuItemsPosition() {\n        var menus = document.querySelectorAll('.calendar-context-menu .submenu');\n        menus.forEach(function (menu) {\n          var htmlMenu = menu;\n          htmlMenu.style.display = 'block';\n          htmlMenu.style.visibility = 'hidden';\n        });\n        menus.forEach(function (menu) {\n          var htmlMenu = menu;\n\n          if (htmlMenu.getBoundingClientRect().right > document.body.offsetWidth) {\n            htmlMenu.classList.add('open-left');\n          } else {\n            htmlMenu.classList.remove('open-left');\n          }\n        });\n        menus.forEach(function (menu) {\n          var htmlMenu = menu;\n          htmlMenu.style.display = '';\n          htmlMenu.style.visibility = '';\n        });\n      }\n    }, {\n      key: \"_getDate\",\n      value: function _getDate(elt) {\n        var day = elt.querySelector('.day-content').textContent;\n        var month = elt.closest('.month-container').dataset.monthId;\n        var year = this.options.startYear;\n        return new Date(year, month, day);\n      }\n    }, {\n      key: \"_triggerEvent\",\n      value: function _triggerEvent(eventName, parameters) {\n        var event = null;\n\n        if (typeof Event === \"function\") {\n          event = new Event(eventName);\n        } else {\n          event = document.createEvent('Event');\n          event.initEvent(eventName, false, false);\n        }\n\n        event.calendar = this;\n\n        for (var i in parameters) {\n          event[i] = parameters[i];\n        }\n\n        this.element.dispatchEvent(event);\n        return event;\n      }\n    }, {\n      key: \"_isDisabled\",\n      value: function _isDisabled(date) {\n        if (this.options.minDate != null && date < this.options.minDate || this.options.maxDate != null && date > this.options.maxDate) {\n          return true;\n        }\n\n        if (this.options.disabledWeekDays.length > 0) {\n          for (var d = 0; d < this.options.disabledWeekDays.length; d++) {\n            if (date.getDay() == this.options.disabledWeekDays[d]) {\n              return true;\n            }\n          }\n        }\n\n        if (this.options.disabledDays.length > 0) {\n          for (var d = 0; d < this.options.disabledDays.length; d++) {\n            if (date.getTime() == this.options.disabledDays[d].getTime()) {\n              return true;\n            }\n          }\n        }\n\n        return false;\n      }\n    }, {\n      key: \"_isHidden\",\n      value: function _isHidden(day) {\n        if (this.options.hiddenWeekDays.length > 0) {\n          for (var d = 0; d < this.options.hiddenWeekDays.length; d++) {\n            if (day == this.options.hiddenWeekDays[d]) {\n              return true;\n            }\n          }\n        }\n\n        return false;\n      }\n      /**\r\n          * Gets the week number for a specified date.\r\n          *\r\n          * @param date The specified date.\r\n          */\n\n    }, {\n      key: \"getWeekNumber\",\n      value: function getWeekNumber(date) {\n        // Algorithm from https://weeknumber.net/how-to/javascript\n        var workingDate = new Date(date.getTime());\n        workingDate.setHours(0, 0, 0, 0); // Thursday in current week decides the year.\n\n        workingDate.setDate(workingDate.getDate() + 3 - (workingDate.getDay() + 6) % 7); // January 4 is always in week 1.\n\n        var week1 = new Date(workingDate.getFullYear(), 0, 4); // Adjust to Thursday in week 1 and count number of weeks from date to week1.\n\n        return 1 + Math.round(((workingDate.getTime() - week1.getTime()) / 86400000 - 3 + (week1.getDay() + 6) % 7) / 7);\n      }\n      /**\r\n          * Gets the data source elements for a specified day.\r\n          *\r\n          * @param date The specified day.\r\n          */\n\n    }, {\n      key: \"getEvents\",\n      value: function getEvents(date) {\n        return this.getEventsOnRange(date, new Date(date.getFullYear(), date.getMonth(), date.getDate() + 1));\n      }\n      /**\r\n          * Gets the data source elements for a specified range of days.\r\n          *\r\n          * @param startDate The beginning of the day range (inclusive).\r\n       * @param endDate The end of the day range (non inclusive).\r\n          */\n\n    }, {\n      key: \"getEventsOnRange\",\n      value: function getEventsOnRange(startDate, endDate) {\n        var events = [];\n\n        if (this._dataSource && startDate && endDate) {\n          for (var i = 0; i < this._dataSource.length; i++) {\n            if (this._dataSource[i].startDate < endDate && this._dataSource[i].endDate >= startDate) {\n              events.push(this._dataSource[i]);\n            }\n          }\n        }\n\n        return events;\n      }\n      /**\r\n          * Check if there is no event on the first part, last part or on the whole specified day.\r\n          *\r\n          * @param date The specified day.\r\n          * @param after Whether to check for a free slot on the first part (if `false`) or the last part (if `true`) of the day. If `null`, this will check on the whole day.\r\n       * \r\n       * Usefull only if using the `alwaysHalfDay` option of the calendar, or the `startHalfDay` or `endHalfDay` option of the datasource.\r\n          */\n\n    }, {\n      key: \"isThereFreeSlot\",\n      value: function isThereFreeSlot(date) {\n        var _this5 = this;\n\n        var after = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var events = this.getEvents(date);\n\n        if (after === true) {\n          return !events.some(function (evt) {\n            return !_this5.options.alwaysHalfDay && !evt.endHalfDay || evt.endDate > date;\n          });\n        } else if (after === false) {\n          return !events.some(function (evt) {\n            return !_this5.options.alwaysHalfDay && !evt.startHalfDay || evt.startDate < date;\n          });\n        } else {\n          return this.isThereFreeSlot(date, false) || this.isThereFreeSlot(date, true);\n        }\n      }\n      /**\r\n          * Gets the year displayed on the calendar.\r\n          */\n\n    }, {\n      key: \"getYear\",\n      value: function getYear() {\n        return this.options.startYear;\n      }\n      /**\r\n          * Sets the year displayed on the calendar.\r\n          *\r\n          * @param year The year to displayed on the calendar.\r\n          */\n\n    }, {\n      key: \"setYear\",\n      value: function setYear(year) {\n        var _this6 = this;\n\n        var parsedYear = parseInt(year);\n\n        if (!isNaN(parsedYear)) {\n          this.options.startYear = parsedYear; // Clear the calendar (faster method)\n\n          while (this.element.firstChild) {\n            this.element.removeChild(this.element.firstChild);\n          }\n\n          if (this.options.displayHeader) {\n            this._renderHeader();\n          }\n\n          var eventResult = this._triggerEvent('yearChanged', {\n            currentYear: this.options.startYear,\n            preventRendering: false\n          });\n\n          if (typeof this.options.dataSource === \"function\") {\n            this.render(true);\n\n            this._fetchDataSource(function (dataSource) {\n              _this6._dataSource = dataSource;\n\n              _this6._initializeDatasourceColors();\n\n              _this6.render(false);\n            });\n          } else {\n            if (!eventResult.preventRendering) {\n              this.render();\n            }\n          }\n        }\n      }\n      /**\r\n          * Gets the minimum date of the calendar.\r\n          */\n\n    }, {\n      key: \"getMinDate\",\n      value: function getMinDate() {\n        return this.options.minDate;\n      }\n      /**\r\n          * Sets the minimum date of the calendar.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param minDate The minimum date to set.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setMinDate\",\n      value: function setMinDate(date) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        if (date instanceof Date || date === null) {\n          this.options.minDate = date;\n\n          if (!preventRendering) {\n            this.render();\n          }\n        }\n      }\n      /**\r\n          * Gets the maximum date of the calendar.\r\n          */\n\n    }, {\n      key: \"getMaxDate\",\n      value: function getMaxDate() {\n        return this.options.maxDate;\n      }\n      /**\r\n          * Sets the maximum date of the calendar. \r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param maxDate The maximum date to set.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setMaxDate\",\n      value: function setMaxDate(date) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        if (date instanceof Date || date === null) {\n          this.options.maxDate = date;\n\n          if (!preventRendering) {\n            this.render();\n          }\n        }\n      }\n      /**\r\n          * Gets the current style used for displaying data source.\r\n          */\n\n    }, {\n      key: \"getStyle\",\n      value: function getStyle() {\n        return this.options.style;\n      }\n      /**\r\n          * Sets the style to use for displaying data source. \r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param style The style to use for displaying data source (\"background\", \"border\" or \"custom\").\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setStyle\",\n      value: function setStyle(style) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.style = style == 'background' || style == 'border' || style == 'custom' ? style : 'border';\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets a value indicating whether the user can select a range which overlapping an other element present in the datasource.\r\n          */\n\n    }, {\n      key: \"getAllowOverlap\",\n      value: function getAllowOverlap() {\n        return this.options.allowOverlap;\n      }\n      /**\r\n          * Sets a value indicating whether the user can select a range which overlapping an other element present in the datasource.\r\n          *\r\n          * @param allowOverlap Indicates whether the user can select a range which overlapping an other element present in the datasource.\r\n          */\n\n    }, {\n      key: \"setAllowOverlap\",\n      value: function setAllowOverlap(allowOverlap) {\n        this.options.allowOverlap = allowOverlap;\n      }\n      /**\r\n          * Gets a value indicating whether the weeks number are displayed.\r\n          */\n\n    }, {\n      key: \"getDisplayWeekNumber\",\n      value: function getDisplayWeekNumber() {\n        return this.options.displayWeekNumber;\n      }\n      /**\r\n          * Sets a value indicating whether the weeks number are displayed.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param  displayWeekNumber Indicates whether the weeks number are displayed.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setDisplayWeekNumber\",\n      value: function setDisplayWeekNumber(displayWeekNumber) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.displayWeekNumber = displayWeekNumber;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets a value indicating whether the calendar header is displayed.\r\n          */\n\n    }, {\n      key: \"getDisplayHeader\",\n      value: function getDisplayHeader() {\n        return this.options.displayHeader;\n      }\n      /**\r\n          * Sets a value indicating whether the calendar header is displayed.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param displayHeader Indicates whether the calendar header is displayed.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setDisplayHeader\",\n      value: function setDisplayHeader(displayHeader) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.displayHeader = displayHeader;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets a value indicating whether the data source must be rendered on disabled days.\r\n          */\n\n    }, {\n      key: \"getDisplayDisabledDataSource\",\n      value: function getDisplayDisabledDataSource() {\n        return this.options.displayDisabledDataSource;\n      }\n      /**\r\n          * Sets a value indicating whether the data source must be rendered on disabled days.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param displayDisabledDataSource Indicates whether the data source must be rendered on disabled days.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setDisplayDisabledDataSource\",\n      value: function setDisplayDisabledDataSource(displayDisabledDataSource) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.displayDisabledDataSource = displayDisabledDataSource;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets a value indicating whether the beginning and the end of each range should be displayed as half selected day.\r\n          */\n\n    }, {\n      key: \"getAlwaysHalfDay\",\n      value: function getAlwaysHalfDay() {\n        return this.options.alwaysHalfDay;\n      }\n      /**\r\n          * Sets a value indicating whether the beginning and the end of each range should be displayed as half selected day.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param alwaysHalfDay Indicates whether the beginning and the end of each range should be displayed as half selected day.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setAlwaysHalfDay\",\n      value: function setAlwaysHalfDay(alwaysHalfDay) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.alwaysHalfDay = alwaysHalfDay;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets a value indicating whether the user can make range selection.\r\n          */\n\n    }, {\n      key: \"getEnableRangeSelection\",\n      value: function getEnableRangeSelection() {\n        return this.options.enableRangeSelection;\n      }\n      /**\r\n          * Sets a value indicating whether the user can make range selection.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param enableRangeSelection Indicates whether the user can make range selection.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setEnableRangeSelection\",\n      value: function setEnableRangeSelection(enableRangeSelection) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.enableRangeSelection = enableRangeSelection;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets the disabled days.\r\n          */\n\n    }, {\n      key: \"getDisabledDays\",\n      value: function getDisabledDays() {\n        return this.options.disabledDays;\n      }\n      /**\r\n          * Sets the disabled days.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param disableDays The disabled days to set.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setDisabledDays\",\n      value: function setDisabledDays(disabledDays) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.disabledDays = disabledDays instanceof Array ? disabledDays : [];\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets the disabled days of the week.\r\n          */\n\n    }, {\n      key: \"getDisabledWeekDays\",\n      value: function getDisabledWeekDays() {\n        return this.options.disabledWeekDays;\n      }\n      /**\r\n          * Sets the disabled days of the week.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param disabledWeekDays The disabled days of the week to set.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setDisabledWeekDays\",\n      value: function setDisabledWeekDays(disabledWeekDays) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.disabledWeekDays = disabledWeekDays instanceof Array ? disabledWeekDays : [];\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets the hidden days of the week.\r\n          */\n\n    }, {\n      key: \"getHiddenWeekDays\",\n      value: function getHiddenWeekDays() {\n        return this.options.hiddenWeekDays;\n      }\n      /**\r\n          * Sets the hidden days of the week.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param hiddenWeekDays The hidden days of the week to set.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setHiddenWeekDays\",\n      value: function setHiddenWeekDays(hiddenWeekDays) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.hiddenWeekDays = hiddenWeekDays instanceof Array ? hiddenWeekDays : [];\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets a value indicating whether the beginning and the end of each range should be displayed as rounded cells.\r\n          */\n\n    }, {\n      key: \"getRoundRangeLimits\",\n      value: function getRoundRangeLimits() {\n        return this.options.roundRangeLimits;\n      }\n      /**\r\n          * Sets a value indicating whether the beginning and the end of each range should be displayed as rounded cells.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param roundRangeLimits Indicates whether the beginning and the end of each range should be displayed as rounded cells. \r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setRoundRangeLimits\",\n      value: function setRoundRangeLimits(roundRangeLimits) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.roundRangeLimits = roundRangeLimits;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets a value indicating whether the default context menu must be displayed when right clicking on a day.\r\n          */\n\n    }, {\n      key: \"getEnableContextMenu\",\n      value: function getEnableContextMenu() {\n        return this.options.enableContextMenu;\n      }\n      /**\r\n          * Sets a value indicating whether the default context menu must be displayed when right clicking on a day. \r\n          * \r\n       * This method causes a refresh of the calendar.\r\n          * \r\n          * @param enableContextMenu Indicates whether the default context menu must be displayed when right clicking on a day.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setEnableContextMenu\",\n      value: function setEnableContextMenu(enableContextMenu) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.enableContextMenu = enableContextMenu;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets the context menu items.\r\n          */\n\n    }, {\n      key: \"getContextMenuItems\",\n      value: function getContextMenuItems() {\n        return this.options.contextMenuItems;\n      }\n      /**\r\n          * Sets new context menu items.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param contextMenuItems The new context menu items.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setContextMenuItems\",\n      value: function setContextMenuItems(contextMenuItems) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.contextMenuItems = contextMenuItems instanceof Array ? contextMenuItems : [];\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets the custom day renderer.\r\n          */\n\n    }, {\n      key: \"getCustomDayRenderer\",\n      value: function getCustomDayRenderer() {\n        return this.options.customDayRenderer;\n      }\n      /**\r\n          * Sets the custom day renderer.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n       *\r\n       * @param handler The function used to render the days. This function is called during render for each day.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setCustomDayRenderer\",\n      value: function setCustomDayRenderer(customDayRenderer) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.customDayRenderer = typeof customDayRenderer === \"function\" ? customDayRenderer : null;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets the custom data source renderer.\r\n          */\n\n    }, {\n      key: \"getCustomDataSourceRenderer\",\n      value: function getCustomDataSourceRenderer() {\n        return this.options.customDataSourceRenderer;\n      }\n      /**\r\n          * Sets the custom data source renderer. Works only with the style set to \"custom\".\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n       *\r\n       * @param handler The function used to render the data source. This function is called during render for each day containing at least one event.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setCustomDataSourceRenderer\",\n      value: function setCustomDataSourceRenderer(customDataSourceRenderer) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.customDataSourceRenderer = typeof customDataSourceRenderer === \"function\" ? customDataSourceRenderer : null;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets the language used for calendar rendering.\r\n          */\n\n    }, {\n      key: \"getLanguage\",\n      value: function getLanguage() {\n        return this.options.language;\n      }\n      /**\r\n          * Sets the language used for calendar rendering.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param language The language to use for calendar redering.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setLanguage\",\n      value: function setLanguage(language) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        if (language != null && Calendar.locales[language] != null) {\n          this.options.language = language;\n\n          if (!preventRendering) {\n            this.render();\n          }\n        }\n      }\n      /**\r\n          * Gets the current data source.\r\n          */\n\n    }, {\n      key: \"getDataSource\",\n      value: function getDataSource() {\n        return this.options.dataSource;\n      }\n      /**\r\n          * Sets a new data source.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param dataSource The new data source.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setDataSource\",\n      value: function setDataSource(dataSource) {\n        var _this7 = this;\n\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.dataSource = dataSource instanceof Array || typeof dataSource === \"function\" ? dataSource : [];\n\n        if (typeof this.options.dataSource === \"function\") {\n          this.render(true);\n\n          this._fetchDataSource(function (dataSource) {\n            _this7._dataSource = dataSource;\n\n            _this7._initializeDatasourceColors();\n\n            _this7.render(false);\n          });\n        } else {\n          this._dataSource = this.options.dataSource;\n\n          this._initializeDatasourceColors();\n\n          if (!preventRendering) {\n            this.render();\n          }\n        }\n      }\n      /**\r\n          * Gets the starting day of the week.\r\n          */\n\n    }, {\n      key: \"getWeekStart\",\n      value: function getWeekStart() {\n        return this.options.weekStart ? this.options.weekStart : Calendar.locales[this.options.language].weekStart;\n      }\n      /**\r\n          * Sets the starting day of the week.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param weekStart The starting day of the week. This option overrides the parameter define in the language file.\r\n          * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setWeekStart\",\n      value: function setWeekStart(weekStart) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.weekStart = !isNaN(parseInt(weekStart)) ? parseInt(weekStart) : null;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets the loading template.\r\n          */\n\n    }, {\n      key: \"getLoadingTemplate\",\n      value: function getLoadingTemplate() {\n        return this.options.loadingTemplate;\n      }\n      /**\r\n          * Sets the loading template.\r\n          *\r\n          * @param loadingTemplate The loading template.\r\n          */\n\n    }, {\n      key: \"setLoadingTemplate\",\n      value: function setLoadingTemplate(loadingTemplate) {\n        this.options.loadingTemplate = typeof loadingTemplate === \"string\" || loadingTemplate instanceof HTMLElement ? loadingTemplate : null;\n      }\n      /**\r\n       * \r\n          * Add a new element to the data source.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          * \r\n          * @param element The element to add.\r\n       * @param preventRendering Indicates whether the calendar shouldn't be refreshed once the event added.\r\n          */\n\n    }, {\n      key: \"addEvent\",\n      value: function addEvent(evt) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        this._dataSource.push(evt);\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n    }]);\n\n    return Calendar;\n  }();\n\n  _exports[\"default\"] = Calendar;\n\n  _defineProperty(Calendar, \"locales\", {\n    en: {\n      days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n      daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n      daysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n      months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n      monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n      weekShort: 'W',\n      weekStart: 0\n    }\n  });\n\n  _defineProperty(Calendar, \"colors\", ['#2C8FC9', '#9CB703', '#F5BB00', '#FF4A32', '#B56CE2', '#45A597']);\n\n  if ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\") {\n    window.Calendar = Calendar;\n    document.addEventListener(\"DOMContentLoaded\", function () {\n      document.querySelectorAll('[data-provide=\"calendar\"]').forEach(function (element) {\n        return new Calendar(element);\n      });\n    });\n  }\n});","/**\n * Copyright (C) 2018  The Software Heritage developers\n * See the AUTHORS file at the top-level directory of this distribution\n * License: GNU Affero General Public License version 3, or any later version\n * See top-level LICENSE file for more information\n */\n\n// origin visits reporting bundle\n\nexport * from './visits-reporting';\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() {\n  return this || (typeof self === \"object\" && self);\n})() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() {\n    return this || (typeof self === \"object\" && self);\n  })() || Function(\"return this\")()\n);\n"],"sourceRoot":""}